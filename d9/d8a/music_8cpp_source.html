<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenTHUG: Исходный файл C:/git/thug/src/gel/Music/music.cpp</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenTHUG
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">OpenTHUG: let&#39;s port THUG on Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d8a/music_8cpp_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">music.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d9/d8a/music_8cpp.html">См. документацию.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*  </span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    Music.cpp -- highest level</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    p_music.cpp -- platform specific</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">    pcm*.c --  the code that runs on the IOP.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">    This module should actually be renamed now, as it isn&#39;t just for</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    music any more!</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    This module should be called Streaming.cpp.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    This module handles streaming music, and soundfx.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    The stream data is read into IOP memory from the DVD, into a</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    double buffer in IOP memory, about once every three seconds.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    </span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    The IOP chip has a thread that is running on a timer interrupt (see the pcm</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">    code, which compiles as an IOP module EzPcm.irx).  60 times per second,</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    this thread updates small areas of memory on the SPU2 chip -- double</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">    buffers for each stream that need updating approximately every second</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">    and a half (or longer if the pitch has been turned down lower).</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">    These voices work just like the other voices for soundfx, except that they</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">    loop over a small area that is updated with the sound data streaming off</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">    the DVD.  You can change the pitch and volume of these voices on the fly</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">    just like soundFX, so streaming sounds can be adjusted positionally over time.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">    Oh, yeah, just one more thing:  yo mamma, yo pappa, yo greasy bald gradma!</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d8/de2/_defines_8h.html">core/defines.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/d3c/macros_8h.html">core/macros.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d0b/singleton_8h.html">core/singleton.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/db1/math_8h.html">core/math.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d5/dd0/timer_8h.html">sys/timer.h</a>&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/d16/config_8h.html">sys/config/config.h</a>&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/d7f/script_8h.html">gel/scripting/script.h</a>&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d6/d98/symboltable_8h.html">gel/scripting/symboltable.h</a>&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/d31/checksum_8h.html">gel/scripting/checksum.h</a>&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/d00/soundfx_8h.html">gel/soundfx/soundfx.h</a>&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/d10/music_8h.html">gel/music/music.h</a>&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/d97/_stream_component_8h.html">gel/components/streamcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/d23/skate_8h.html">sk/modules/skate/skate.h</a>&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d6/d31/_game_mode_8h.html">sk/modules/skate/gamemode.h</a>&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/d83/debuggfx_8h.html">gfx/debuggfx.h</a>&gt;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#ifdef __PLAT_NGPS__</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;gel/music/ngps/p_music.h&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;gel/music/ngps/pcm/pcm.h&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#elif defined( __PLAT_XBOX__ )</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;gel/music/xbox/p_music.h&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d7/d46/p__soundtrack_8h.html">gel/music/xbox/p_soundtrack.h</a>&gt;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#elif defined( __PLAT_NGC__ )</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &lt;gel/music/ngc/p_music.h&gt;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &lt;gel/music/ngc/pcm/pcm.h&gt;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/d16/config_8h.html">sys/config/config.h</a>&gt;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dd/d02/replay_8h.html">sys/replay/replay.h</a>&gt;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d6c/_async_filesys_8h.html">sys/file/asyncfilesys.h</a>&gt;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#define TEST_FROM_CD 0</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#define WAIT_AFTER_STOP_STREAM      0       // Set to 1 if we need to wait for stream to clear after stopping a stream</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html">   68</a></span>&#160;<span class="keyword">namespace </span><a class="code" href="../../de/d3e/namespace_pcm.html">Pcm</a></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#afbf557d78017d6abcc83d8168b8d72c0">   71</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#afbf557d78017d6abcc83d8168b8d72c0">music_hed_there</a> = <span class="keyword">true</span>;     <span class="comment">// assume music and streams are there to start with, so we can load the hed</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab55ca819636d08506f2530c3a7708bc7">   72</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab55ca819636d08506f2530c3a7708bc7">streams_hed_there</a> = <span class="keyword">true</span>;   <span class="comment">// if hed is not there, then these get set to false</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                        <span class="comment">// which will disable all music and/or streams.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">   75</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">    #if NO_MUSIC_PLEASE</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// Cannot have music if building for proview, because there is not enough IOP memory</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// (ProView uses up some IOP memory with it&#39;s monitor)</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d31/namespace_config.html#a6cdbd8b148c494cebe8d9f141d1896a1">Config::GetHardware</a>()==<a class="code" href="../../d0/d31/namespace_config.html#afde1a372ebd0f2464fbc488b65f90d2dab13cb105a2ee655459bc740361f0ec12">Config::HARDWARE_PS2_PROVIEW</a>)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="../../de/d3e/namespace_pcm.html#afbf557d78017d6abcc83d8168b8d72c0">music_hed_there</a>;    </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">   91</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">    #if DISABLE_STREAMS</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="comment">// Cannot have music if building for proview, because there is not enough IOP memory</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="comment">// (ProView uses up some IOP memory with it&#39;s monitor)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d31/namespace_config.html#a6cdbd8b148c494cebe8d9f141d1896a1">Config::GetHardware</a>()==<a class="code" href="../../d0/d31/namespace_config.html#afde1a372ebd0f2464fbc488b65f90d2dab13cb105a2ee655459bc740361f0ec12">Config::HARDWARE_PS2_PROVIEW</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="../../de/d3e/namespace_pcm.html#ab55ca819636d08506f2530c3a7708bc7">streams_hed_there</a>;  </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// prototypes...</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#aedfa623921245cd3774a44aaa8759d44">TrackIsPlaying</a>( <span class="keywordtype">int</span> whichList, <span class="keywordtype">int</span> whichTrack );</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">  110</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> = 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">  112</a></span>&#160;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html">CurrentStreamInfo</a> <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ NUM_STREAMS ];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#aedada8c569c3338fe9f6fd2ca93c2635">  114</a></span>&#160;<a class="code" href="../../db/df5/struct_pcm_1_1_track_title.html">TrackTitle</a> <a class="code" href="../../de/d3e/namespace_pcm.html#aedada8c569c3338fe9f6fd2ca93c2635">PermTrackTitle</a>[ MAX_NUM_TRACKS ];</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// Static globals</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">  117</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>          <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a> = 0;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">  118</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a>    <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a> ];</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">  119</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>          <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a>;  <span class="comment">// start out playing songs...</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">  120</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span>         <a class="code" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">gTrackName</a>[ MAX_TRACKNAME_STRING_LENGTH ];</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">  121</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span>        <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> = DEFAULT_MUSIC_VOLUME;</div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">  122</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span>        <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> = DEFAULT_MUSIC_STREAM_VOLUME;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a8d17f6d287601e135a21a1868d7cbe9e">  123</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>         <a class="code" href="../../de/d3e/namespace_pcm.html#a8d17f6d287601e135a21a1868d7cbe9e">gMusicInRandomMode</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#aa2312772fae6880b4e1dcf4cf379ad4b">  124</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>         <a class="code" href="../../de/d3e/namespace_pcm.html#aa2312772fae6880b4e1dcf4cf379ad4b">gMusicLooping</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#abd67c718890698fd00cab9dba2884c8b">  125</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>          <a class="code" href="../../de/d3e/namespace_pcm.html#abd67c718890698fd00cab9dba2884c8b">sCounter</a> = 1;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">  126</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>         <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#afd31dedba5f3740e9522708f673676f6">  127</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>          <a class="code" href="../../de/d3e/namespace_pcm.html#afd31dedba5f3740e9522708f673676f6">gNumStreams</a> = 0;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">  128</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html">Obj::CStreamComponent</a>    *<a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ NUM_STREAMS ]; <span class="comment">// should have as many of these as streams...</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">// Music stream data</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">  132</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225">EMusicStreamType</a> <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">MUSIC_STREAM_TYPE_NONE</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor">#if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">  134</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>           <a class="code" href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">gMusicStreamChecksum</a>;   <span class="comment">// Checksum of music stream</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span>            <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a>;     <span class="comment">// Volume of music stream</span></div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">  136</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>             <a class="code" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">gMusicStreamWaitingToStart</a>; <span class="comment">// true if we are still waiting for the channel to become free</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif // WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// Limit is actually 500 ...</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#define         MAX_USER_SONGS                  600</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">  143</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>     <a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a>    = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">  144</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a>          = 0;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">  145</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>   <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a>     = 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a6cfb7d70a6d8a9c0381060ef3db68e03">  146</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>     <a class="code" href="../../de/d3e/namespace_pcm.html#a6cfb7d70a6d8a9c0381060ef3db68e03">s_xbox_user_soundtrack_random</a>   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">  147</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>   <a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a>             = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">  149</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[MAX_USER_SONGS];</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">  152</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span>     <a class="code" href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">shuffle_random_songs</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">  153</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a> = 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">  154</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">random_song_index</a> = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">  155</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[MAX_USER_SONGS];</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// Stream ID functions</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ac77adb07df4cd02d0a83fc32daeb7cac">  159</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ac77adb07df4cd02d0a83fc32daeb7cac">IDAvailable</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> ( (<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].uniqueID == <span class="keywordtype">id</span>) &amp;&amp; (<a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].voice) != <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a>))</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">  172</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <span class="keywordtype">id</span>, <span class="keywordtype">bool</span> assert_if_duplicate = <span class="keyword">true</span>)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">if</span> ( (<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].uniqueID == <span class="keywordtype">id</span>) &amp;&amp; (<a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].voice) != <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a>))</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> ( (<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].controlID == <span class="keywordtype">id</span>) &amp;&amp; (<a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].voice) != <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a>))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            Dbg_MsgAssert(!assert_if_duplicate, (<span class="stringliteral">&quot;Trying to control duplicate stream %s by checksum&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(<span class="keywordtype">id</span>)));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#af8b5edef75019ce0cacf9e94826a7d74">  196</a></span>&#160;<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="../../de/d3e/namespace_pcm.html#af8b5edef75019ce0cacf9e94826a7d74">GenerateUniqueID</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <span class="keywordtype">id</span>)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// Keep incrementing ID until one works.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="../../de/d3e/namespace_pcm.html#ac77adb07df4cd02d0a83fc32daeb7cac">IDAvailable</a>(<span class="keywordtype">id</span>))</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordtype">id</span>++;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d6/d01/p__ezcommon_8h.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">  205</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// the counter has to reach SONG_UPDATE_INTERVAL before a new song is played...</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// so resetting the counter keeps a new song from playing right away.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#abd67c718890698fd00cab9dba2884c8b">sCounter</a> = 1;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">MUSIC_STREAM_TYPE_NONE</a>;      <span class="comment">// In case we were in this mode</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ab9a37bbf752c43628b80328fecea0625">PCMAudio_StopMusic</a>( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">// If a channel is specified, stop a specific stream (might be a streaming soundFX on an object that&#39;s getting</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">// destroyed, for example).</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// If channel parameter is -1, stop all non-music streams!</span></div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">  219</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">StopStreams</a>( <span class="keywordtype">int</span> channel )</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="../../d9/d29/namespace_replay.html#a3a69e13e44771901b80376faac3e61ee">Replay::WriteStopStream</a>(channel);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    Dbg_MsgAssert( ( channel &gt;= -1 ) &amp;&amp; ( channel &lt; NUM_STREAMS ), ( <span class="stringliteral">&quot;Invalid stream channel %d&quot;</span>, channel ) );</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span> ( channel == -1 )</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a91859ab4833d43a3eed785564840489c">PCMAudio_StopStreams</a>( );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a738a4e89e02ad27cf4da30aed7d9111a">PCMAudio_StopStream</a>( channel );</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">// if uniqueID isn&#39;t specified, stop whatever stream is playing!</span></div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a659c4738c99389e5d9e7bd68e66149dc">  236</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a659c4738c99389e5d9e7bd68e66149dc">StopStreamFromID</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID )</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (channel &gt;= 0)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a738a4e89e02ad27cf4da30aed7d9111a">PCMAudio_StopStream</a>( channel, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        streamID = <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">uniqueID</a>;      <span class="comment">// change over to uniqueID</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ i ] )</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j = 0; j &lt; MAX_STREAMS_PER_OBJECT; j++ )</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ i ]-&gt;mStreamingID[ j ] == streamID )</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ i ]-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0108371dc47ea5f5a0da20e047449b90">mStreamingID</a>[ j ] = 0;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ i ] = NULL;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#adc76ba3d53691cfd74b0ff1ce7e42e78">  270</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#adc76ba3d53691cfd74b0ff1ce7e42e78">SetStreamVolumeFromID</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID, <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> *p_volume )</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (channel &gt;= 0)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="preprocessor">#       ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#adc8c3064bf3813334bbf1896e7f3dffa">PCMAudio_SetStreamVolume</a>( p_volume, channel );</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#       else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#adc8c3064bf3813334bbf1896e7f3dffa">PCMAudio_SetStreamVolume</a>( p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 0 ), p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 1 ), channel );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#       endif</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ae5b397db65d5090bf8ea68467101936d">  297</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ae5b397db65d5090bf8ea68467101936d">SetStreamPitchFromID</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID, <span class="keywordtype">float</span> pitch )</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;{</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (channel &gt;= 0)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a09ec8aa54db3e5f484e9166fb48ab6bc">PCMAudio_SetStreamPitch</a>( pitch, channel );</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00320"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a01c3edefbbc2c808b0dc621cd299f2e6">  320</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a01c3edefbbc2c808b0dc621cd299f2e6">sGenerateRandomSongOrder</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordtype">int</span> num_songs=<a class="code" href="../../de/d3e/namespace_pcm.html#aea178084ee3ed71abe7dbfd2df8bfea4">Pcm::GetSoundtrackNumSongs</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a> );</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span>( num_songs == 0 )</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">// Nothing to do.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// Limit to MAX_USER_SONGS to prevent any buffer overwriting.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">if</span> (num_songs&gt;MAX_USER_SONGS)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        num_songs=MAX_USER_SONGS;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }   </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// Remember the last song in the previous order, so we can make sure that</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="comment">// the first song in the new order is different from it.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="comment">// Note: OK if the last song was just an uninitialised random value, won&#39;t cause any problems.</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">int</span> last_song=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[num_songs-1];</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// Initialise the order to be 0,1,2,3 ... etc</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_songs; ++i)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[i]=i;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// Jumble it up.        </span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n=0; n&lt;2000; ++n)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordtype">int</span> a=<a class="code" href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a>(num_songs);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordtype">int</span> b=<a class="code" href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a>(num_songs);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="keywordtype">int</span> temp=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[a];</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[a]=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[b];</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[b]=temp;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="comment">// If the first song in the new order equals the last song of the last order,</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">// do one further swap to make sure it is different.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[0]==last_song)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="comment">// a is the first song.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordtype">int</span> a=0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="comment">// Choose b to be a random one of the other songs.</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordtype">int</span> b;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (num_songs&gt;1)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="comment">// Make b not able to equal 0, so that we don&#39;t swap the first with itself.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            b=1+<a class="code" href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a>(num_songs-1);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="comment">// Unless there is only one song, in which case just swap it with itself. No point but what the heck.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            b=0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// Do the swap.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordtype">int</span> temp=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[a];</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[a]=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[b];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[b]=temp;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">#endif // __PLAT_XBOX__</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ac4dbd46e133f6134416ffc8c9b379df4">  392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ac4dbd46e133f6134416ffc8c9b379df4">UseUserSoundtrack</a>( <span class="keywordtype">int</span> soundtrack )</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    Dbg_MsgAssert(soundtrack&gt;=0 &amp;&amp; soundtrack&lt;<a class="code" href="../../de/d3e/namespace_pcm.html#a9dc5061c2811975c573c4f8ea921cad8">Pcm::GetNumSoundtracks</a>(),(<span class="stringliteral">&quot;Bad soundtrack&quot;</span>));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a>=soundtrack;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a6cfb7d70a6d8a9c0381060ef3db68e03">s_xbox_user_soundtrack_random</a>)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a01c3edefbbc2c808b0dc621cd299f2e6">sGenerateRandomSongOrder</a>();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a>=0;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a>=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[0];</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a>=0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    }   </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">#   endif // __PLAT_XBOX__</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a52feb59b6c08a451fcfe6543e0f20fb2">  419</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a52feb59b6c08a451fcfe6543e0f20fb2">UseStandardSoundtrack</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a9da9f75b41f77226cdeca79fe90b9ece">  432</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a9da9f75b41f77226cdeca79fe90b9ece">UsingUserSoundtrack</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">#   else</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00447"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab477c8e933d0a17a930f5b65833904ca">  447</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab477c8e933d0a17a930f5b65833904ca">SaveSoundtrackToStructure</a>( <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *pStuff)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    Dbg_MsgAssert( pStuff,(<span class="stringliteral">&quot;NULL pStuff&quot;</span>));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a>)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        pStuff-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a3872f7f0a9ebcc695745aabeefab2796">AddComponent</a>(<a class="code" href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a>(<span class="stringliteral">&quot;UserSoundtrackIndex&quot;</span>),<a class="code" href="../../d1/d54/namespace_script.html#a84ac1eedf37ab70be269e8fcbdc6ea21af2eca5380b5f9edf380b1ea9121c03eb">ESYMBOLTYPE_INTEGER</a>,<a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a>);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordtype">char</span> p_buf[100];</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keyword">const</span> WCHAR* p_soundtrack_name_wide=<a class="code" href="../../de/d3e/namespace_pcm.html#a4ca02b853b494f2c40efc49fdc375a5f">Pcm::GetSoundtrackName</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">if</span> (p_soundtrack_name_wide)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            wsprintfA( p_buf, <span class="stringliteral">&quot;%ls&quot;</span>, p_soundtrack_name_wide);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        }   </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            p_buf[0]=0;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }   </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        pStuff-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a3872f7f0a9ebcc695745aabeefab2796">AddComponent</a>(<a class="code" href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a>(<span class="stringliteral">&quot;UserSoundtrackName&quot;</span>),<a class="code" href="../../d1/d54/namespace_script.html#a84ac1eedf37ab70be269e8fcbdc6ea21affb8075a5cc58952e049bed37c3b7c56">ESYMBOLTYPE_STRING</a>,p_buf);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }   </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">#   endif // __PLAT_XBOX__</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160; </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a49d96c61a8cac9aa8693a739e9733acf">  478</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a49d96c61a8cac9aa8693a739e9733acf">GetSoundtrackFromStructure</a>( <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *pStuff)</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;{</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    Dbg_MsgAssert(pStuff,(<span class="stringliteral">&quot;NULL pStuff&quot;</span>));</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">int</span> user_soundtrack_index=0;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (pStuff-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a1e85eee5e600de8358db26f6c777e42d">GetInteger</a>(<span class="stringliteral">&quot;UserSoundtrackIndex&quot;</span>,&amp;user_soundtrack_index))</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="comment">// A user soundtrack index is specified, but maybe the name does not match what is on this</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="comment">// machine, ie, they could have put the mem card into a different xbox ...</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="comment">// Get the name of this soundtrack on this machine</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordtype">char</span> p_buf[100];</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keyword">const</span> WCHAR* p_soundtrack_name_wide=<a class="code" href="../../de/d3e/namespace_pcm.html#a4ca02b853b494f2c40efc49fdc375a5f">Pcm::GetSoundtrackName</a>(user_soundtrack_index);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="keywordflow">if</span> (p_soundtrack_name_wide)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            wsprintfA( p_buf, <span class="stringliteral">&quot;%ls&quot;</span>, p_soundtrack_name_wide);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        }   </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            p_buf[0]=0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }   </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment">// Get the name as stored on the mem card</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *p_stored_name=<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        pStuff-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a5d9860e75457556161201e9cf3e9732d">GetText</a>(<span class="stringliteral">&quot;UserSoundtrackName&quot;</span>,&amp;p_stored_name);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (strcmp(p_stored_name,p_buf)==0)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            <span class="comment">// They match! So use that soundtrack.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#ac4dbd46e133f6134416ffc8c9b379df4">UseUserSoundtrack</a>(user_soundtrack_index);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        }   </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }   </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="comment">// Oh well, use the standard soundtrack instead.</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a52feb59b6c08a451fcfe6543e0f20fb2">UseStandardSoundtrack</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#   endif   // __PLAT_XBOX__</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a2db977e9bc1ec7c3561fbb493a65abbf">  520</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a2db977e9bc1ec7c3561fbb493a65abbf">_PlayMusicTrack</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;{</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling playtrack %s, when PCM Audio not initialized.&quot;</span>, filename ));</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    Dbg_MsgAssert( strlen( filename ) &lt; 200,( <span class="stringliteral">&quot;Filename too long&quot;</span> ));</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a> &amp;&amp; !skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>()-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>())</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="../../de/d3e/namespace_pcm.html#aea178084ee3ed71abe7dbfd2df8bfea4">Pcm::GetSoundtrackNumSongs</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a> ) == 0 )</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="../../de/d3e/namespace_pcm.html#a25d3947b513e53b7a680f8e2f0af90dd">PCMAudio_PlaySoundtrackMusicTrack</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a>, <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a> ))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="../../de/d3e/namespace_pcm.html#a6cfb7d70a6d8a9c0381060ef3db68e03">s_xbox_user_soundtrack_random</a> )</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                ++<a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a> &gt;= <a class="code" href="../../de/d3e/namespace_pcm.html#aea178084ee3ed71abe7dbfd2df8bfea4">Pcm::GetSoundtrackNumSongs</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a> ))</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a01c3edefbbc2c808b0dc621cd299f2e6">sGenerateRandomSongOrder</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a> = 0;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                }   </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a>=<a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[<a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a>];</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            }   </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                ++<a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="keywordflow">if</span>( <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a> &gt;= <a class="code" href="../../de/d3e/namespace_pcm.html#aea178084ee3ed71abe7dbfd2df8bfea4">Pcm::GetSoundtrackNumSongs</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">s_xbox_user_soundtrack</a> ))</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a> = 0;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            }   </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        }       </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">if</span>( !<a class="code" href="../../de/d3e/namespace_pcm.html#a7a0f485121bf4a48fb253675672e0c5f">PCMAudio_PlayMusicTrack</a>( filename ))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    }       </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#   else</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../de/d3e/namespace_pcm.html#a7a0f485121bf4a48fb253675672e0c5f">PCMAudio_PlayMusicTrack</a>( filename ))</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor">#   endif // __PLAT_XBOX__</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">//  volume = volume * Config::GetMasterVolume()/100.0f;</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">//  if (volume &lt;0.1f)</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">//  {</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">//      volume = 0.0f;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">//  }</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( volume );</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">true</span> );</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a2271340d84cc221441afae2949b10254">  590</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a2271340d84cc221441afae2949b10254">_PlayMusicStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum, <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling playtrack %s, when PCM Audio not initialized.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ));</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">#ifdef __PLAT_NGPS__</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../de/d3e/namespace_pcm.html#a87f0cdbef8926aa89167053d746b9718">PCMAudio_PlayMusicStream</a>( checksum ))</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        Dbg_MsgAssert(0, ( <span class="stringliteral">&quot;Failed playing track %s&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ) );</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>( <span class="stringliteral">&quot;Failed playing track %s&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) );</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    Dbg_MsgAssert(0, (<span class="stringliteral">&quot;PCMAudio_PlayMusicStream() not implemented on this platform.&quot;</span>));</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">#endif // __PLAT_NGPS__</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( volume );</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">// returns -1 on failure, otherwise the index into which voice played the sound.</span></div>
<div class="line"><a name="l00617"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a44a3393eb63498717764bce8c583d8c3">  617</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a44a3393eb63498717764bce8c583d8c3">_PlayStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum, <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> *p_volume, <span class="keywordtype">float</span> pitch, <span class="keywordtype">int</span> priority, <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> controlID, <span class="keywordtype">bool</span> preload_only )</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling _PlayStream(), when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="preprocessor">#   endif // __PLAT_XBOX__</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// Initialize lowest to a valid entry</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordtype">int</span> lowest_priority = <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ 0 ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a6645f4d40b8c62bbb5f4fc26e4db61bc">priority</a>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordtype">int</span> lowest_priority_channel = 0;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> lowest_priority_start_frame = <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ 0 ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa195b1c2bb42517390d7c8002bbf6fd2">start_frame</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordtype">bool</span> success;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>( i ) == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="keywordflow">if</span> (preload_only)</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                success = <a class="code" href="../../de/d3e/namespace_pcm.html#a2ce21f5c2ea118617d2437eda3bfd215">PCMAudio_PreLoadStream</a>( checksum, i );</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">//              success = PCMAudio_PlayStream( checksum, i, volumeL, volumeR, pitch );</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#               ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                success = <a class="code" href="../../de/d3e/namespace_pcm.html#a8fe283d98f571b79b3547c94d5285028">PCMAudio_PlayStream</a>( checksum, i, p_volume, pitch );</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="preprocessor">#               else</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                success = <a class="code" href="../../de/d3e/namespace_pcm.html#a8fe283d98f571b79b3547c94d5285028">PCMAudio_PlayStream</a>( checksum, i, p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 0 ), p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 1 ), pitch );</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">#               endif</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="keywordflow">if</span> ( !success )</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="keywordflow">return</span> ( -1 );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            }</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa889c01b8973d0a0005570d914099bbe">controlID</a> = controlID;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">uniqueID</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#af8b5edef75019ce0cacf9e94826a7d74">GenerateUniqueID</a>(controlID);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ac6963cacf147db71ad4d6ff414d3dd40">voice</a> = i;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a6645f4d40b8c62bbb5f4fc26e4db61bc">priority</a> = priority;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa195b1c2bb42517390d7c8002bbf6fd2">start_frame</a> = (<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>)<a class="code" href="../../d1/d0d/namespace_tmr.html#ac753b199dc166fdd9758ca5d04725d95">Tmr::GetRenderFrame</a>();</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a4c4fc4abbd51ae3e4ad682b358eade4f">p_frame_amp</a> = <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4763365ddc30ecfdc38c67bf153c9a15">CStreamFrameAmpManager::sGetFrameAmp</a>(checksum);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">return</span> ( i );</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].priority &lt;= lowest_priority )</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            <span class="comment">// If it is equal priority, we want to find the oldest one</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].priority == lowest_priority) &amp;&amp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                (<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].start_frame &gt;= lowest_priority_start_frame))</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;            lowest_priority = <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a6645f4d40b8c62bbb5f4fc26e4db61bc">priority</a>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            lowest_priority_channel = i;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            lowest_priority_start_frame = <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa195b1c2bb42517390d7c8002bbf6fd2">start_frame</a>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// Couldn&#39;t find a free one, so lets see if we can knock one off</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">if</span> (priority &gt;= lowest_priority)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a738a4e89e02ad27cf4da30aed7d9111a">PCMAudio_StopStream</a>( lowest_priority_channel );</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">    #if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Priority streams not implemented on this system&quot;</span>));      <span class="comment">// Not implemented</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">return</span> ( -1 );</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">if</span> (preload_only)</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;            success = <a class="code" href="../../de/d3e/namespace_pcm.html#a2ce21f5c2ea118617d2437eda3bfd215">PCMAudio_PreLoadStream</a>( checksum, lowest_priority_channel );</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">//          success = PCMAudio_PlayStream( checksum, lowest_priority_channel, volumeL, volumeR, pitch );</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor">#           ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            success = <a class="code" href="../../de/d3e/namespace_pcm.html#a8fe283d98f571b79b3547c94d5285028">PCMAudio_PlayStream</a>( checksum, lowest_priority_channel, p_volume, pitch );</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="preprocessor">#           else</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            success = <a class="code" href="../../de/d3e/namespace_pcm.html#a8fe283d98f571b79b3547c94d5285028">PCMAudio_PlayStream</a>( checksum, lowest_priority_channel, p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 0 ), p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 1 ), pitch );</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="preprocessor">#           endif</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">if</span> ( !success )</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Higher priority stream could not start.  Make sure there was another error (like file not found).&quot;</span>));</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            <span class="keywordflow">return</span> ( -1 );</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ lowest_priority_channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa889c01b8973d0a0005570d914099bbe">controlID</a> = controlID;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ lowest_priority_channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">uniqueID</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#af8b5edef75019ce0cacf9e94826a7d74">GenerateUniqueID</a>(controlID);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ lowest_priority_channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ac6963cacf147db71ad4d6ff414d3dd40">voice</a> = lowest_priority_channel;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ lowest_priority_channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a6645f4d40b8c62bbb5f4fc26e4db61bc">priority</a> = priority;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ lowest_priority_channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa195b1c2bb42517390d7c8002bbf6fd2">start_frame</a> = (<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a>)<a class="code" href="../../d1/d0d/namespace_tmr.html#ac753b199dc166fdd9758ca5d04725d95">Tmr::GetRenderFrame</a>();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ lowest_priority_channel ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a4c4fc4abbd51ae3e4ad682b358eade4f">p_frame_amp</a> = <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4763365ddc30ecfdc38c67bf153c9a15">CStreamFrameAmpManager::sGetFrameAmp</a>(checksum);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">    #endif // WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span> ( lowest_priority_channel );</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">return</span> ( -1 );</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;}</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ad4838fc8a49961622c9b0eaef35d0739">  725</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ad4838fc8a49961622c9b0eaef35d0739">_PreLoadMusicStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum )</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;{</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling _PreLoadMusicStream %s, when PCM Audio not initialized.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ));</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0dbb46ceca862703255ebaa3dd28c431">PCMAudio_PreLoadMusicStream</a>( checksum );</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a95df7065d504f24a8d86e7ec7c25132c">  739</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a95df7065d504f24a8d86e7ec7c25132c">_StartPreLoadedMusicStream</a>( <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span>( !<a class="code" href="../../de/d3e/namespace_pcm.html#afefe0e832aef6da83100e7a0811685e5">PCMAudio_StartPreLoadedMusicStream</a>( ))</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    }</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( volume );</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;}</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="preprocessor">#define MIN_STREAM_VOL      2.0f</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160; </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160; </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a4d8fdb6c0afecf9a5955620cea7866a0">  760</a></span>&#160;<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="../../de/d3e/namespace_pcm.html#a4d8fdb6c0afecf9a5955620cea7866a0">PlayStreamFromObject</a>( <a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html">Obj::CStreamComponent</a> *pComponent, <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamNameChecksum, <span class="keywordtype">float</span> dropoff, <span class="keywordtype">float</span> volume,</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                             <span class="keywordtype">float</span> pitch, <span class="keywordtype">int</span> priority, <span class="keywordtype">int</span> use_pos_info, <a class="code" href="../../d2/d00/soundfx_8h.html#aa353aa07442af82949943fb5e2261443">EDropoffFunc</a> dropoffFunc, <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> controlID )</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html">Sfx::CSfxManager</a> * sfx_manager = Sfx::CSfxManager::Instance();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// Don&#39;t start a stream if it won&#39;t be heard</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span>( sfx_manager-&gt;<a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#a5bf107970a5bb29255c63518247c57fc">PositionalSoundSilenceMode</a>() )</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <a class="code" href="../../d9/d29/namespace_replay.html#a9aa4761c4a0da9123a910787f7a90756">Replay::WritePositionalStream</a>(pComponent-&gt;<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#ad39f6409df17fb6ee459d1071258c645">GetID</a>(),streamNameChecksum,dropoff,volume,pitch,priority,use_pos_info);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> vol;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#aa01bbcd26a45f906d68bd5bb7d86d439">SetSilent</a>();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="comment">// Let the priority system figure this out</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="comment">//if (!StreamAvailable())</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="comment">//  return 0;</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// Set up volume according to position of object to camera.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> ( use_pos_info != 0 )</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <a class="code" href="../../dd/daa/class_gfx_1_1_camera.html">Gfx::Camera</a> *pCamera = <a class="code" href="../../d0/d19/class_nx_1_1_c_viewport_manager.html#ad68f4757ec292366e6063031ad913e5b">Nx::CViewportManager::sGetClosestCamera</a>( pComponent-&gt;<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a75150b149fb2f45075cdebc2422afaff">m_pos</a> );</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> (pCamera)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> dropoff_pos;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> *p_dropoff_pos = NULL;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">if</span> (pComponent-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0feaf96a33b38a299c8a6b53b4c0664a">GetClosestDropoffPos</a>(pCamera, dropoff_pos))</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                p_dropoff_pos = &amp;dropoff_pos;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            sfx_manager-&gt;<a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#ac28a63a77574abed01989635f67c6c72">SetVolumeFromPos</a>( &amp;vol, pComponent-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0718afc882999e7f28085e229d2e61a9">GetClosestEmitterPos</a>(pCamera), dropoff, dropoffFunc, pCamera, p_dropoff_pos );</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#aa01bbcd26a45f906d68bd5bb7d86d439">SetSilent</a>();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="comment">// Seems strange to cancel out a stream if it starting low</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="keywordflow">if</span>( fabsf( vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#aff8f451f84d1facd785aaad61c9bb991">GetLoudestChannel</a>()) &lt; MIN_STREAM_VOL )</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">if</span>( <a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>( 0xd7bb618d <span class="comment">/* DebugSoundFx */</span>, <a class="code" href="../../d1/d54/namespace_script.html#a1dbce4b634727b78b34e4f40ad1ba884a60f92b942056af24643ab6005de82711">Script::NO_ASSERT</a> ))</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;I wanted to cancel stream %s&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(streamNameChecksum));</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">//          return 0;</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a66d6e7c4f6bfc77db6e4215eb9ec0d61">SetChannelVolume</a>( 0, volume );</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a66d6e7c4f6bfc77db6e4215eb9ec0d61">SetChannelVolume</a>( 1, volume );</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// K: The &#39;false&#39; on the end means do not record the call in the replay, because this</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// call to PlayStreamFromObject has already been recorded.</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> uniqueID = <a class="code" href="../../de/d3e/namespace_pcm.html#ac4c734bb6a7ec61b21831066b6160e64">PlayStream</a>( streamNameChecksum, &amp;vol, pitch, priority, controlID, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> ( uniqueID )</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        Dbg_MsgAssert( ( ( <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> &gt;= 0 ) &amp;&amp; ( <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> &lt; MAX_STREAMS_PER_OBJECT ) ), ( <span class="stringliteral">&quot;Tell Matt to fix object streams&quot;</span> ) );</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> ] )</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <span class="comment">// the object might not have called StreamUpdate yet, so the slot might</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="comment">// still think it&#39;s in use... clear the slot if that&#39;s the case:</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> ]-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0108371dc47ea5f5a0da20e047449b90">mStreamingID</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> ] = 0;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> ] = NULL;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">//      Dbg_MsgAssert( !gpStreamingObj[ gLastStreamChannelPlayed ], ( &quot;Have Matt fix object streams... Kick him in the nutsack while you&#39;re at it.&quot; ) );</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment">//      Dbg_MsgAssert( !pObject-&gt;mStreamingID[ gLastStreamChannelPlayed ], ( &quot;Have Matt fix object streams... Hell, fire matt!!!&quot; ) );</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> ] = pComponent;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        pComponent-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0108371dc47ea5f5a0da20e047449b90">mStreamingID</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> ] = uniqueID;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">// if volume modifier sent in, store that:</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">if</span> ( volume != 100.0f )</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].uniqueID == uniqueID )</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> = PERCENT( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].volume, volume );</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a76898903eb1f9f2cd09121c82e6f7195">dropoff</a> = dropoff;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        }</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="comment">// store state of use_pos_info</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> ( !use_pos_info )</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].uniqueID == uniqueID )</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                {</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a10d34ab3542840908644591495bbacfc">use_pos_info</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].uniqueID == uniqueID )</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a10d34ab3542840908644591495bbacfc">use_pos_info</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a0e6b3c086f0d8729c8cc4c946b87ff8e">dropoffFunction</a> = dropoffFunc;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">return</span> ( uniqueID );</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;}</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160; </div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ac4c734bb6a7ec61b21831066b6160e64">  879</a></span>&#160;<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="../../de/d3e/namespace_pcm.html#ac4c734bb6a7ec61b21831066b6160e64">PlayStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum, <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> *p_volume, <span class="keywordtype">float</span> pitch, <span class="keywordtype">int</span> priority, <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> controlID, <span class="keywordtype">bool</span> record_in_replay )</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;{</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordflow">if</span> (record_in_replay)</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <a class="code" href="../../d9/d29/namespace_replay.html#a6b47d0a120194f57ffb83dac0db88b42">Replay::WritePlayStream</a>( checksum, p_volume, pitch, priority );</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }   </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="comment">// Just use checksum if no controlID is set</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">if</span> (controlID == 0)</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        controlID = checksum;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../de/d3e/namespace_pcm.html#ac77adb07df4cd02d0a83fc32daeb7cac">IDAvailable</a>(controlID))</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;Playing stream %s with same checksum as one already being played, won&#39;t be able to control directly.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(controlID));</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordtype">int</span> whichStream;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="comment">// allow streams to play with default values, if not pre-loaded.</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    whichStream = <a class="code" href="../../de/d3e/namespace_pcm.html#a44a3393eb63498717764bce8c583d8c3">_PlayStream</a>( checksum, p_volume, pitch, priority, controlID, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> ( whichStream != -1 )</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ whichStream ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a76898903eb1f9f2cd09121c82e6f7195">dropoff</a> = DEFAULT_STREAM_DROPOFF;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ whichStream ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> = 100.0f;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">gLastStreamChannelPlayed</a> = whichStream;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ whichStream ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">uniqueID</a>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">//  Dbg_MsgAssert( 0,( &quot;Tried to play track %s not in header.&quot;, Script::FindChecksumName( checksum ) ));</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">return</span> ( 0 );</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#aa1b6cf13c634e14a44c204c508ed2bfb">  919</a></span>&#160;<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> <a class="code" href="../../de/d3e/namespace_pcm.html#aa1b6cf13c634e14a44c204c508ed2bfb">PreLoadStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum, <span class="keywordtype">int</span> priority )</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">// Since this isn&#39;t hooked up to a script, we just supply the checksum</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> controlID = checksum;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordtype">int</span> whichStream;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="comment">// allow streams to play with default values, if not in list.</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> vol;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#aa01bbcd26a45f906d68bd5bb7d86d439">SetSilent</a>();</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    whichStream = <a class="code" href="../../de/d3e/namespace_pcm.html#a44a3393eb63498717764bce8c583d8c3">_PlayStream</a>( checksum, &amp;vol, 0.0, priority, controlID, <span class="keyword">true</span> );</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">if</span> ( whichStream != -1 )</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="preprocessor">#ifdef __PLAT_NGPS__</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;PreLoadStream for stream %s on channel %d&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>( checksum ), whichStream);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">#endif </span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ whichStream ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a76898903eb1f9f2cd09121c82e6f7195">dropoff</a> = DEFAULT_STREAM_DROPOFF;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ whichStream ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> = 100.0f;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ whichStream ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">uniqueID</a>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">//  Dbg_MsgAssert( 0,( &quot;Tried to play track %s not in header.&quot;, Script::FindChecksumName( checksum ) ));</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">return</span> ( 0 );</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;}</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a06b140ff395b985e8a20f605f23f5537">  952</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a06b140ff395b985e8a20f605f23f5537">PreLoadStreamDone</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID )</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;{</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="keywordflow">if</span> ( channel &gt;= 0 )</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">#ifdef __PLAT_NGPS__</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a0bff487b4bf3e624ddae0b0ee2819181">PCMAudio_PreLoadStreamDone</a>( channel ))</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;PreLoadStreamDone for stream %s on channel %d is true&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>( streamID ), channel );</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">#endif </span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0bff487b4bf3e624ddae0b0ee2819181">PCMAudio_PreLoadStreamDone</a>( channel );</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <span class="comment">// Couldn&#39;t find stream</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00979"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a65af4a89e281cd4c1184166a987443b6">  979</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a65af4a89e281cd4c1184166a987443b6">StartPreLoadedStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID, <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> *p_volume, <span class="keywordtype">float</span> pitch )</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;{</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160; </div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="keywordflow">if</span> ( channel &gt;= 0 )</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="preprocessor">#ifdef __PLAT_NGPS__</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;        <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;StartPreLoadStream for stream %s on channel %d&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>( streamID ), channel);</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="preprocessor">#endif </span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">//      return PCMAudio_StartPreLoadedStream( channel, volumeL, volumeR, pitch );</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="preprocessor">#       ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a77bd5c8fd47c96186832ffbf06df7075">PCMAudio_StartPreLoadedStream</a>( channel, p_volume, pitch );</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="preprocessor">#       else</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a77bd5c8fd47c96186832ffbf06df7075">PCMAudio_StartPreLoadedStream</a>( channel, p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 0 ), p_volume-&gt;<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 1 ), pitch );</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="preprocessor">#       endif</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">// Couldn&#39;t find stream</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;}</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a4c710a37eebf8d7874cefe6731fe74e1"> 1008</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a4c710a37eebf8d7874cefe6731fe74e1">PreLoadMusicStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum )</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;{</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::PlayMusicStream &#39;%s&#39;, when PCM Audio not initialized.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ));</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    Dbg_MsgAssert( !<a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a>,( <span class="stringliteral">&quot;Calling Pcm::PlayMusicStream &#39;%s&#39;, when one is already playing.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ));</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="comment">// Stop any previous track</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ab9a37bbf752c43628b80328fecea0625">PCMAudio_StopMusic</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="preprocessor">#if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">gMusicStreamChecksum</a> = checksum;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">gMusicStreamWaitingToStart</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="comment">// allow streams to play with default values, if not in list.</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    success = <a class="code" href="../../de/d3e/namespace_pcm.html#ad4838fc8a49961622c9b0eaef35d0739">_PreLoadMusicStream</a>( checksum );</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="preprocessor">#endif // WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a9f91ec10c6f721e7b097b9a8a3529209">MUSIC_STREAM_TYPE_PRELOAD</a>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> success;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;}</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a658a767b682f347ab28b52a96b76b5e7"> 1038</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a658a767b682f347ab28b52a96b76b5e7">PreLoadMusicStreamDone</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a9f91ec10c6f721e7b097b9a8a3529209">MUSIC_STREAM_TYPE_PRELOAD</a>,( <span class="stringliteral">&quot;Calling Pcm::PreLoadMusicStreamDone while in normal music mode.&quot;</span> ));</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ac2361038e1581be95a88ac2669e792d3">PCMAudio_PreLoadMusicStreamDone</a>( );</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;}</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; </div>
<div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab445361c3e2ae21eb9d577e4ba69ff2f"> 1051</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab445361c3e2ae21eb9d577e4ba69ff2f">StartPreLoadedMusicStream</a>( <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;{</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160; </div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a9f91ec10c6f721e7b097b9a8a3529209">MUSIC_STREAM_TYPE_PRELOAD</a>,( <span class="stringliteral">&quot;Calling Pcm::StartPreLoadedMusicStream while in normal music mode.&quot;</span> ));</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">if</span> ( volume &lt; 0.0f )</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        volume = <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a95df7065d504f24a8d86e7ec7c25132c">_StartPreLoadedMusicStream</a>( volume );</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;}</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#affff458eef99ae37be1a29ec137589d7"> 1070</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#affff458eef99ae37be1a29ec137589d7">SetStreamVolume</a>( <span class="keywordtype">int</span> objStreamIndex )</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;{</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>() ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html">Obj::CStreamComponent</a> *pComp;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    pComp = <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ objStreamIndex ];</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html">CurrentStreamInfo</a> *pInfo = NULL;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].uniqueID == pComp-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0108371dc47ea5f5a0da20e047449b90">mStreamingID</a>[ objStreamIndex ] )</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ objStreamIndex ].voice ) == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            }   </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            pInfo = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ];</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <span class="comment">// Update volume from dropoff/pan for the object responsible for streaming.</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;            <a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a> vol;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            <a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html">Sfx::CSfxManager</a> * sfx_manager = Sfx::CSfxManager::Instance();</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">if</span> ( pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a10d34ab3542840908644591495bbacfc">use_pos_info</a> )</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            {</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                <a class="code" href="../../dd/daa/class_gfx_1_1_camera.html">Gfx::Camera</a> *pCamera = <a class="code" href="../../d0/d19/class_nx_1_1_c_viewport_manager.html#ad68f4757ec292366e6063031ad913e5b">Nx::CViewportManager::sGetClosestCamera</a>( pComp-&gt;<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a75150b149fb2f45075cdebc2422afaff">m_pos</a> );</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                <span class="keywordflow">if</span> (pCamera)</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                {</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> dropoff_pos;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> *p_dropoff_pos = NULL;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                    <span class="keywordflow">if</span> (pComp-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0feaf96a33b38a299c8a6b53b4c0664a">GetClosestDropoffPos</a>(pCamera, dropoff_pos))</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                    {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                        p_dropoff_pos = &amp;dropoff_pos;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                    }</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                    sfx_manager-&gt;<a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#ac28a63a77574abed01989635f67c6c72">SetVolumeFromPos</a>( &amp;vol, pComp-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0718afc882999e7f28085e229d2e61a9">GetClosestEmitterPos</a>(pCamera), pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a76898903eb1f9f2cd09121c82e6f7195">dropoff</a>, pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a0e6b3c086f0d8729c8cc4c946b87ff8e">dropoffFunction</a>, pCamera, p_dropoff_pos );</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                    vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#aa01bbcd26a45f906d68bd5bb7d86d439">SetSilent</a>();</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;            }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a66d6e7c4f6bfc77db6e4215eb9ec0d61">SetChannelVolume</a>( 0, pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> );</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a66d6e7c4f6bfc77db6e4215eb9ec0d61">SetChannelVolume</a>( 1, pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> );</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;            }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;            <span class="keywordflow">if</span>( pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> != 100.0f )</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;            {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a72a97301fb0362b51cd652d263fc93b8">PercentageAdjustment</a>( pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">volume</a> );</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            }</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="preprocessor">#           ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;            <span class="comment">// We need the sign-correct version for Xbox to calculate proper 5.1 values.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#adc8c3064bf3813334bbf1896e7f3dffa">PCMAudio_SetStreamVolume</a>( &amp;vol, pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ac6963cacf147db71ad4d6ff414d3dd40">voice</a> );</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="preprocessor">#           else</span></div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#adc8c3064bf3813334bbf1896e7f3dffa">PCMAudio_SetStreamVolume</a>( vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 0 ), vol.<a class="code" href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">GetChannelVolume</a>( 1 ), pInfo-&gt;<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ac6963cacf147db71ad4d6ff414d3dd40">voice</a> );</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">#           endif</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;            <span class="keywordflow">return</span> ( <span class="keyword">true</span> );</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    }</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;}</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab540a2f650e1fd7e2063678e5ada0f32"> 1137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab540a2f650e1fd7e2063678e5ada0f32">Init</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;{</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="comment">// Zero these out at startup.</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> s = 0; s &lt; NUM_STREAMS; ++s )</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[s] = NULL;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    }</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>() &amp;&amp; <a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ac4136ac5cb7d5b83c62ddea64df09788">PCMAudio_Init</a>( );</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> = (float)<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>( 0xabd4a575 ); <span class="comment">// checksum &#39;MusicVolume&#39;</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> )</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> = DEFAULT_MUSIC_VOLUME;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    }</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment">//  SetVolume( gMusicVolume );</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> = (float)<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0x73f8e03b,<span class="stringliteral">&quot;MusicStreamVolume&quot;</span>));</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> )</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> = DEFAULT_MUSIC_STREAM_VOLUME;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>; i++ )</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ i ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> = 0;</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ i ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> = 0;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ i ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> = 0;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ i ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> = 0;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ i ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> = 0;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="comment">// no tracks, so all tracks forbidden, right?</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ i ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    }</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ i ] = NULL;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa889c01b8973d0a0005570d914099bbe">controlID</a> = 0;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[ i ].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">uniqueID</a> = 0;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    }</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;} <span class="comment">// end of Init( )</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">// Should be renamed to StopUsingCD( ) as if the cd is in use</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">// by streams, this function stops the streams and frees up the</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">// CD.</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a0ad0a6eb6cdafd27f2bf0565c3f5c9d3"> 1184</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0ad0a6eb6cdafd27f2bf0565c3f5c9d3">UsingCD</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;{</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="preprocessor">    #if defined( __PLAT_NGC__ )</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> ( !( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a> ) )</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    }</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( );</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">StopStreams</a>( );</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d0/d31/namespace_config.html#a417f0cda0d89952b0a8d74e3ad505781">Config::CD</a>() || TEST_FROM_CD)</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;        <span class="keywordflow">if</span> ( !( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a> ) )</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;        {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <span class="comment">//      Dbg_Message( &quot;uninitialized&quot; );</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;        }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( );</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">StopStreams</a>( );</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    }   </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;} <span class="comment">// end of UsingCD( )</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">// plays a music track.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063"> 1213</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">bool</span> loop )</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;{</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160; </div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a>)</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Trying to play a music track in stereo stream mode.&quot;</span>));</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::PlayTrack &#39;%s&#39;, when PCM Audio not initialized.&quot;</span>, filename ));</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    Dbg_MsgAssert( strlen( filename ) &lt; MAX_TRACKNAME_STRING_LENGTH,( <span class="stringliteral">&quot;CD Audio Filename too long.&quot;</span> ));</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    strcpy( <a class="code" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">gTrackName</a>, filename );</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    <span class="keywordtype">int</span> trackList = <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordtype">float</span> volume;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="keywordflow">if</span> ( trackList == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> )</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        volume = <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    {</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html">Sfx::CSfxManager</a> * sfx_manager = Sfx::CSfxManager::Instance();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        volume = sfx_manager-&gt;<a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#a9620548fa1b9bcfb7f713e4ecdbe7d56">GetMainVolume</a>( );</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">if</span> ( skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>( )-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>( ) )</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;        trackList = <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        volume = <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ae03b04f2b2d5a0bd57ca3853aea093a6">SetLoopingMode</a>(loop);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    </div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="../../de/d3e/namespace_pcm.html#a2db977e9bc1ec7c3561fbb493a65abbf">_PlayMusicTrack</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">gTrackName</a>, volume ) )</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    {</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d31/namespace_config.html#a417f0cda0d89952b0a8d74e3ad505781">Config::CD</a>() || TEST_FROM_CD)</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        {</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>( <span class="stringliteral">&quot;Failed playing track %s&quot;</span>, filename );</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;        }   </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;        {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <span class="comment">// see if this is a track in the current playlists...</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="comment">// if so, don&#39;t keep trying to play it...</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ trackList ];</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <span class="keywordflow">for</span> ( i = 0; i &lt; pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>; i++ )</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            {</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a>( filename ) == <a class="code" href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a>( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ i ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a> ) )</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a0f6ae742c27333623047547a3b601a18">SetTrackForbiddenStatus</a>( i, <span class="keyword">true</span>, trackList );</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            }</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        }   </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    }</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;}</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">// Plays a stereo stream through the music channels</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ac2ccbfb99f608446cdec3a988c6e27cd"> 1273</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ac2ccbfb99f608446cdec3a988c6e27cd">PlayMusicStream</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum, <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;{</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::PlayMusicStream &#39;%s&#39;, when PCM Audio not initialized.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ));</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    Dbg_MsgAssert( !<a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a>,( <span class="stringliteral">&quot;Calling Pcm::PlayMusicStream &#39;%s&#39;, when one is already playing.&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(checksum) ));</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="comment">// Stop any previous track</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ab9a37bbf752c43628b80328fecea0625">PCMAudio_StopMusic</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">if</span> ( volume &lt; 0.0f )</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    {</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        volume = <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="preprocessor">#if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">gMusicStreamChecksum</a> = checksum;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> = volume;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">gMusicStreamWaitingToStart</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a2271340d84cc221441afae2949b10254">_PlayMusicStream</a>( checksum, volume );</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225abb27329eb68d24e557696764ec03b0d5">MUSIC_STREAM_TYPE_NORMAL</a>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;}</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4"> 1299</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">sMusicIsPaused</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ad5082cda5b5b210b9569ddaca07148a8"> 1300</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ad5082cda5b5b210b9569ddaca07148a8">PauseMusic</a>( <span class="keywordtype">int</span> pause )</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;{</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> wasPaused = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::Pause when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <span class="keywordflow">switch</span> ( pause )</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">case</span> ( -1 ):</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            <span class="comment">// special case... unpause only if it was unpaused last time pause was called...</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;            <span class="keywordflow">if</span> ( !wasPaused )</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                <span class="comment">// recursive... unpause this bitch...</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#ad5082cda5b5b210b9569ddaca07148a8">PauseMusic</a>( 0 );</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="keywordflow">case</span> ( 1 ):</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            wasPaused = <a class="code" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">sMusicIsPaused</a>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">sMusicIsPaused</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a18a60bdc2fe052b37ad788a0114ba2d8">PCMAudio_Pause</a>( <span class="keyword">true</span>, <a class="code" href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca5fe52ed2a52767ac51d9064ab8ee04e4">MUSIC_CHANNEL</a> );</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        <span class="keywordflow">case</span> ( 0 ):</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">sMusicIsPaused</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a18a60bdc2fe052b37ad788a0114ba2d8">PCMAudio_Pause</a>( <span class="keyword">false</span>, <a class="code" href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca5fe52ed2a52767ac51d9064ab8ee04e4">MUSIC_CHANNEL</a> );</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            Dbg_MsgAssert( 0, ( <span class="stringliteral">&quot;Unknown pause state %d&quot;</span>, pause ) );</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    }</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#af316eb0b1ea1e1919b36dd2404e2ac21"> 1335</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#af316eb0b1ea1e1919b36dd2404e2ac21">MusicIsPaused</a>()</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;{</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">sMusicIsPaused</a>;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;}</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    </div>
<div class="line"><a name="l01340"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab66d43c8f3ac77f6a3138d7b18567663"> 1340</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab66d43c8f3ac77f6a3138d7b18567663">PauseStream</a>( <span class="keywordtype">int</span> pause )</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;{</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> paused = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> wasPaused = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::Pause when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;    <span class="keywordflow">switch</span> ( pause )</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">case</span> ( -1 ):</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            <span class="comment">// special case... unpause only if it was unpaused last time pause was called...</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">if</span> ( !wasPaused )</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="comment">// recursive... unpause this bitch...</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#ab66d43c8f3ac77f6a3138d7b18567663">PauseStream</a>( 0 );</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;            }</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        <span class="keywordflow">case</span> ( 1 ):</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            wasPaused = paused;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            paused = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a18a60bdc2fe052b37ad788a0114ba2d8">PCMAudio_Pause</a>( <span class="keyword">true</span>, <a class="code" href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca63a41a51d979f2a2d3690d8af718ffb7">EXTRA_CHANNEL</a> );</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordflow">case</span> ( 0 ):</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;            paused = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a18a60bdc2fe052b37ad788a0114ba2d8">PCMAudio_Pause</a>( <span class="keyword">false</span>, <a class="code" href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca63a41a51d979f2a2d3690d8af718ffb7">EXTRA_CHANNEL</a> );</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;            Dbg_MsgAssert( 0, ( <span class="stringliteral">&quot;Unknown pause state %d&quot;</span>, pause ) );</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    }</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;}</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160; </div>
<div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a0c632a24e783c4d6c5cf6962453fb1cd"> 1376</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0c632a24e783c4d6c5cf6962453fb1cd">SetVolume</a>( <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;{</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    </div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::SetVolume, when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">if</span> ( ( volume &gt; 100.0f ) || ( volume &lt; 0.0f ) )</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;        Dbg_MsgAssert( 0,( <span class="stringliteral">&quot;Volume (%f) not between 0 and 100&quot;</span>, volume ));</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> = volume;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a> )</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    {</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordflow">if</span> ( ( <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">MUSIC_STREAM_TYPE_NONE</a>) &amp;&amp;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;             ( ( <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> ) ||</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;             ( skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>( )-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>( ) ) ) )</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        {</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;<span class="comment">//          volume = volume * Config::GetMasterVolume()/100.0f;</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="comment">//          if (volume &lt;0.1f)</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;<span class="comment">//          {</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;<span class="comment">//              volume = 0.0f;</span></div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="comment">//          }</span></div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( volume );</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    }</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;}</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a5c8509c70daa76c24db230f9fd080d8d"> 1407</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a5c8509c70daa76c24db230f9fd080d8d">GetVolume</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;{</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    </div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> );</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;}</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#adeac7464332d724b50072dbd1e490b4f"> 1413</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#adeac7464332d724b50072dbd1e490b4f">SetMusicStreamVolume</a>( <span class="keywordtype">float</span> volume )</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;{</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;    </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::SetVolume, when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">if</span> ( ( volume &gt; 100.0f ) || ( volume &lt; 0.0f ) )</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;    {</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        Dbg_MsgAssert( 0,( <span class="stringliteral">&quot;Volume (%f) not between 0 and 100&quot;</span>, volume ));</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    }</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    </div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> = volume;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a> )</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225abb27329eb68d24e557696764ec03b0d5">MUSIC_STREAM_TYPE_NORMAL</a>)</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        {</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( volume );</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;}</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a8332c54f11921082c33e4913c0a66e48"> 1434</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a8332c54f11921082c33e4913c0a66e48">GetMusicStreamVolume</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;{</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a>;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a407d787f47ba35f9f6ee73609b3946ea"> 1439</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a407d787f47ba35f9f6ee73609b3946ea">AddTrackToPlaylist</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *trackName, <span class="keywordtype">int</span> whichList, <span class="keyword">const</span> <span class="keywordtype">char</span> *trackTitle )</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;{</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    Dbg_MsgAssert( trackName,( <span class="stringliteral">&quot;What the fuck?&quot;</span> ));</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbass.&quot;</span> ));</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ];</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    <span class="comment">// Ken: This is a fix to TT6484. When an ambient track finished, it was choosing</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="comment">// a new random ambient track, rather than playing the same one again.</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// So to fix, just force numTracks to zero if adding an ambient track, so that there</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <span class="comment">// can be only one. That way, it will be forced to play the same one again. Nya ha!</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">if</span> (whichList==<a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a>)</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    {</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>=0;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;    }</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <span class="keywordflow">if</span> ( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> &gt;= MAX_NUM_TRACKS )</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        Dbg_MsgAssert( 0,( <span class="stringliteral">&quot;Too many tracks in playlist (increase MAX_NUM_TRACKS or clear list).&quot;</span> ));</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    }</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    Dbg_MsgAssert( strlen( trackName ) &lt; MAX_TRACKNAME_STRING_LENGTH,( <span class="stringliteral">&quot;Track name too long.&quot;</span> ));</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <span class="keywordtype">char</span> *pTrackName = pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a>;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;    strcpy( pTrackName, trackName );</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <a class="code" href="../../d8/de2/_defines_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> i;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; strlen( pTrackName ); i++ )</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;    {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">if</span> ( ( pTrackName[ i ] &gt;= <span class="charliteral">&#39;a&#39;</span> ) &amp;&amp; ( pTrackName[ i ] &lt;= <span class="charliteral">&#39;z&#39;</span> ) )</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;        {</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            pTrackName[ i ] = pTrackName[ i ] - <span class="charliteral">&#39;a&#39;</span> + <span class="charliteral">&#39;A&#39;</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;    }</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;    <span class="comment">// Music tracks should have a title (for the user to be able to turn songs on/off):</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <span class="keywordflow">if</span> ( whichList == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> )</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;    {</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;        <span class="keywordtype">char</span> *pTrackTitle = <a class="code" href="../../de/d3e/namespace_pcm.html#aedada8c569c3338fe9f6fd2ca93c2635">PermTrackTitle</a>[ pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> ].<a class="code" href="../../db/df5/struct_pcm_1_1_track_title.html#a59ee86f530d7a44ced5cf4b55e57f7a6">trackTitle</a>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;        <span class="keywordflow">if</span> ( trackTitle )</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;        {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;            Dbg_MsgAssert( strlen( trackTitle ) &lt; TRACK_TITLE_MAX_SIZE, ( <span class="stringliteral">&quot;Track title %s too long (max %d chars)&quot;</span>, trackTitle, TRACK_TITLE_MAX_SIZE ) );</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            strncpy( pTrackTitle, trackTitle, TRACK_TITLE_MAX_SIZE );</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            pTrackTitle[ TRACK_TITLE_MAX_SIZE - 1 ] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;        }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            Dbg_MsgAssert( 0, ( <span class="stringliteral">&quot;Track %s not given a title.&quot;</span>, trackName ) );</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;            strcpy( pTrackTitle, <span class="stringliteral">&quot;No title provided&quot;</span> );</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        }</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    }</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    <span class="keywordflow">if</span> ( !<a class="code" href="../../de/d3e/namespace_pcm.html#ac732ac0967f743ea1c5ace8113322429">PCMAudio_TrackExists</a>( pTrackName, <a class="code" href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca5fe52ed2a52767ac51d9064ab8ee04e4">MUSIC_CHANNEL</a> ) )</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    {</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;        Dbg_MsgAssert(!<a class="code" href="../../d0/d31/namespace_config.html#a417f0cda0d89952b0a8d74e3ad505781">Config::CD</a>(),(<span class="stringliteral">&quot;Could not find music track &#39;%s&#39;\n&quot;</span>,pTrackName));</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;        <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;Could not find music track &#39;%s&#39;&quot;</span>,pTrackName);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    }   </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>++;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;}</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a3b6b1c369e6cd0c1fd6f7b72ee2937b3"> 1501</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a3b6b1c369e6cd0c1fd6f7b72ee2937b3">ClearPlaylist</a>( <span class="keywordtype">int</span> whichList )</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;{</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    </div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbshit.&quot;</span> ));</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ];</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> = 0;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> = <span class="keyword">true</span>; <span class="comment">// if there are no tracks, all are forbidden, no?</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> = 0;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> = 0;</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> = 0;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> = 0;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    </div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#afd31dedba5f3740e9522708f673676f6">gNumStreams</a> = 0;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a60ad32e5e7e7d22706038f21a95011ac"> 1518</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a60ad32e5e7e7d22706038f21a95011ac">SkipMusicTrack</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;{</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <span class="keywordflow">if</span> ( skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>( )-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>( ) )</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    }</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> )</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="comment">// will stop the current song, auto update will</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="comment">// cause music to continue with the next track...</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( );</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    }</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;}</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ae985279ab7d217c22c62a838a9984f7d"> 1537</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ae985279ab7d217c22c62a838a9984f7d">SetRandomMode</a>( <span class="keywordtype">int</span> randomModeOn )</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;{</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a8d17f6d287601e135a21a1868d7cbe9e">gMusicInRandomMode</a> = randomModeOn;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160; </div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<span class="preprocessor">#   ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a6cfb7d70a6d8a9c0381060ef3db68e03">s_xbox_user_soundtrack_random</a> = ( randomModeOn &gt; 0 );</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    <span class="keywordflow">if</span>( randomModeOn )</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    {</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        <span class="comment">// Generate a new random order now, since the current one may be invalid for this soundtrack.</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a01c3edefbbc2c808b0dc621cd299f2e6">sGenerateRandomSongOrder</a>();</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">s_xbox_random_index</a> = 0;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">s_xbox_user_soundtrack_song</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">sp_xbox_randomized_songs</a>[0];</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    }</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="preprocessor">#   endif // __PLAT_XBOX__</span></div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    Dbg_MsgAssert(<a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a>&gt;=0 &amp;&amp; <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a>&lt;<a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,(<span class="stringliteral">&quot;Bad gCurrentTrackList&quot;</span>));</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> ];</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a>=0;</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a>=0;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;}</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160; </div>
<div class="line"><a name="l01560"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a58274b76aa23345bc9ace7b90bde54cf"> 1560</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a58274b76aa23345bc9ace7b90bde54cf">GetRandomMode</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;{</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a8d17f6d287601e135a21a1868d7cbe9e">gMusicInRandomMode</a> );</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;}</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160; </div>
<div class="line"><a name="l01565"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ae03b04f2b2d5a0bd57ca3853aea093a6"> 1565</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ae03b04f2b2d5a0bd57ca3853aea093a6">SetLoopingMode</a>( <span class="keywordtype">bool</span> loop )</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;{</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#aa2312772fae6880b4e1dcf4cf379ad4b">gMusicLooping</a> = loop;</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;}</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="preprocessor">#if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a2000cbdb9ec2431e2579a04d1cc78a3e"> 1571</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a2000cbdb9ec2431e2579a04d1cc78a3e">_StartMusicStream</a>()</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;{</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a>)</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225abb27329eb68d24e557696764ec03b0d5">MUSIC_STREAM_TYPE_NORMAL</a>:</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a2271340d84cc221441afae2949b10254">_PlayMusicStream</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">gMusicStreamChecksum</a>, <a class="code" href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">gMusicStreamVolume</a> );</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; </div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a9f91ec10c6f721e7b097b9a8a3529209">MUSIC_STREAM_TYPE_PRELOAD</a>:</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ad4838fc8a49961622c9b0eaef35d0739">_PreLoadMusicStream</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">gMusicStreamChecksum</a> );</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">MUSIC_STREAM_TYPE_NONE</a>:</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Bad start music stream state&quot;</span>));</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    <span class="comment">// No longer waiting</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">gMusicStreamWaitingToStart</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;}</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">#endif // WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160; </div>
<div class="line"><a name="l01593"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a537375d8334ed547fb8acc5c7b3288cf"> 1593</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a537375d8334ed547fb8acc5c7b3288cf">sSetCorrectMusicVolume</a>()</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;{</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="preprocessor">    #ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a>)</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        <span class="comment">// This &#39;if&#39; is part of the fix to TT6957, where user soundtracks were getting sfx vol</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;        <span class="comment">// when music vol turned down to zero.</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#a5c8509c70daa76c24db230f9fd080d8d">Pcm::GetVolume</a>() );</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a>)</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;        <a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html">Sfx::CSfxManager</a> * sfx_manager =  Sfx::CSfxManager::Instance();</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( sfx_manager-&gt;<a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#a9620548fa1b9bcfb7f713e4ecdbe7d56">GetMainVolume</a>() );</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// Ken: I added this as a fix to TT5588, &#39;ambient tracks don&#39;t play when music vol is set to zero&#39;</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="comment">// This forces the ambient track to use the sfx volume rather than gMusicVolume.</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="comment">// Hopefully there is not too much of an overhead to calling PCMAudio_SetMusicVolume ...</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="comment">// This bit of code won&#39;t be executed every frame though, but every SONG_UPDATE_INTERVAL frames,</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="comment">// so I think it&#39;ll be OK ...</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a>)</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;        <a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html">Sfx::CSfxManager</a> * sfx_manager =  Sfx::CSfxManager::Instance();</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        <span class="comment">//printf(&quot;Playing ambient track: Forcing volume to %f ...\n&quot;,sfx_manager-&gt;GetMainVolume());</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( sfx_manager-&gt;<a class="code" href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#a9620548fa1b9bcfb7f713e4ecdbe7d56">GetMainVolume</a>() );</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;}</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ada3ae27d8633a2dbdc1d89da282e7841"> 1622</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ada3ae27d8633a2dbdc1d89da282e7841">RandomTrackUpdate</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;{</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    </div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> ];</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">if</span> ( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> )</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    {</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">//      Dbg_Message( &quot;all tracks forbidden.. random mode&quot; );</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    }</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="keywordtype">int</span> pcmStatus = <a class="code" href="../../de/d3e/namespace_pcm.html#ae11c6f947d002653d646ed6be25fe683">PCMAudio_GetMusicStatus</a>( );</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> ( pcmStatus == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="preprocessor">    #if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;        <span class="comment">// If we were waiting for StopMusic() to finish, we need to start the music stream</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">gMusicStreamWaitingToStart</a>)</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;        {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a2000cbdb9ec2431e2579a04d1cc78a3e">_StartMusicStream</a>();</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">    #endif // WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">MUSIC_STREAM_TYPE_NONE</a>;      <span class="comment">// Just in case we were playing a music stream</span></div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a537375d8334ed547fb8acc5c7b3288cf">sSetCorrectMusicVolume</a>();</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;        <span class="comment">// Replay track if looping</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#aa2312772fae6880b4e1dcf4cf379ad4b">gMusicLooping</a>)</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        {</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">gTrackName</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;        }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        <span class="keywordflow">if</span> ( !pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> )</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;        {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            Dbg_MsgAssert( 0,( <span class="stringliteral">&quot;AllTracksForbidden flag should be set if no tracks exist.&quot;</span> ));</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;        }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">shuffle_random_songs</a> )</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;        {</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            <span class="comment">// Remember the last song in the previous order, so we can make sure that</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            <span class="comment">// the first song in the new order is different from it.</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            <span class="comment">// Note: OK if the last song was just an uninitialised random value, won&#39;t cause any problems.</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            <span class="keywordtype">int</span> last_song=<a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>-1];</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="comment">// count active tracks</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>=0;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>; ++i)</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                <span class="keywordflow">if</span> ( i &lt; 64)</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;                {</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                    <span class="keywordflow">if</span> ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; i ) ) )</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;                    {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                        <span class="comment">// Intialize order</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;                        <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>]=i;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;                        <span class="comment">// add one</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                        <a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>++;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                    }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                }</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                    <span class="keywordflow">if</span> ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (i-64) ) ) )</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                    {</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                        <span class="comment">// Intialize order</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                        <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>]=i;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                        <span class="comment">// add one</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                        <a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>++;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                    }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                }</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            }</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            <span class="comment">// need to shuffle order</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            <a class="code" href="../../df/d92/standard_8cpp.html#a5fc8fd1788f18ada61dfda9f171c5a1a">printf</a>(<span class="stringliteral">&quot;shuffling random song order num_songs=%i\n&quot;</span>, <a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a> );</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;            <span class="comment">// Jumble it up.        </span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n=0; n&lt;2000; ++n)</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                <span class="keywordtype">int</span> a=<a class="code" href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                <span class="keywordtype">int</span> b=<a class="code" href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                </div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                <span class="keywordflow">if</span> ( a != b )</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                    <span class="keywordtype">int</span> temp=<a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[a];</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[a]=<a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[b];</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                    <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[b]=temp;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="comment">// If the first song in the new order equals the last song of the last order,</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <span class="comment">// do one further swap to make sure it is different.</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[0]==last_song)</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            {</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                <span class="comment">// a is the first song.</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                <span class="keywordtype">int</span> a=0;</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                <span class="comment">// Choose b to be a random one of the other songs.</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                <span class="keywordtype">int</span> b;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>&gt;1)</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                    <span class="comment">// Make b not able to equal 0, so that we don&#39;t swap the first with itself.</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                    b=1+<a class="code" href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>-1);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                }</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                {</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                    <span class="comment">// Unless there is only one song, in which case just swap it with itself. No point but what the heck.</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                    b=0;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                }</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                <span class="comment">// Do the swap.</span></div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                <span class="keywordtype">int</span> temp=<a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[a];</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[a]=<a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[b];</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[b]=temp;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            }</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="comment">// reset index</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">random_song_index</a>=0;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">shuffle_random_songs</a>=<span class="keyword">false</span>;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> = 0;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;            pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> = 0;</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        }</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        {</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">random_song_index</a>++;</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;            <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">random_song_index</a> &gt;= (<a class="code" href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">num_random_songs</a>-1) )</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;            {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">shuffle_random_songs</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;            }</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        }</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        </div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>; i++ )</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        {</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;            <span class="keywordtype">int</span> t = ( <a class="code" href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">sp_random_song_order</a>[<a class="code" href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">random_song_index</a>] );</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;            <span class="comment">//printf(&quot;index = %i song = %i\n&quot;, random_song_index, sp_random_song_order[random_song_index] );</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;            <span class="keywordflow">if</span> ( ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; t ) ) &amp;&amp; ( t &lt; 64 ) &amp;&amp; </div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                   !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; t ) ) ) )</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            {</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> |= ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; t );</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ t ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a> );</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>=t;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>( <span class="stringliteral">&quot;Playing track %s %i %i&quot;</span>, pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ t ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a>, t, <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a> );</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; </div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;                <span class="comment">// update track text on screen</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *pParams = <span class="keyword">new</span> <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;                pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">AddInteger</a>(CRCD(0x8d02705d,<span class="stringliteral">&quot;current_track&quot;</span>),<a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                <a class="code" href="../../d1/d54/namespace_script.html#af49b12363c52ae6f00363d582c3bdc7e">Script::RunScript</a>( <span class="stringliteral">&quot;spawn_update_music_track_text&quot;</span>, pParams );</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                <span class="keyword">delete</span> pParams;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;            }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            <span class="keywordflow">if</span> ( ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (t-64) ) ) &amp;&amp; ( t &gt;= 64 ) &amp;&amp; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                   !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (t-64) ) ) )</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;               )</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;            {</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> |= ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (t-64) );</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ t ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a> );</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>=t;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>( <span class="stringliteral">&quot;Playing track %s %i %i&quot;</span>, pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ t ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a>, t, <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a> );</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                <span class="comment">// update track text on screen</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *pParams = <span class="keyword">new</span> <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">AddInteger</a>(CRCD(0x8d02705d,<span class="stringliteral">&quot;current_track&quot;</span>),<a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                <a class="code" href="../../d1/d54/namespace_script.html#af49b12363c52ae6f00363d582c3bdc7e">Script::RunScript</a>( <span class="stringliteral">&quot;spawn_update_music_track_text&quot;</span>, pParams );</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                <span class="keyword">delete</span> pParams;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            }</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;}</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; </div>
<div class="line"><a name="l01797"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a07be80e6a4854bbe228f60bc3f20f66c"> 1797</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a07be80e6a4854bbe228f60bc3f20f66c">TrackUpdate</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;{</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    </div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordtype">int</span> trackList = <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    </div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">if</span> ( skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>( )-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>( ) )</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        trackList = <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a>;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    }</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ trackList ];</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordflow">if</span> ( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> )</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    {</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">//      Dbg_Message( &quot;all tracks forbidden.. sequential mode&quot; );</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    }</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordtype">int</span> pcmStatus = <a class="code" href="../../de/d3e/namespace_pcm.html#ae11c6f947d002653d646ed6be25fe683">PCMAudio_GetMusicStatus</a>( );</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">if</span> ( pcmStatus == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    {</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;<span class="preprocessor">    #if WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        <span class="comment">// If we were waiting for StopMusic() to finish, we need to start the music stream</span></div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">gMusicStreamWaitingToStart</a>)</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;        {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a2000cbdb9ec2431e2579a04d1cc78a3e">_StartMusicStream</a>();</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;        }</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="preprocessor">    #endif // WAIT_AFTER_STOP_STREAM</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">gMusicStreamType</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">MUSIC_STREAM_TYPE_NONE</a>;      <span class="comment">// Just in case we were playing a music stream</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a537375d8334ed547fb8acc5c7b3288cf">sSetCorrectMusicVolume</a>();</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="comment">// Replay track if looping</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#aa2312772fae6880b4e1dcf4cf379ad4b">gMusicLooping</a>)</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;        {</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">gTrackName</a>, <span class="keyword">true</span> );</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;        }</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160; </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        <span class="comment">// don&#39;t have a random function.  just play next track...</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="keywordflow">for</span> ( i = 0; i &lt; pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>; i++ )</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            <span class="keywordflow">if</span> ( ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; i ) ) &amp;&amp; ( i &lt; 64 ) &amp;&amp; </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                   !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; i ) ) ) )</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;            {</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> |= ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; i );</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ i ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a> );</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>=i;</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>( <span class="stringliteral">&quot;Playing track %s %i %i&quot;</span>, pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ i ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a>, i, <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a> );</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160; </div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                <span class="comment">// update track text on screen</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;                <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *pParams = <span class="keyword">new</span> <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>;</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;                pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">AddInteger</a>(CRCD(0x8d02705d,<span class="stringliteral">&quot;current_track&quot;</span>),<a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                <a class="code" href="../../d1/d54/namespace_script.html#af49b12363c52ae6f00363d582c3bdc7e">Script::RunScript</a>( <span class="stringliteral">&quot;spawn_update_music_track_text&quot;</span>, pParams );</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="keyword">delete</span> pParams;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160; </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            }</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="keywordflow">if</span> ( ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (i-64) ) ) &amp;&amp; ( i &gt;= 64 ) &amp;&amp; </div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                   !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (i-64) ) ) ) )</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            {</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> |= ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (i-64) );</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">PlayTrack</a>( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ i ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a> );</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>=i;</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>( <span class="stringliteral">&quot;Playing track %s %i %i&quot;</span>, pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ i ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a>, i, <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a> );</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160; </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                <span class="comment">// update track text on screen</span></div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *pParams = <span class="keyword">new</span> <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">AddInteger</a>(CRCD(0x8d02705d,<span class="stringliteral">&quot;current_track&quot;</span>),<a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                <a class="code" href="../../d1/d54/namespace_script.html#af49b12363c52ae6f00363d582c3bdc7e">Script::RunScript</a>( <span class="stringliteral">&quot;spawn_update_music_track_text&quot;</span>, pParams );</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                <span class="keyword">delete</span> pParams;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        }</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        <span class="comment">// all the tracks have been played... reset:</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">trackPlayed0</a> = 0;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">trackPlayed1</a> = 0;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;}</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">//powers of 2 please...</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="preprocessor">#define SONG_UPDATE_INTERVAL                    64</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="preprocessor">#define STREAM_POSITIONAL_UPDATE_INTERVAL       4</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160; </div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">// Call this function every frame...</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">// keeps tracks playing during levels and shit like that...</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#af405ca6aedfbd64805e40505bd0004ab"> 1890</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#af405ca6aedfbd64805e40505bd0004ab">Update</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;{</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    </div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="comment">//static int streamingObjToUpdate = 0;</span></div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>() &amp;&amp; <a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm::Update when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="keywordtype">int</span> err_no = <a class="code" href="../../de/d3e/namespace_pcm.html#a8488310aee3f720c9b123abd9c270402">PCMAudio_Update</a>( );</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="keywordflow">if</span> ( err_no != 0 )</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    {</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <span class="keywordflow">if</span> (err_no &lt; 0)</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">StopStreams</a>( );</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( );</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            <span class="comment">// Even though we are returning the stream number, lets just kill them all because we are at the end of the project</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">StopStreams</a>( );</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;        }</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    }</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="comment">// Garrett: This should go away, since the IOP communication is async now.  But I left it in for</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="comment">// the music now since I don&#39;t know if there is a CPU hit there.</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#abd67c718890698fd00cab9dba2884c8b">sCounter</a>++;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160; </div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="comment">//if ( !( sCounter &amp; ( STREAM_POSITIONAL_UPDATE_INTERVAL - 1 ) ) )</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> streamingObjToUpdate = 0; streamingObjToUpdate &lt; NUM_STREAMS; streamingObjToUpdate++)</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ streamingObjToUpdate ] )</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        {</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;            <span class="keywordflow">if</span> ( !<a class="code" href="../../de/d3e/namespace_pcm.html#affff458eef99ae37be1a29ec137589d7">SetStreamVolume</a>( streamingObjToUpdate ) )</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;            {</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ streamingObjToUpdate ]-&gt;<a class="code" href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0108371dc47ea5f5a0da20e047449b90">mStreamingID</a>[ streamingObjToUpdate ] = 0;</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                <a class="code" href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">gpStreamingObj</a>[ streamingObjToUpdate ] = NULL;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        }</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <span class="comment">//streamingObjToUpdate++;</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="comment">//if ( streamingObjToUpdate &gt;= NUM_STREAMS )</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        <span class="comment">//{</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;        <span class="comment">//  streamingObjToUpdate = 0;</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        <span class="comment">//}</span></div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    }</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160; </div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="comment">// Free any frame amp data that was used by a stream that already stopped</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; NUM_STREAMS; i++)</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    {</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].p_frame_amp &amp;&amp; (<a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].voice) == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a>))</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;        {</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;Clearing StreamFrameAmp %s&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].controlID));</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;            <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a3bcd9ff025b0e98ebf8f45b089ea86ff">CStreamFrameAmpManager::sFreeFrameAmp</a>(<a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].p_frame_amp);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">gCurrentStreamInfo</a>[i].<a class="code" href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a4c4fc4abbd51ae3e4ad682b358eade4f">p_frame_amp</a> = NULL;</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;        }</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#abd67c718890698fd00cab9dba2884c8b">sCounter</a> &amp; ( SONG_UPDATE_INTERVAL - 1 ) )</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="comment">// if volume is turned all the way down, the current song will finish</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="comment">// playing and then we&#39;ll keep returning here until volume isn&#39;t zero,</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    <span class="comment">// as soon as it is turned up a new song will begin playing.</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> == 0.0f &amp;&amp; <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> != <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a>) </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    {</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    }</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160; </div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="preprocessor">    #ifdef __PLAT_XBOX__</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="comment">// This is part of the fix to TT6957, </span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="comment">// where user soundtracks were getting sfx vol when music vol turned down to zero.</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    <span class="comment">// (The other part of the fix is a bit further down, search for TT6957)</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">gMusicVolume</a> == 0.0f &amp;&amp; <a class="code" href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">s_xbox_play_user_soundtracks</a>) </div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    }</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">sMusicIsPaused</a>)</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    {</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    }</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// K: Commented this out since it does not appear to be needed, and was stopping random</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="comment">// track mode from working on XBox &amp; Gamecube, I think because is_frontend is defined to</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="comment">// be 1 in mode_skateshop in gamemode.q. I commented this out instead of changing</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    <span class="comment">// is_frontend to 0 in case that broke something else.      </span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;    </div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    <span class="comment">// don&#39;t play music in the frontend: &lt;- old comment</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment">    Mdl::Skate * skate_mod = Mdl::Skate::Instance();</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment">    if ( skate_mod-&gt;GetGameMode( )-&gt;IsFrontEnd( ) )</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="comment">    {</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment">        TrackUpdate( );</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="comment">        return;</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        </div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    <span class="comment">// if song is finished, start a new one playing...</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a8d17f6d287601e135a21a1868d7cbe9e">gMusicInRandomMode</a> || ( <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a> ) )</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#ada3ae27d8633a2dbdc1d89da282e7841">RandomTrackUpdate</a>( );</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a07be80e6a4854bbe228f60bc3f20f66c">TrackUpdate</a>( );</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;}</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; </div>
<div class="line"><a name="l01996"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a67c6c833ffdd85e76c4e2b8ba2b98519"> 1996</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a67c6c833ffdd85e76c4e2b8ba2b98519">GetPlaylist</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>* flags1, <a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>* flags2 )</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;{</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    *flags1 = <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a>;</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;    *flags2 = <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a>;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;}</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; </div>
<div class="line"><a name="l02002"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a0ea4f2641e54b86cf2ea9bf6b39cf78c"> 2002</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0ea4f2641e54b86cf2ea9bf6b39cf78c">SetPlaylist</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> flags1, <a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a> flags2 )</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;{</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> = flags1;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">TRACKLIST_PERM</a> ].<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> = flags2;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;}</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160; </div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">// Ambient volume is the same as SoundFX volume...</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a3bfc98cf5722b78fd654a6b0c883c798"> 2009</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a3bfc98cf5722b78fd654a6b0c883c798">SetAmbientVolume</a>( <span class="keywordtype">float</span> volPercent )</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;{</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;    <span class="keywordflow">if</span> ( skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>( )-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>( ) )</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    {</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;    }</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> == <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">TRACKLIST_LEVEL_SPECIFIC</a> )</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;    {</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        <a class="code" href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">PCMAudio_SetMusicVolume</a>( volPercent );</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    }</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;}</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; </div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment">// set a particular song as &#39;forbidden&#39; (don&#39;t play it, the player hates that song...)</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a0f6ae742c27333623047547a3b601a18"> 2023</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a0f6ae742c27333623047547a3b601a18">SetTrackForbiddenStatus</a>( <span class="keywordtype">int</span> trackNum, <span class="keywordtype">bool</span> forbidden, <span class="keywordtype">int</span> whichList )</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;{</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    </div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">shuffle_random_songs</a>=<span class="keyword">true</span>;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbass.&quot;</span> ));</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ];</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    Dbg_MsgAssert( trackNum &lt; pTrackList-&gt;numTracks,( <span class="stringliteral">&quot;Not that many tracks in list.&quot;</span> ));</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="keywordflow">if</span> ( forbidden )</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;        <span class="keywordflow">if</span> ( trackNum &lt; 64)</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> |= ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; trackNum );</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;        }</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;        {</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> |= ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (trackNum-64) );</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;        }</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;        </div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#aedfa623921245cd3774a44aaa8759d44">TrackIsPlaying</a>( whichList, trackNum ) )</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( );</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        }</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <span class="keywordflow">for</span> ( i = 0; i &lt; pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a>; i++ )</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        {</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            <span class="keywordflow">if</span> ( !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; i ) ) || !( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (i-64) ) ) )</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            {</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;            }</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;        }</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;        pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    }</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    <span class="keywordflow">if</span> ( trackNum &lt; 64)</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    {</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> &amp;= ~( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; trackNum );</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> &amp;= ~( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (trackNum-64) );</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    }</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">allTracksForbidden</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;}</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160; </div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">/*void CheckLockedTracks()</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment">{</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="comment">    if ( !Mdl::Skate::Instance()-&gt;GetCareer()-&gt;GetGlobalFlag(286) )</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="comment">    {</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">        // if the kiss songs aren&#39;t unlocked make sure they stay forbidden</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment">        SetTrackForbiddenStatus( 32, true, Pcm::TRACKLIST_PERM );</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<span class="comment">        SetTrackForbiddenStatus( 33, true, Pcm::TRACKLIST_PERM );</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">}*/</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#aedfa623921245cd3774a44aaa8759d44"> 2081</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#aedfa623921245cd3774a44aaa8759d44">TrackIsPlaying</a>( <span class="keywordtype">int</span> whichList, <span class="keywordtype">int</span> whichTrack )</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;{</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    Dbg_MsgAssert( <a class="code" href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">gPcmInitialized</a>,( <span class="stringliteral">&quot;Calling Pcm func when PCM Audio not initialized.&quot;</span> ));</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="keywordtype">int</span> pcmStatus = <a class="code" href="../../de/d3e/namespace_pcm.html#ae11c6f947d002653d646ed6be25fe683">PCMAudio_GetMusicStatus</a>( );</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="keywordflow">if</span> ( pcmStatus == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    <span class="keywordflow">if</span> ( whichTrack &gt;= <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ].numTracks )</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;    <span class="comment">// can&#39;t do a strcmp, because files in gTrackName have been converted to all uppercase...</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">gTrackName</a> ) == <a class="code" href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a>( <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ].trackInfo[ whichTrack ].trackName ) )</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <span class="keywordflow">return</span> ( <span class="keyword">true</span> );</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;}</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160; </div>
<div class="line"><a name="l02098"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a037d168fd1bc2595dd72e18290a7eccb"> 2098</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a037d168fd1bc2595dd72e18290a7eccb">GetNumTracks</a>( <span class="keywordtype">int</span> whichList )</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;{</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    </div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbass.&quot;</span> ));</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ];</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">return</span> ( pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">numTracks</a> );</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;}</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a8198e7faf59074f75b5448e8405fd061"> 2110</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a8198e7faf59074f75b5448e8405fd061">GetTrackForbiddenStatus</a>( <span class="keywordtype">int</span> trackNum, <span class="keywordtype">int</span> whichList )</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    </div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160; </div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbass.&quot;</span> ));</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ];</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    Dbg_MsgAssert( trackNum &lt; pTrackList-&gt;numTracks,( <span class="stringliteral">&quot;Requesting forbidden status on invalid track.&quot;</span> ));</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    </div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="keywordflow">if</span> ( trackNum &lt; 64 )</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <span class="keywordflow">if</span> (pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">trackForbidden0</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; trackNum ))</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        }</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        }</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    {</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;        <span class="keywordflow">if</span> (pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">trackForbidden1</a> &amp; ( ((<a class="code" href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a>)1) &lt;&lt; (trackNum-64) ))</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        {</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;        }</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;        {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        }</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    }</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;}</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ab377e062f8f6e7594ab229bdff536539"> 2145</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d3e/namespace_pcm.html#ab377e062f8f6e7594ab229bdff536539">GetTrackName</a>( <span class="keywordtype">int</span> trackNum, <span class="keywordtype">int</span> whichList )</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;{</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160; </div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>())</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    {</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        strcpy( <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ 0 ].trackInfo[ 0 ].trackName, <span class="stringliteral">&quot;Empty.&quot;</span> );</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ 0 ].trackInfo[ 0 ].trackName );</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    }</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="comment">//if ( whichList == TRACKLIST_PERM )</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;    <span class="comment">//{</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="comment">//  Dbg_MsgAssert( trackNum &lt; MAX_NUM_TRACKS, ( &quot;Invalid track num specified.&quot; ) );</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="comment">//  return ( PermTrackTitle[ trackNum ].trackTitle );</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="comment">//}</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160; </div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbass.&quot;</span> ));</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html">TrackList</a> *pTrackList = &amp;<a class="code" href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">gTrackLists</a>[ whichList ];</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    Dbg_MsgAssert( trackNum &lt; pTrackList-&gt;numTracks,( <span class="stringliteral">&quot;Requesting invalid track name.&quot;</span> ));</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    <span class="keywordtype">char</span> *pText = pTrackList-&gt;<a class="code" href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">trackInfo</a>[ trackNum ].<a class="code" href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">trackName</a>;</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keywordtype">char</span> *pRet = pText;</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="keywordtype">int</span> len = strlen( pText );</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; len; i++ )</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="keywordflow">if</span> ( ( pText[ i ] == <span class="charliteral">&#39;\\&#39;</span> ) || ( pText[ i ] == <span class="charliteral">&#39;/&#39;</span> ) )</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        pRet = &amp;pText[ i + 1 ];</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="keywordflow">return</span> ( pRet );</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;}</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160; </div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment">// Ambient (TRACKLIST_LEVEL_SPECIFIC) or music (TRACKLIST_PERM)</span></div>
<div class="line"><a name="l02175"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a1ca914a51189c427eb0bc7022adbcdc3"> 2175</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a1ca914a51189c427eb0bc7022adbcdc3">SetActiveTrackList</a>( <span class="keywordtype">int</span> whichList )</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;{</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    </div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160; </div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    Dbg_MsgAssert( whichList &lt; <a class="code" href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">NUM_TRACKLISTS</a>,( <span class="stringliteral">&quot;Dumbass.&quot;</span> ));</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> != whichList )</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        <a class="code" href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a> * skate_mod = Mdl::Skate::Instance();</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <span class="keywordflow">if</span> ( !skate_mod-&gt;<a class="code" href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">GetGameMode</a>( )-&gt;<a class="code" href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">IsFrontEnd</a>( ) )</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        {</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;            <a class="code" href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">StopMusic</a>( );</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        }</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    }</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> = whichList;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;<span class="comment">// A user can choose to listen to music or ambience during gameplay.</span></div>
<div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a579315dceed5aeba0d7d4d4828a121f5"> 2194</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a579315dceed5aeba0d7d4d4828a121f5">GetActiveTrackList</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;{</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    </div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">gCurrentTrackList</a> );</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;}</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;<span class="comment">// A music header contains the names and sizes of all the music files available:</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a03b7b39c31ae61dd9f54579e0c23114b"> 2201</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a03b7b39c31ae61dd9f54579e0c23114b">LoadMusicHeader</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *nameOfFile )</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;{</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">NoMusicPlease</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    </div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#afbf557d78017d6abcc83d8168b8d72c0">music_hed_there</a> =( <a class="code" href="../../de/d3e/namespace_pcm.html#a2ab0d346a0e02983b900f5d504cceb48">PCMAudio_LoadMusicHeader</a>( nameOfFile ) );</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">return</span>  <a class="code" href="../../de/d3e/namespace_pcm.html#afbf557d78017d6abcc83d8168b8d72c0">music_hed_there</a>; </div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;}</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">// Headers contain all available streams (probably will be one header per level).</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#afeb4f6ad47c86c1cdbe670ca72c5e515"> 2211</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#afeb4f6ad47c86c1cdbe670ca72c5e515">LoadStreamHeader</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *nameOfFile )</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;{</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#ab55ca819636d08506f2530c3a7708bc7">streams_hed_there</a> = <a class="code" href="../../de/d3e/namespace_pcm.html#ad72246c4d6f8ddefb38cbc4219a56195">PCMAudio_LoadStreamHeader</a>( nameOfFile );</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ab55ca819636d08506f2530c3a7708bc7">streams_hed_there</a>;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#ace2f49fcb30acebfab244bcb15b0d04a"> 2220</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#ace2f49fcb30acebfab244bcb15b0d04a">GetNumStreamsAvailable</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;{</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keywordflow">return</span> ( NUM_STREAMS );</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;}</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160; </div>
<div class="line"><a name="l02225"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a62f6485d76de543f2c3dfc9ed867d647"> 2225</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a62f6485d76de543f2c3dfc9ed867d647">StreamAvailable</a>( <span class="keywordtype">int</span> whichStream )</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;{</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;    </div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>( whichStream ) == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    {</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;        <span class="keywordflow">return</span> ( <span class="keyword">true</span> );</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    }</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;}</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160; </div>
<div class="line"><a name="l02236"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#aecbafe918732c29ccb50bf4214f0d92e"> 2236</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a62f6485d76de543f2c3dfc9ed867d647">StreamAvailable</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;{</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160; </div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d31/namespace_config.html#a417f0cda0d89952b0a8d74e3ad505781">Config::CD</a>() || TEST_FROM_CD))</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    {</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        <span class="keywordtype">int</span> testStreams = 0;</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        testStreams = <a class="code" href="../../d1/d54/namespace_script.html#ac722bae4acb2ce23888cb428818f12af">Script::GetInt</a>( 0x62df9442, <span class="keyword">false</span> ); <span class="comment">// checksum &#39;testStreamsFromHost&#39;</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">if</span> ( !testStreams )</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        {</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            <span class="keywordflow">return</span> ( <span class="keyword">true</span> );</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;        }</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    }</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160; </div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">//  return ( PCMAudio_GetStreamStatus( 0 ) == PCM_STATUS_FREE );</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="keywordflow">for</span> ( i = 0; i &lt; NUM_STREAMS; i++ )</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    {</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>( i ) == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">PCM_STATUS_FREE</a> )</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            <span class="keywordflow">return</span> ( <span class="keyword">true</span> );</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;        }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    }</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;}</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a4df53010f60044dc7ec5e4a569d1f692"> 2264</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a4df53010f60044dc7ec5e4a569d1f692">StreamExists</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamChecksum )</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;{</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="comment">// try to find the name in the header file using the checksum:</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamName = <a class="code" href="../../de/d3e/namespace_pcm.html#a76249de87987c6fffd5e38d8b44530a3">PCMAudio_FindNameFromChecksum</a>( streamChecksum, <a class="code" href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca63a41a51d979f2a2d3690d8af718ffb7">EXTRA_CHANNEL</a> );</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="keywordflow">return</span> ( streamName != NULL );</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;}</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a6edcea4d67aa18520e2e4f884cde67f3"> 2271</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a6edcea4d67aa18520e2e4f884cde67f3">StreamLoading</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID )</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;{</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    <span class="keywordflow">if</span> (!(<a class="code" href="../../d0/d31/namespace_config.html#a417f0cda0d89952b0a8d74e3ad505781">Config::CD</a>() || TEST_FROM_CD))</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;    {</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <span class="keywordtype">int</span> testStreams = 0;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        testStreams = <a class="code" href="../../d1/d54/namespace_script.html#ac722bae4acb2ce23888cb428818f12af">Script::GetInt</a>( 0x62df9442, <span class="keyword">false</span> ); <span class="comment">// checksum &#39;testStreamsFromHost&#39;</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <span class="keywordflow">if</span> ( !testStreams )</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;            <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        }</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160; </div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID);</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">if</span> ( channel &gt;= 0 )</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    {</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">PCMAudio_GetStreamStatus</a>( channel ) == <a class="code" href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa34e574aaaacc8f7eb63460d2783ffb6e">PCM_STATUS_LOADING</a> );</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    }</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160; </div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    <span class="keywordflow">return</span> ( <span class="keyword">false</span> );</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;}</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a2280b28a97d1dd91d8697507b5e3829f"> 2295</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a2280b28a97d1dd91d8697507b5e3829f">StreamPlaying</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> streamID )</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;{</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">StreamsDisabled</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    </div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="keywordtype">int</span> channel = <a class="code" href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">GetChannelFromID</a>(streamID, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;    <span class="keywordflow">if</span> ( channel &gt;= 0 )</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;    <span class="comment">// Even if it is in loading state</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    }</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160; </div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;}</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160; </div>
<div class="line"><a name="l02309"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a749f6ea86fa8dd781b2c6f4544080e7b"> 2309</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a749f6ea86fa8dd781b2c6f4544080e7b">GetCurrentTrack</a>()</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;{</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <span class="keywordflow">return</span> ( <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a> );</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;}</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160; </div>
<div class="line"><a name="l02314"></a><span class="lineno"><a class="line" href="../../de/d3e/namespace_pcm.html#a2f7105f989ea3de38f1c0a2f19aa3325"> 2314</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d3e/namespace_pcm.html#a2f7105f989ea3de38f1c0a2f19aa3325">SetCurrentTrack</a>( <span class="keywordtype">int</span> value )</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;{</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <a class="code" href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">current_music_track</a>=value;</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;}</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment">// Pcm::CStreamFrameAmp</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160; </div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a73753de7bbe8e1e308dd7b395483db0c"> 2327</a></span>&#160;<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a73753de7bbe8e1e308dd7b395483db0c">CStreamFrameAmp::CStreamFrameAmp</a>()</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;{</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#aca54b2df52957ccb284a9dd14a265716">Init</a>();</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;}</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160; </div>
<div class="line"><a name="l02337"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#ade60b39f4d93d80aa3acfe6ff7441bb5"> 2337</a></span>&#160;<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#ade60b39f4d93d80aa3acfe6ff7441bb5">CStreamFrameAmp::~CStreamFrameAmp</a>()</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;{</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;}</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160; </div>
<div class="line"><a name="l02346"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#aca54b2df52957ccb284a9dd14a265716"> 2346</a></span>&#160;<span class="keywordtype">void</span>                <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#aca54b2df52957ccb284a9dd14a265716">CStreamFrameAmp::Init</a>()</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;{</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3b405ebfc5e3d2b5fe867fe23a7f46e2">m_checksum</a> = <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a2a4944a6b5c12333c6ef3afc504fbabea8ed8f6d75a1451f4ac7b71554da7b909">vNOT_ALLOCATED</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a> = 0;</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160; </div>
<div class="line"><a name="l02357"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a628e1a1fe397909b42611290000af02b"> 2357</a></span>&#160;<a class="code" href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>               <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a628e1a1fe397909b42611290000af02b">CStreamFrameAmp::GetSample</a>(<span class="keywordtype">int</span> <a class="code" href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">frame</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1849f9d35d54cafbd8d7e41f32f964c1">is_allocated</a>());</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    Dbg_Assert(<a class="code" href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">frame</a> &lt; <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a>);</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160; </div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;    <span class="keywordflow">return</span> m_frame_amp_samples[<a class="code" href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">frame</a>];</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;}</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160; </div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160; </div>
<div class="line"><a name="l02370"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1d6ca91f92ee520da5d0d5da709912a5"> 2370</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *       <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1d6ca91f92ee520da5d0d5da709912a5">CStreamFrameAmp::GetSamples</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1849f9d35d54cafbd8d7e41f32f964c1">is_allocated</a>());</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="keywordflow">return</span> m_frame_amp_samples;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;}</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160; </div>
<div class="line"><a name="l02382"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#abad40169805ef3a143c1ec06a4fcd35a"> 2382</a></span>&#160;<span class="keyword">const</span> <a class="code" href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *       <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1d6ca91f92ee520da5d0d5da709912a5">CStreamFrameAmp::GetSamples</a>(<span class="keywordtype">int</span> <a class="code" href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">frame</a>)<span class="keyword"> const</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1849f9d35d54cafbd8d7e41f32f964c1">is_allocated</a>());</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    Dbg_Assert(<a class="code" href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">frame</a> &lt; <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a>);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    <span class="keywordflow">return</span> &amp;m_frame_amp_samples[<a class="code" href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">frame</a>];</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;}</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160; </div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160; </div>
<div class="line"><a name="l02395"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3a132a96764c75b16cee9e284f731aaf"> 2395</a></span>&#160;<span class="keywordtype">int</span>                 <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3a132a96764c75b16cee9e284f731aaf">CStreamFrameAmp::GetNumSamples</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a>;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;}</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160; </div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160; </div>
<div class="line"><a name="l02405"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#abe00f79ec264f160ccba71ea3794a1cd"> 2405</a></span>&#160;<span class="keywordtype">bool</span>                <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#abe00f79ec264f160ccba71ea3794a1cd">CStreamFrameAmp::load</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> stream_checksum)</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;{</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <a class="code" href="../../d8/dd3/class_file_1_1_c_async_file_handle.html">File::CAsyncFileHandle</a> *p_handle;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordtype">char</span> filename[256];</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160; </div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <span class="comment">// Generate filename from checksum</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <a class="code" href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">sprintf</a>(filename,<span class="stringliteral">&quot;fam\\%x.fam&quot;</span>, stream_checksum);</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="comment">// Open with async blocking for now.  Look to make truly async later.</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    p_handle = <a class="code" href="../../df/d7a/class_file_1_1_c_async_file_loader.html#ab1ad23da6afa5731552c99b632451b98">File::CAsyncFileLoader::sOpen</a>(filename, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <span class="keywordflow">if</span> (p_handle)</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    {</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a> = p_handle-&gt;<a class="code" href="../../d8/dd3/class_file_1_1_c_async_file_handle.html#a6b47a574088d7ca009661485d7080192">GetFileSize</a>();</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a> &gt;= <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a2a4944a6b5c12333c6ef3afc504fbabea9559aee2bdc4324dc06e00802c8402a6">vMAX_SAMPLES</a>)</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;            Dbg_MsgAssert(0, (<span class="stringliteral">&quot;.fam file has too many samples: %d&quot;</span>, <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a>));</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;            <a class="code" href="../../df/d7a/class_file_1_1_c_async_file_loader.html#a81e7a1b6677d751061272e907e5b5295">File::CAsyncFileLoader::sClose</a>(p_handle);</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;        }</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160; </div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        p_handle-&gt;<a class="code" href="../../d8/dd3/class_file_1_1_c_async_file_handle.html#ab8aefa636d30a8b3cee1159c399b7061">Read</a>(m_frame_amp_samples, 1, <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">m_num_samples</a>);</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        <a class="code" href="../../df/d7a/class_file_1_1_c_async_file_loader.html#a81e7a1b6677d751061272e907e5b5295">File::CAsyncFileLoader::sClose</a>(p_handle);</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3b405ebfc5e3d2b5fe867fe23a7f46e2">m_checksum</a> = stream_checksum;</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    }</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    {</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    }</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;}</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160; </div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"><a class="line" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a9de7ec5d17ae1724820ec3cd372011b9"> 2442</a></span>&#160;<span class="keywordtype">bool</span>                <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a9de7ec5d17ae1724820ec3cd372011b9">CStreamFrameAmp::free</a>()</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;{</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1849f9d35d54cafbd8d7e41f32f964c1">is_allocated</a>())</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    {</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;        <span class="comment">// Easiest way to clear, since there is nothing to de-allocate.</span></div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#aca54b2df52957ccb284a9dd14a265716">Init</a>();</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160; </div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    }</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    {</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    }</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;}</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">// Pcm::CStreamFrameAmpManager</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html">CStreamFrameAmp</a>     <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">CStreamFrameAmpManager::s_frame_amp_data</a>[vMAX_BUFFERS];</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160; </div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160; </div>
<div class="line"><a name="l02467"></a><span class="lineno"><a class="line" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#af602e825f53aaa6c5005c57148a29024"> 2467</a></span>&#160;<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html">CStreamFrameAmp</a> *   <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#af602e825f53aaa6c5005c57148a29024">CStreamFrameAmpManager::sLoadFrameAmp</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> stream_checksum)</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;{</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4c943070f0b76f3492e48cbbc296be22a1a216d864f208c4a8768b6013e6a0c2d">vMAX_BUFFERS</a>; i++)</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    {</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i].is_allocated())</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i].load(stream_checksum))</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            {</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;                <span class="keywordflow">return</span> &amp;<a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i];</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;            }</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            {</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;                <span class="comment">// If we got here, there weren&#39;t any free slots</span></div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;                Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Couldn&#39;t load StreamFrameAmp %s&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(stream_checksum)));</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;                <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            }</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;        }</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    }</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="comment">// If we got here, there weren&#39;t any free slots</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Can&#39;t load StreamFrameAmp %s: no free slots&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(stream_checksum)));</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;}</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160; </div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160; </div>
<div class="line"><a name="l02496"></a><span class="lineno"><a class="line" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4763365ddc30ecfdc38c67bf153c9a15"> 2496</a></span>&#160;<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html">CStreamFrameAmp</a> *   <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4763365ddc30ecfdc38c67bf153c9a15">CStreamFrameAmpManager::sGetFrameAmp</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> stream_checksum)</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;{</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4c943070f0b76f3492e48cbbc296be22a1a216d864f208c4a8768b6013e6a0c2d">vMAX_BUFFERS</a>; i++)</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    {</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i].GetStreamNameCRC() == stream_checksum)</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;        {</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;            <span class="keywordflow">return</span> &amp;<a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i];</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        }</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    }</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160; </div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;}</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160; </div>
<div class="line"><a name="l02514"></a><span class="lineno"><a class="line" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a3bcd9ff025b0e98ebf8f45b089ea86ff"> 2514</a></span>&#160;<span class="keywordtype">bool</span>                <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a3bcd9ff025b0e98ebf8f45b089ea86ff">CStreamFrameAmpManager::sFreeFrameAmp</a>(<a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> stream_checksum)</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;{</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4c943070f0b76f3492e48cbbc296be22a1a216d864f208c4a8768b6013e6a0c2d">vMAX_BUFFERS</a>; i++)</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i].GetStreamNameCRC() == stream_checksum)</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        {</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">s_frame_amp_data</a>[i].<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a9de7ec5d17ae1724820ec3cd372011b9">free</a>();</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        }</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    }</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <span class="comment">// If we got here, we didn&#39;t find it</span></div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    Dbg_MsgAssert(0, (<span class="stringliteral">&quot;Can&#39;t find StreamFrameAmp %s data to free&quot;</span>, <a class="code" href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a>(stream_checksum)));</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;}</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160; </div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160; </div>
<div class="line"><a name="l02534"></a><span class="lineno"><a class="line" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a7be15821d4e1c2341ae2c47e88a5647f"> 2534</a></span>&#160;<span class="keywordtype">bool</span>                <a class="code" href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a3bcd9ff025b0e98ebf8f45b089ea86ff">CStreamFrameAmpManager::sFreeFrameAmp</a>(<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html">CStreamFrameAmp</a> *p_fam_data)</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;{</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keywordflow">return</span> p_fam_data-&gt;<a class="code" href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a9de7ec5d17ae1724820ec3cd372011b9">free</a>();</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;}</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160; </div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;}  <span class="comment">// namespace Pcm</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="anamespace_replay_html_a9aa4761c4a0da9123a910787f7a90756"><div class="ttname"><a href="../../d9/d29/namespace_replay.html#a9aa4761c4a0da9123a910787f7a90756">Replay::WritePositionalStream</a></div><div class="ttdeci">void WritePositionalStream(uint32 dummyId, uint32 streamNameChecksum, float dropoff, float volume, float pitch, int priority, int use_pos_info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8f/replay_8cpp_source.html#l03559">replay.cpp:3559</a></div></div>
<div class="ttc" id="anamespace_pcm_html_afeb4f6ad47c86c1cdbe670ca72c5e515"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#afeb4f6ad47c86c1cdbe670ca72c5e515">Pcm::LoadStreamHeader</a></div><div class="ttdeci">bool LoadStreamHeader(const char *nameOfFile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02211">music.cpp:2211</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_manager_html_a310d56c550bc48fbbe85b7f421ce79db"><div class="ttname"><a href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a310d56c550bc48fbbe85b7f421ce79db">Pcm::CStreamFrameAmpManager::s_frame_amp_data</a></div><div class="ttdeci">static CStreamFrameAmp s_frame_amp_data[vMAX_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00253">music.h:253</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8d17f6d287601e135a21a1868d7cbe9e"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8d17f6d287601e135a21a1868d7cbe9e">Pcm::gMusicInRandomMode</a></div><div class="ttdeci">static bool gMusicInRandomMode</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00123">music.cpp:123</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac2ccbfb99f608446cdec3a988c6e27cd"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac2ccbfb99f608446cdec3a988c6e27cd">Pcm::PlayMusicStream</a></div><div class="ttdeci">void PlayMusicStream(uint32 checksum, float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01273">music.cpp:1273</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ace2f49fcb30acebfab244bcb15b0d04a"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ace2f49fcb30acebfab244bcb15b0d04a">Pcm::GetNumStreamsAvailable</a></div><div class="ttdeci">int GetNumStreamsAvailable(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02220">music.cpp:2220</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a037d168fd1bc2595dd72e18290a7eccb"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a037d168fd1bc2595dd72e18290a7eccb">Pcm::GetNumTracks</a></div><div class="ttdeci">int GetNumTracks(int whichList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02098">music.cpp:2098</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0c632a24e783c4d6c5cf6962453fb1cd"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0c632a24e783c4d6c5cf6962453fb1cd">Pcm::SetVolume</a></div><div class="ttdeci">void SetVolume(float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01376">music.cpp:1376</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_manager_html_a4763365ddc30ecfdc38c67bf153c9a15"><div class="ttname"><a href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4763365ddc30ecfdc38c67bf153c9a15">Pcm::CStreamFrameAmpManager::sGetFrameAmp</a></div><div class="ttdeci">static CStreamFrameAmp * sGetFrameAmp(uint32 stream_checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02496">music.cpp:2496</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a6d8375507215bd2a8f299778e6d646e7">Pcm::NUM_TRACKLISTS</a></div><div class="ttdeci">@ NUM_TRACKLISTS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00169">music.h:169</a></div></div>
<div class="ttc" id="anamespace_pcm_html_abf1acea07d710432dfbcd1dcb698c0e4"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#abf1acea07d710432dfbcd1dcb698c0e4">Pcm::sMusicIsPaused</a></div><div class="ttdeci">static bool sMusicIsPaused</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01299">music.cpp:1299</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a628e1a1fe397909b42611290000af02b"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a628e1a1fe397909b42611290000af02b">Pcm::CStreamFrameAmp::GetSample</a></div><div class="ttdeci">uint8 GetSample(int frame) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02357">music.cpp:2357</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2db977e9bc1ec7c3561fbb493a65abbf"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2db977e9bc1ec7c3561fbb493a65abbf">Pcm::_PlayMusicTrack</a></div><div class="ttdeci">bool _PlayMusicTrack(const char *filename, float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00520">music.cpp:520</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a75150b149fb2f45075cdebc2422afaff"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a75150b149fb2f45075cdebc2422afaff">Obj::CCompositeObject::m_pos</a></div><div class="ttdeci">Mth::Vector m_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00099">compositeobject.h:99</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac4136ac5cb7d5b83c62ddea64df09788"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac4136ac5cb7d5b83c62ddea64df09788">Pcm::PCMAudio_Init</a></div><div class="ttdeci">void PCMAudio_Init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l00865">p_music.cpp:865</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a73753de7bbe8e1e308dd7b395483db0c"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a73753de7bbe8e1e308dd7b395483db0c">Pcm::CStreamFrameAmp::CStreamFrameAmp</a></div><div class="ttdeci">CStreamFrameAmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02327">music.cpp:2327</a></div></div>
<div class="ttc" id="anamespace_pcm_html_afd31dedba5f3740e9522708f673676f6"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#afd31dedba5f3740e9522708f673676f6">Pcm::gNumStreams</a></div><div class="ttdeci">static int gNumStreams</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00127">music.cpp:127</a></div></div>
<div class="ttc" id="asoundfx_8h_html"><div class="ttname"><a href="../../d2/d00/soundfx_8h.html">soundfx.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8488310aee3f720c9b123abd9c270402"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8488310aee3f720c9b123abd9c270402">Pcm::PCMAudio_Update</a></div><div class="ttdeci">int PCMAudio_Update(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01490">p_music.cpp:1490</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_ae66ca95f9a3efae59c0c4d0ec5509af0"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#ae66ca95f9a3efae59c0c4d0ec5509af0">Pcm::TrackList::trackPlayed0</a></div><div class="ttdeci">uint64 trackPlayed0</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00086">music.h:86</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_aa889c01b8973d0a0005570d914099bbe"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa889c01b8973d0a0005570d914099bbe">Pcm::CurrentStreamInfo::controlID</a></div><div class="ttdeci">uint32 controlID</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00056">music.h:56</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a03b7b39c31ae61dd9f54579e0c23114b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a03b7b39c31ae61dd9f54579e0c23114b">Pcm::LoadMusicHeader</a></div><div class="ttdeci">bool LoadMusicHeader(const char *nameOfFile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02201">music.cpp:2201</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a49d96c61a8cac9aa8693a739e9733acf"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a49d96c61a8cac9aa8693a739e9733acf">Pcm::GetSoundtrackFromStructure</a></div><div class="ttdeci">void GetSoundtrackFromStructure(Script::CStruct *pStuff)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00478">music.cpp:478</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a65af4a89e281cd4c1184166a987443b6"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a65af4a89e281cd4c1184166a987443b6">Pcm::StartPreLoadedStream</a></div><div class="ttdeci">bool StartPreLoadedStream(uint32 streamID, Sfx::sVolume *p_volume, float pitch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00979">music.cpp:979</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a344e6658f3af7171f0751d22847540e8"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a344e6658f3af7171f0751d22847540e8">Pcm::gpStreamingObj</a></div><div class="ttdeci">static Obj::CStreamComponent * gpStreamingObj[NUM_STREAMS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00128">music.cpp:128</a></div></div>
<div class="ttc" id="aclass_mdl_1_1_skate_html"><div class="ttname"><a href="../../d6/df1/class_mdl_1_1_skate.html">Mdl::Skate</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d23/skate_8h_source.html#l00156">skate.h:156</a></div></div>
<div class="ttc" id="adebuggfx_8h_html"><div class="ttname"><a href="../../d3/d83/debuggfx_8h.html">debuggfx.h</a></div></div>
<div class="ttc" id="a_defines_8h_html_a1134b580f8da4de94ca6b1de4d37975e"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a></div><div class="ttdeci">unsigned long uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00147">Defines.h:147</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a1a5749870e5e434bf0816328827e7baa"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a1a5749870e5e434bf0816328827e7baa">Pcm::sp_random_song_order</a></div><div class="ttdeci">static int sp_random_song_order[MAX_USER_SONGS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00155">music.cpp:155</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a9131d57c7fb4e1b37baadc31bc2cc7a4"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a9131d57c7fb4e1b37baadc31bc2cc7a4">Pcm::s_xbox_user_soundtrack</a></div><div class="ttdeci">static int s_xbox_user_soundtrack</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00144">music.cpp:144</a></div></div>
<div class="ttc" id="anamespace_pcm_html_afbf557d78017d6abcc83d8168b8d72c0"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#afbf557d78017d6abcc83d8168b8d72c0">Pcm::music_hed_there</a></div><div class="ttdeci">static bool music_hed_there</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00071">music.cpp:71</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ae78589290a1f932cbb92afcf804821e6"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ae78589290a1f932cbb92afcf804821e6">Pcm::gMusicStreamChecksum</a></div><div class="ttdeci">static uint32 gMusicStreamChecksum</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00134">music.cpp:134</a></div></div>
<div class="ttc" id="aclass_file_1_1_c_async_file_handle_html"><div class="ttname"><a href="../../d8/dd3/class_file_1_1_c_async_file_handle.html">File::CAsyncFileHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d6c/_async_filesys_8h_source.html#l00082">AsyncFilesys.h:82</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a2a4944a6b5c12333c6ef3afc504fbabea8ed8f6d75a1451f4ac7b71554da7b909"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a2a4944a6b5c12333c6ef3afc504fbabea8ed8f6d75a1451f4ac7b71554da7b909">Pcm::CStreamFrameAmp::vNOT_ALLOCATED</a></div><div class="ttdeci">@ vNOT_ALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00206">music.h:206</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a87f0cdbef8926aa89167053d746b9718"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a87f0cdbef8926aa89167053d746b9718">Pcm::PCMAudio_PlayMusicStream</a></div><div class="ttdeci">bool PCMAudio_PlayMusicStream(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0a/_ngps_2p__music_8cpp_source.html#l00993">p_music.cpp:993</a></div></div>
<div class="ttc" id="anamespace_script_html_af49b12363c52ae6f00363d582c3bdc7e"><div class="ttname"><a href="../../d1/d54/namespace_script.html#af49b12363c52ae6f00363d582c3bdc7e">Script::RunScript</a></div><div class="ttdeci">void RunScript(uint32 scriptChecksum, CStruct *p_params, Obj::CObject *p_object, bool netScript, const char *p_scriptName)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/script_8cpp_source.html#l02995">script.cpp:2995</a></div></div>
<div class="ttc" id="a_defines_8h_html_a29940ae63ec06c9998bba873e25407ad"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#a29940ae63ec06c9998bba873e25407ad">uint64</a></div><div class="ttdeci">unsigned __int64 uint64</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00150">Defines.h:150</a></div></div>
<div class="ttc" id="aclass_sfx_1_1_c_sfx_manager_html_ac28a63a77574abed01989635f67c6c72"><div class="ttname"><a href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#ac28a63a77574abed01989635f67c6c72">Sfx::CSfxManager::SetVolumeFromPos</a></div><div class="ttdeci">void SetVolumeFromPos(sVolume *p_vol, const Mth::Vector &amp;soundSource, float dropoffDist, EDropoffFunc dropoff_func=DROPOFF_FUNC_STANDARD, Gfx::Camera *pCamera=NULL, const Mth::Vector *p_dropoff_pos=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbd/soundfx_8cpp_source.html#l01461">soundfx.cpp:1461</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a60ad32e5e7e7d22706038f21a95011ac"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a60ad32e5e7e7d22706038f21a95011ac">Pcm::SkipMusicTrack</a></div><div class="ttdeci">void SkipMusicTrack(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01518">music.cpp:1518</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a3b6b1c369e6cd0c1fd6f7b72ee2937b3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a3b6b1c369e6cd0c1fd6f7b72ee2937b3">Pcm::ClearPlaylist</a></div><div class="ttdeci">void ClearPlaylist(int whichList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01501">music.cpp:1501</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8332c54f11921082c33e4913c0a66e48"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8332c54f11921082c33e4913c0a66e48">Pcm::GetMusicStreamVolume</a></div><div class="ttdeci">float GetMusicStreamVolume(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01434">music.cpp:1434</a></div></div>
<div class="ttc" id="aclass_mdl_1_1_skate_html_a5a90b89a9816fe8fc4e8083510f22d3e"><div class="ttname"><a href="../../d6/df1/class_mdl_1_1_skate.html#a5a90b89a9816fe8fc4e8083510f22d3e">Mdl::Skate::GetGameMode</a></div><div class="ttdeci">Game::CGameMode * GetGameMode()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc5/skate_8cpp_source.html#l01870">skate.cpp:1870</a></div></div>
<div class="ttc" id="anamespace_pcm_html_af16cbb0ab50ab96cd8028bc719b88073"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#af16cbb0ab50ab96cd8028bc719b88073">Pcm::gTrackLists</a></div><div class="ttdeci">static TrackList gTrackLists[NUM_TRACKLISTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00118">music.cpp:118</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a4c710a37eebf8d7874cefe6731fe74e1"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a4c710a37eebf8d7874cefe6731fe74e1">Pcm::PreLoadMusicStream</a></div><div class="ttdeci">bool PreLoadMusicStream(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01008">music.cpp:1008</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a3a132a96764c75b16cee9e284f731aaf"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3a132a96764c75b16cee9e284f731aaf">Pcm::CStreamFrameAmp::GetNumSamples</a></div><div class="ttdeci">int GetNumSamples() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02395">music.cpp:2395</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a3bfc98cf5722b78fd654a6b0c883c798"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a3bfc98cf5722b78fd654a6b0c883c798">Pcm::SetAmbientVolume</a></div><div class="ttdeci">void SetAmbientVolume(float volPercent)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02009">music.cpp:2009</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8ca163233b236064e4a7acfba38a5b5a"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8ca163233b236064e4a7acfba38a5b5a">Pcm::gMusicStreamWaitingToStart</a></div><div class="ttdeci">static bool gMusicStreamWaitingToStart</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00136">music.cpp:136</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_ade60b39f4d93d80aa3acfe6ff7441bb5"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#ade60b39f4d93d80aa3acfe6ff7441bb5">Pcm::CStreamFrameAmp::~CStreamFrameAmp</a></div><div class="ttdeci">~CStreamFrameAmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02337">music.cpp:2337</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a58274b76aa23345bc9ace7b90bde54cf"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a58274b76aa23345bc9ace7b90bde54cf">Pcm::GetRandomMode</a></div><div class="ttdeci">int GetRandomMode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01560">music.cpp:1560</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0f6ae742c27333623047547a3b601a18"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0f6ae742c27333623047547a3b601a18">Pcm::SetTrackForbiddenStatus</a></div><div class="ttdeci">void SetTrackForbiddenStatus(int trackNum, bool forbidden, int whichList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02023">music.cpp:2023</a></div></div>
<div class="ttc" id="a_messages_8h_html_a701d7b9cdd94e5f87bc47f4e770492e6"><div class="ttname"><a href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a></div><div class="ttdeci">void Dbg_Message(const char *A ...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de2/_messages_8h_source.html#l00112">Messages.h:112</a></div></div>
<div class="ttc" id="anamespace_pcm_html"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html">Pcm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00068">music.cpp:68</a></div></div>
<div class="ttc" id="anamespace_pcm_html_afab534bd17874dcab53e09169e2f7803"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#afab534bd17874dcab53e09169e2f7803">Pcm::num_random_songs</a></div><div class="ttdeci">static int num_random_songs</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00153">music.cpp:153</a></div></div>
<div class="ttc" id="amacros_8h_html"><div class="ttname"><a href="../../de/d3c/macros_8h.html">macros.h</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a3b405ebfc5e3d2b5fe867fe23a7f46e2"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3b405ebfc5e3d2b5fe867fe23a7f46e2">Pcm::CStreamFrameAmp::m_checksum</a></div><div class="ttdeci">uint32 m_checksum</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00227">music.h:227</a></div></div>
<div class="ttc" id="a_game_mode_8h_html"><div class="ttname"><a href="../../d6/d31/_game_mode_8h.html">GameMode.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2271340d84cc221441afae2949b10254"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2271340d84cc221441afae2949b10254">Pcm::_PlayMusicStream</a></div><div class="ttdeci">bool _PlayMusicStream(uint32 checksum, float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00590">music.cpp:590</a></div></div>
<div class="ttc" id="a_stream_component_8h_html"><div class="ttname"><a href="../../de/d97/_stream_component_8h.html">StreamComponent.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7e5bdce07eb12f1568106488b7ad09c0"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7e5bdce07eb12f1568106488b7ad09c0">Pcm::sp_xbox_randomized_songs</a></div><div class="ttdeci">static int sp_xbox_randomized_songs[MAX_USER_SONGS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00149">music.cpp:149</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a9da9f75b41f77226cdeca79fe90b9ece"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a9da9f75b41f77226cdeca79fe90b9ece">Pcm::UsingUserSoundtrack</a></div><div class="ttdeci">bool UsingUserSoundtrack(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00432">music.cpp:432</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a76249de87987c6fffd5e38d8b44530a3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a76249de87987c6fffd5e38d8b44530a3">Pcm::PCMAudio_FindNameFromChecksum</a></div><div class="ttdeci">uint32 PCMAudio_FindNameFromChecksum(uint32 checksum, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01570">p_music.cpp:1570</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab672abb1449a04f9be713c625e1f6225"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225">Pcm::EMusicStreamType</a></div><div class="ttdeci">EMusicStreamType</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00046">music.h:46</a></div></div>
<div class="ttc" id="anamespace_pcm_html_aedfa623921245cd3774a44aaa8759d44"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#aedfa623921245cd3774a44aaa8759d44">Pcm::TrackIsPlaying</a></div><div class="ttdeci">bool TrackIsPlaying(int whichList, int whichTrack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02081">music.cpp:2081</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_ab6805f805d22e3876bcd47552a663f1a"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">Script::CStruct::AddInteger</a></div><div class="ttdeci">void AddInteger(uint32 nameChecksum, int integer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01039">struct.cpp:1039</a></div></div>
<div class="ttc" id="anamespace_script_html_a1dbce4b634727b78b34e4f40ad1ba884a60f92b942056af24643ab6005de82711"><div class="ttname"><a href="../../d1/d54/namespace_script.html#a1dbce4b634727b78b34e4f40ad1ba884a60f92b942056af24643ab6005de82711">Script::NO_ASSERT</a></div><div class="ttdeci">@ NO_ASSERT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d49/scriptdefs_8h_source.html#l00015">scriptdefs.h:15</a></div></div>
<div class="ttc" id="anamespace_pcm_html_adc76ba3d53691cfd74b0ff1ce7e42e78"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#adc76ba3d53691cfd74b0ff1ce7e42e78">Pcm::SetStreamVolumeFromID</a></div><div class="ttdeci">bool SetStreamVolumeFromID(uint32 streamID, Sfx::sVolume *p_volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00270">music.cpp:270</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7b2cd5bc52989b31df91a22c66e6be5ca63a41a51d979f2a2d3690d8af718ffb7"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca63a41a51d979f2a2d3690d8af718ffb7">Pcm::EXTRA_CHANNEL</a></div><div class="ttdeci">@ EXTRA_CHANNEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dae/ngc_2p__music_8h_source.html#l00016">p_music.h:16</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a738a4e89e02ad27cf4da30aed7d9111a"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a738a4e89e02ad27cf4da30aed7d9111a">Pcm::PCMAudio_StopStream</a></div><div class="ttdeci">void PCMAudio_StopStream(int whichStream, bool waitPlease)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01771">p_music.cpp:1771</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a3e960801ef8bc3380fafcb50faf788ea"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a3e960801ef8bc3380fafcb50faf788ea">Pcm::gMusicStreamType</a></div><div class="ttdeci">static EMusicStreamType gMusicStreamType</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00132">music.cpp:132</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_a76898903eb1f9f2cd09121c82e6f7195"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a76898903eb1f9f2cd09121c82e6f7195">Pcm::CurrentStreamInfo::dropoff</a></div><div class="ttdeci">float dropoff</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00059">music.h:59</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab477c8e933d0a17a930f5b65833904ca"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab477c8e933d0a17a930f5b65833904ca">Pcm::SaveSoundtrackToStructure</a></div><div class="ttdeci">void SaveSoundtrackToStructure(Script::CStruct *pStuff)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00447">music.cpp:447</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0ea4f2641e54b86cf2ea9bf6b39cf78c"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0ea4f2641e54b86cf2ea9bf6b39cf78c">Pcm::SetPlaylist</a></div><div class="ttdeci">void SetPlaylist(uint64 flags1, uint64 flags2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02002">music.cpp:2002</a></div></div>
<div class="ttc" id="asingleton_8h_html"><div class="ttname"><a href="../../d4/d0b/singleton_8h.html">singleton.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a9dc5061c2811975c573c4f8ea921cad8"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a9dc5061c2811975c573c4f8ea921cad8">Pcm::GetNumSoundtracks</a></div><div class="ttdeci">int GetNumSoundtracks(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dde/p__soundtrack_8cpp_source.html#l00112">p_soundtrack.cpp:112</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a537375d8334ed547fb8acc5c7b3288cf"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a537375d8334ed547fb8acc5c7b3288cf">Pcm::sSetCorrectMusicVolume</a></div><div class="ttdeci">static void sSetCorrectMusicVolume()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01593">music.cpp:1593</a></div></div>
<div class="ttc" id="astruct_sfx_1_1s_volume_html_a308ed6f4baabba296b62b106dc707cc9"><div class="ttname"><a href="../../da/d13/struct_sfx_1_1s_volume.html#a308ed6f4baabba296b62b106dc707cc9">Sfx::sVolume::GetChannelVolume</a></div><div class="ttdeci">float GetChannelVolume(uint32 chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/soundfx_8h_source.html#l00207">soundfx.h:207</a></div></div>
<div class="ttc" id="astruct_sfx_1_1s_volume_html"><div class="ttname"><a href="../../da/d13/struct_sfx_1_1s_volume.html">Sfx::sVolume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/soundfx_8h_source.html#l00187">soundfx.h:187</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab55ca819636d08506f2530c3a7708bc7"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab55ca819636d08506f2530c3a7708bc7">Pcm::streams_hed_there</a></div><div class="ttdeci">static bool streams_hed_there</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00072">music.cpp:72</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_stream_component_html_a0718afc882999e7f28085e229d2e61a9"><div class="ttname"><a href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0718afc882999e7f28085e229d2e61a9">Obj::CStreamComponent::GetClosestEmitterPos</a></div><div class="ttdeci">Mth::Vector GetClosestEmitterPos(Gfx::Camera *pCamera)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/_stream_component_8cpp_source.html#l00231">StreamComponent.cpp:231</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab540a2f650e1fd7e2063678e5ada0f32"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab540a2f650e1fd7e2063678e5ada0f32">Pcm::Init</a></div><div class="ttdeci">void Init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01137">music.cpp:1137</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a16aea96b1e93055c709f8066fa2e0e5f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a16aea96b1e93055c709f8066fa2e0e5f">Pcm::gPcmInitialized</a></div><div class="ttdeci">static bool gPcmInitialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00126">music.cpp:126</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_ad5af82b6fb5615214e81f50fffc7c628"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ad5af82b6fb5615214e81f50fffc7c628">Pcm::CurrentStreamInfo::uniqueID</a></div><div class="ttdeci">uint32 uniqueID</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00057">music.h:57</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2000cbdb9ec2431e2579a04d1cc78a3e"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2000cbdb9ec2431e2579a04d1cc78a3e">Pcm::_StartMusicStream</a></div><div class="ttdeci">static void _StartMusicStream()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01571">music.cpp:1571</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a07ba5f1f8167fcb8ae445a9168fd1648"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a07ba5f1f8167fcb8ae445a9168fd1648">Pcm::current_music_track</a></div><div class="ttdeci">static int current_music_track</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00117">music.cpp:117</a></div></div>
<div class="ttc" id="aclass_file_1_1_c_async_file_handle_html_ab8aefa636d30a8b3cee1159c399b7061"><div class="ttname"><a href="../../d8/dd3/class_file_1_1_c_async_file_handle.html#ab8aefa636d30a8b3cee1159c399b7061">File::CAsyncFileHandle::Read</a></div><div class="ttdeci">size_t Read(void *p_buffer, size_t size, size_t count)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d56/_async_filesys_8cpp_source.html#l00242">AsyncFilesys.cpp:242</a></div></div>
<div class="ttc" id="areplay_8h_html"><div class="ttname"><a href="../../dd/d02/replay_8h.html">replay.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912af3080a6d2aecda3b0ad54c53d989be72">Pcm::TRACKLIST_PERM</a></div><div class="ttdeci">@ TRACKLIST_PERM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00167">music.h:167</a></div></div>
<div class="ttc" id="anamespace_ns_prim_html_a1a72a765c173b143ba196e1bbc17f8ad"><div class="ttname"><a href="../../da/dc7/namespace_ns_prim.html#a1a72a765c173b143ba196e1bbc17f8ad">NsPrim::frame</a></div><div class="ttdeci">void frame(float left, float top, float right, float bottom, GXColor color)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d8e/p__prim_8cpp_source.html#l00485">p_prim.cpp:485</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_a952f40d99323d28b3ca2f55567edfa85"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">Obj::CBaseComponent::GetObject</a></div><div class="ttdeci">CCompositeObject * GetObject() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00059">basecomponent.h:59</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a658a767b682f347ab28b52a96b76b5e7"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a658a767b682f347ab28b52a96b76b5e7">Pcm::PreLoadMusicStreamDone</a></div><div class="ttdeci">bool PreLoadMusicStreamDone(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01038">music.cpp:1038</a></div></div>
<div class="ttc" id="amath_8h_html"><div class="ttname"><a href="../../df/db1/math_8h.html">math.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab66d43c8f3ac77f6a3138d7b18567663"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab66d43c8f3ac77f6a3138d7b18567663">Pcm::PauseStream</a></div><div class="ttdeci">void PauseStream(int pause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01340">music.cpp:1340</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_stream_component_html_a0feaf96a33b38a299c8a6b53b4c0664a"><div class="ttname"><a href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0feaf96a33b38a299c8a6b53b4c0664a">Obj::CStreamComponent::GetClosestDropoffPos</a></div><div class="ttdeci">bool GetClosestDropoffPos(Gfx::Camera *pCamera, Mth::Vector &amp;dropoff_pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d48/_stream_component_8cpp_source.html#l00248">StreamComponent.cpp:248</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_a40010034d7d76a6bef36441cdb74a101"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a40010034d7d76a6bef36441cdb74a101">Pcm::CurrentStreamInfo::volume</a></div><div class="ttdeci">float volume</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00058">music.h:58</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_a5d9860e75457556161201e9cf3e9732d"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#a5d9860e75457556161201e9cf3e9732d">Script::CStruct::GetText</a></div><div class="ttdeci">bool GetText(uint32 nameChecksum, const char **pp_text, bool assert=false) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01939">struct.cpp:1939</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0bff487b4bf3e624ddae0b0ee2819181"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0bff487b4bf3e624ddae0b0ee2819181">Pcm::PCMAudio_PreLoadStreamDone</a></div><div class="ttdeci">bool PCMAudio_PreLoadStreamDone(int whichStream)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01834">p_music.cpp:1834</a></div></div>
<div class="ttc" id="anamespace_pcm_html_af8b5edef75019ce0cacf9e94826a7d74"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#af8b5edef75019ce0cacf9e94826a7d74">Pcm::GenerateUniqueID</a></div><div class="ttdeci">uint32 GenerateUniqueID(uint32 id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00196">music.cpp:196</a></div></div>
<div class="ttc" id="a_defines_8h_html"><div class="ttname"><a href="../../d8/de2/_defines_8h.html">Defines.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ad5082cda5b5b210b9569ddaca07148a8"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ad5082cda5b5b210b9569ddaca07148a8">Pcm::PauseMusic</a></div><div class="ttdeci">void PauseMusic(int pause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01300">music.cpp:1300</a></div></div>
<div class="ttc" id="astruct_sfx_1_1s_volume_html_aa01bbcd26a45f906d68bd5bb7d86d439"><div class="ttname"><a href="../../da/d13/struct_sfx_1_1s_volume.html#aa01bbcd26a45f906d68bd5bb7d86d439">Sfx::sVolume::SetSilent</a></div><div class="ttdeci">void SetSilent(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbd/soundfx_8cpp_source.html#l00278">soundfx.cpp:278</a></div></div>
<div class="ttc" id="astruct_sfx_1_1s_volume_html_a72a97301fb0362b51cd652d263fc93b8"><div class="ttname"><a href="../../da/d13/struct_sfx_1_1s_volume.html#a72a97301fb0362b51cd652d263fc93b8">Sfx::sVolume::PercentageAdjustment</a></div><div class="ttdeci">void PercentageAdjustment(float percentage)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbd/soundfx_8cpp_source.html#l00221">soundfx.cpp:221</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_adfe9c931eadcba96c5d7e92eaf106e70"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#adfe9c931eadcba96c5d7e92eaf106e70">Pcm::TrackList::trackInfo</a></div><div class="ttdeci">TrackInfo trackInfo[MAX_NUM_TRACKS]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00081">music.h:81</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7a0f485121bf4a48fb253675672e0c5f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7a0f485121bf4a48fb253675672e0c5f">Pcm::PCMAudio_PlayMusicTrack</a></div><div class="ttdeci">bool PCMAudio_PlayMusicTrack(const char *filename, bool preload)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01196">p_music.cpp:1196</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8e6c42b4c64a062c0b9f03593edba30f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8e6c42b4c64a062c0b9f03593edba30f">Pcm::StopStreams</a></div><div class="ttdeci">void StopStreams(int channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00219">music.cpp:219</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dec/struct_8h_source.html#l00052">struct.h:52</a></div></div>
<div class="ttc" id="anamespace_pcm_html_abd67c718890698fd00cab9dba2884c8b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#abd67c718890698fd00cab9dba2884c8b">Pcm::sCounter</a></div><div class="ttdeci">static int sCounter</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00125">music.cpp:125</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0dbb46ceca862703255ebaa3dd28c431"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0dbb46ceca862703255ebaa3dd28c431">Pcm::PCMAudio_PreLoadMusicStream</a></div><div class="ttdeci">bool PCMAudio_PreLoadMusicStream(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01887">p_music.cpp:1887</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a25d3947b513e53b7a680f8e2f0af90dd"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a25d3947b513e53b7a680f8e2f0af90dd">Pcm::PCMAudio_PlaySoundtrackMusicTrack</a></div><div class="ttdeci">bool PCMAudio_PlaySoundtrackMusicTrack(int soundtrack, int track)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/da5/_xbox_2p__music_8cpp_source.html#l01232">p_music.cpp:1232</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ae5b397db65d5090bf8ea68467101936d"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ae5b397db65d5090bf8ea68467101936d">Pcm::SetStreamPitchFromID</a></div><div class="ttdeci">bool SetStreamPitchFromID(uint32 streamID, float pitch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00297">music.cpp:297</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a4d8fdb6c0afecf9a5955620cea7866a0"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a4d8fdb6c0afecf9a5955620cea7866a0">Pcm::PlayStreamFromObject</a></div><div class="ttdeci">uint32 PlayStreamFromObject(Obj::CStreamComponent *pComponent, uint32 streamNameChecksum, float dropoff, float volume, float pitch, int priority, int use_pos_info, EDropoffFunc dropoffFunc, uint32 controlID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00760">music.cpp:760</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a749f6ea86fa8dd781b2c6f4544080e7b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a749f6ea86fa8dd781b2c6f4544080e7b">Pcm::GetCurrentTrack</a></div><div class="ttdeci">int GetCurrentTrack()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02309">music.cpp:2309</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ad72246c4d6f8ddefb38cbc4219a56195"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ad72246c4d6f8ddefb38cbc4219a56195">Pcm::PCMAudio_LoadStreamHeader</a></div><div class="ttdeci">bool PCMAudio_LoadStreamHeader(const char *nameOfFile)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l02096">p_music.cpp:2096</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_a6645f4d40b8c62bbb5f4fc26e4db61bc"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a6645f4d40b8c62bbb5f4fc26e4db61bc">Pcm::CurrentStreamInfo::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00061">music.h:61</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_ad6838a61ba8d66c2f1d695aedffd8f9f"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad6838a61ba8d66c2f1d695aedffd8f9f">Pcm::TrackList::trackPlayed1</a></div><div class="ttdeci">uint64 trackPlayed1</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00087">music.h:87</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac4c734bb6a7ec61b21831066b6160e64"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac4c734bb6a7ec61b21831066b6160e64">Pcm::PlayStream</a></div><div class="ttdeci">uint32 PlayStream(uint32 checksum, Sfx::sVolume *p_volume, float pitch, int priority, uint32 controlID, bool record_in_replay)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00879">music.cpp:879</a></div></div>
<div class="ttc" id="aclass_sfx_1_1_c_sfx_manager_html_a5bf107970a5bb29255c63518247c57fc"><div class="ttname"><a href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#a5bf107970a5bb29255c63518247c57fc">Sfx::CSfxManager::PositionalSoundSilenceMode</a></div><div class="ttdeci">bool PositionalSoundSilenceMode()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbd/soundfx_8cpp_source.html#l00535">soundfx.cpp:535</a></div></div>
<div class="ttc" id="astruct_sfx_1_1s_volume_html_a66d6e7c4f6bfc77db6e4215eb9ec0d61"><div class="ttname"><a href="../../da/d13/struct_sfx_1_1s_volume.html#a66d6e7c4f6bfc77db6e4215eb9ec0d61">Sfx::sVolume::SetChannelVolume</a></div><div class="ttdeci">void SetChannelVolume(uint32 chan, float vol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/soundfx_8h_source.html#l00208">soundfx.h:208</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a07be80e6a4854bbe228f60bc3f20f66c"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a07be80e6a4854bbe228f60bc3f20f66c">Pcm::TrackUpdate</a></div><div class="ttdeci">void TrackUpdate(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01797">music.cpp:1797</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a1849f9d35d54cafbd8d7e41f32f964c1"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1849f9d35d54cafbd8d7e41f32f964c1">Pcm::CStreamFrameAmp::is_allocated</a></div><div class="ttdeci">bool is_allocated() const</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00263">music.h:263</a></div></div>
<div class="ttc" id="aclass_file_1_1_c_async_file_loader_html_ab1ad23da6afa5731552c99b632451b98"><div class="ttname"><a href="../../df/d7a/class_file_1_1_c_async_file_loader.html#ab1ad23da6afa5731552c99b632451b98">File::CAsyncFileLoader::sOpen</a></div><div class="ttdeci">static CAsyncFileHandle * sOpen(const char *filename, bool blocking=true, int priority=DEFAULT_ASYNC_PRIORITY)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d56/_async_filesys_8cpp_source.html#l00575">AsyncFilesys.cpp:575</a></div></div>
<div class="ttc" id="anamespace_replay_html_a6b47d0a120194f57ffb83dac0db88b42"><div class="ttname"><a href="../../d9/d29/namespace_replay.html#a6b47d0a120194f57ffb83dac0db88b42">Replay::WritePlayStream</a></div><div class="ttdeci">void WritePlayStream(uint32 checksum, Sfx::sVolume *p_volume, float pitch, int priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8f/replay_8cpp_source.html#l03526">replay.cpp:3526</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a01c3edefbbc2c808b0dc621cd299f2e6"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a01c3edefbbc2c808b0dc621cd299f2e6">Pcm::sGenerateRandomSongOrder</a></div><div class="ttdeci">static void sGenerateRandomSongOrder(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00320">music.cpp:320</a></div></div>
<div class="ttc" id="anamespace_pcm_html_abf74335d92cd49a2128f958b1ed52424"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#abf74335d92cd49a2128f958b1ed52424">Pcm::PCMAudio_GetStreamStatus</a></div><div class="ttdeci">int PCMAudio_GetStreamStatus(int whichStream)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l02050">p_music.cpp:2050</a></div></div>
<div class="ttc" id="a_defines_8h_html_a91ad9478d81a7aaf2593e8d9c3d06a14"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a></div><div class="ttdeci">unsigned int uint</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00133">Defines.h:133</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac4dbd46e133f6134416ffc8c9b379df4"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac4dbd46e133f6134416ffc8c9b379df4">Pcm::UseUserSoundtrack</a></div><div class="ttdeci">void UseUserSoundtrack(int soundtrack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00392">music.cpp:392</a></div></div>
<div class="ttc" id="aclass_gfx_1_1_camera_html"><div class="ttname"><a href="../../dd/daa/class_gfx_1_1_camera.html">Gfx::Camera</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/df6/camera_8h_source.html#l00043">camera.h:43</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ade23943fd580b1856f47b41e53af2443"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ade23943fd580b1856f47b41e53af2443">Pcm::gMusicVolume</a></div><div class="ttdeci">static float gMusicVolume</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00121">music.cpp:121</a></div></div>
<div class="ttc" id="anamespace_script_html_a84ac1eedf37ab70be269e8fcbdc6ea21affb8075a5cc58952e049bed37c3b7c56"><div class="ttname"><a href="../../d1/d54/namespace_script.html#a84ac1eedf37ab70be269e8fcbdc6ea21affb8075a5cc58952e049bed37c3b7c56">Script::ESYMBOLTYPE_STRING</a></div><div class="ttdeci">@ ESYMBOLTYPE_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc0/symboltype_8h_source.html#l00012">symboltype.h:12</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a5c8509c70daa76c24db230f9fd080d8d"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a5c8509c70daa76c24db230f9fd080d8d">Pcm::GetVolume</a></div><div class="ttdeci">float GetVolume(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01407">music.cpp:1407</a></div></div>
<div class="ttc" id="ap__ezcommon_8h_html_a7441ef0865bcb3db9b8064dd7375c1ea"><div class="ttname"><a href="../../d6/d01/p__ezcommon_8h.html#a7441ef0865bcb3db9b8064dd7375c1ea">id</a></div><div class="ttdeci">int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d01/p__ezcommon_8h_source.html#l00003">p_ezcommon.h:3</a></div></div>
<div class="ttc" id="anamespace_pcm_html_affff458eef99ae37be1a29ec137589d7"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#affff458eef99ae37be1a29ec137589d7">Pcm::SetStreamVolume</a></div><div class="ttdeci">bool SetStreamVolume(int objStreamIndex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01070">music.cpp:1070</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a06b140ff395b985e8a20f605f23f5537"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a06b140ff395b985e8a20f605f23f5537">Pcm::PreLoadStreamDone</a></div><div class="ttdeci">bool PreLoadStreamDone(uint32 streamID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00952">music.cpp:952</a></div></div>
<div class="ttc" id="atimer_8h_html"><div class="ttname"><a href="../../d5/dd0/timer_8h.html">timer.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2da29c5293d874bab99913b004769904"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2da29c5293d874bab99913b004769904">Pcm::PCMAudio_SetMusicVolume</a></div><div class="ttdeci">int PCMAudio_SetMusicVolume(float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l00891">p_music.cpp:891</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ada3ae27d8633a2dbdc1d89da282e7841"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ada3ae27d8633a2dbdc1d89da282e7841">Pcm::RandomTrackUpdate</a></div><div class="ttdeci">void RandomTrackUpdate(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01622">music.cpp:1622</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_stream_component_html"><div class="ttname"><a href="../../d2/db8/class_obj_1_1_c_stream_component.html">Obj::CStreamComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d97/_stream_component_8h_source.html#l00040">StreamComponent.h:40</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab377e062f8f6e7594ab229bdff536539"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab377e062f8f6e7594ab229bdff536539">Pcm::GetTrackName</a></div><div class="ttdeci">const char * GetTrackName(int trackNum, int whichList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02145">music.cpp:2145</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a4df53010f60044dc7ec5e4a569d1f692"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a4df53010f60044dc7ec5e4a569d1f692">Pcm::StreamExists</a></div><div class="ttdeci">bool StreamExists(uint32 streamChecksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02264">music.cpp:2264</a></div></div>
<div class="ttc" id="anamespace_config_html_a417f0cda0d89952b0a8d74e3ad505781"><div class="ttname"><a href="../../d0/d31/namespace_config.html#a417f0cda0d89952b0a8d74e3ad505781">Config::CD</a></div><div class="ttdeci">bool CD()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/config_8h_source.html#l00087">config.h:87</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00088">vector.h:88</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_a4c4fc4abbd51ae3e4ad682b358eade4f"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a4c4fc4abbd51ae3e4ad682b358eade4f">Pcm::CurrentStreamInfo::p_frame_amp</a></div><div class="ttdeci">CStreamFrameAmp * p_frame_amp</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00065">music.h:65</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_title_html"><div class="ttname"><a href="../../db/df5/struct_pcm_1_1_track_title.html">Pcm::TrackTitle</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00073">music.h:73</a></div></div>
<div class="ttc" id="anamespace_script_html_ac722bae4acb2ce23888cb428818f12af"><div class="ttname"><a href="../../d1/d54/namespace_script.html#ac722bae4acb2ce23888cb428818f12af">Script::GetInt</a></div><div class="ttdeci">int GetInt(uint32 checksum, bool assert)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7c/symboltable_8cpp_source.html#l00740">symboltable.cpp:740</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0ad0a6eb6cdafd27f2bf0565c3f5c9d3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0ad0a6eb6cdafd27f2bf0565c3f5c9d3">Pcm::UsingCD</a></div><div class="ttdeci">bool UsingCD(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01184">music.cpp:1184</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2ab0d346a0e02983b900f5d504cceb48"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2ab0d346a0e02983b900f5d504cceb48">Pcm::PCMAudio_LoadMusicHeader</a></div><div class="ttdeci">bool PCMAudio_LoadMusicHeader(const char *nameOfFile)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l00933">p_music.cpp:933</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8fe283d98f571b79b3547c94d5285028"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8fe283d98f571b79b3547c94d5285028">Pcm::PCMAudio_PlayStream</a></div><div class="ttdeci">bool PCMAudio_PlayStream(uint32 checksum, int whichStream, float volumeL, float volumeR, float fPitch, bool preload)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01603">p_music.cpp:1603</a></div></div>
<div class="ttc" id="achecksum_8h_html"><div class="ttname"><a href="../../dc/d31/checksum_8h.html">checksum.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ae2d9fd67c9b765c4f5d7c77500e0598d"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ae2d9fd67c9b765c4f5d7c77500e0598d">Pcm::s_xbox_random_index</a></div><div class="ttdeci">static uint32 s_xbox_random_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00147">music.cpp:147</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a1d6ca91f92ee520da5d0d5da709912a5"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a1d6ca91f92ee520da5d0d5da709912a5">Pcm::CStreamFrameAmp::GetSamples</a></div><div class="ttdeci">const uint8 * GetSamples() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02370">music.cpp:2370</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a63e9dbde99082ab1cce22fd8ce191c7b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a63e9dbde99082ab1cce22fd8ce191c7b">Pcm::gCurrentStreamInfo</a></div><div class="ttdeci">CurrentStreamInfo gCurrentStreamInfo[NUM_STREAMS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00112">music.cpp:112</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac732ac0967f743ea1c5ace8113322429"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac732ac0967f743ea1c5ace8113322429">Pcm::PCMAudio_TrackExists</a></div><div class="ttdeci">bool PCMAudio_TrackExists(const char *pTrackName, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l00945">p_music.cpp:945</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a8198e7faf59074f75b5448e8405fd061"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a8198e7faf59074f75b5448e8405fd061">Pcm::GetTrackForbiddenStatus</a></div><div class="ttdeci">int GetTrackForbiddenStatus(int trackNum, int whichList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02110">music.cpp:2110</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_manager_html_a4c943070f0b76f3492e48cbbc296be22a1a216d864f208c4a8768b6013e6a0c2d"><div class="ttname"><a href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a4c943070f0b76f3492e48cbbc296be22a1a216d864f208c4a8768b6013e6a0c2d">Pcm::CStreamFrameAmpManager::vMAX_BUFFERS</a></div><div class="ttdeci">@ vMAX_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00243">music.h:243</a></div></div>
<div class="ttc" id="anamespace_pcm_html_af0bafbd0b771375d49a4a76ae3a9a83b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#af0bafbd0b771375d49a4a76ae3a9a83b">Pcm::NoMusicPlease</a></div><div class="ttdeci">bool NoMusicPlease()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00075">music.cpp:75</a></div></div>
<div class="ttc" id="anamespace_config_html_a6cdbd8b148c494cebe8d9f141d1896a1"><div class="ttname"><a href="../../d0/d31/namespace_config.html#a6cdbd8b148c494cebe8d9f141d1896a1">Config::GetHardware</a></div><div class="ttdeci">EHardware GetHardware()</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/config_8h_source.html#l00075">config.h:75</a></div></div>
<div class="ttc" id="anamespace_pcm_html_aa1b6cf13c634e14a44c204c508ed2bfb"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#aa1b6cf13c634e14a44c204c508ed2bfb">Pcm::PreLoadStream</a></div><div class="ttdeci">uint32 PreLoadStream(uint32 checksum, int priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00919">music.cpp:919</a></div></div>
<div class="ttc" id="asymboltable_8h_html"><div class="ttname"><a href="../../d6/d98/symboltable_8h.html">symboltable.h</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_info_html_a73457d0eb9a8526ecfe79b6bb89e4335"><div class="ttname"><a href="../../d7/d83/struct_pcm_1_1_track_info.html#a73457d0eb9a8526ecfe79b6bb89e4335">Pcm::TrackInfo::trackName</a></div><div class="ttdeci">char trackName[MAX_TRACKNAME_STRING_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00070">music.h:70</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html">Pcm::CStreamFrameAmp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00200">music.h:200</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7b71c609260dd8961cffc8a8e140430d"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7b71c609260dd8961cffc8a8e140430d">Pcm::shuffle_random_songs</a></div><div class="ttdeci">static bool shuffle_random_songs</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00152">music.cpp:152</a></div></div>
<div class="ttc" id="aclass_sfx_1_1_c_sfx_manager_html"><div class="ttname"><a href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html">Sfx::CSfxManager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/soundfx_8h_source.html#l00223">soundfx.h:223</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a53373ded2e68b3314d3d15b4fc1f5232"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a53373ded2e68b3314d3d15b4fc1f5232">Pcm::s_xbox_play_user_soundtracks</a></div><div class="ttdeci">static bool s_xbox_play_user_soundtracks</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00143">music.cpp:143</a></div></div>
<div class="ttc" id="aclass_file_1_1_c_async_file_loader_html_a81e7a1b6677d751061272e907e5b5295"><div class="ttname"><a href="../../df/d7a/class_file_1_1_c_async_file_loader.html#a81e7a1b6677d751061272e907e5b5295">File::CAsyncFileLoader::sClose</a></div><div class="ttdeci">static bool sClose(CAsyncFileHandle *p_file_handle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d56/_async_filesys_8cpp_source.html#l00602">AsyncFilesys.cpp:602</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a4e4d82b71d3602a00c3380500f9a567f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a4e4d82b71d3602a00c3380500f9a567f">Pcm::gCurrentTrackList</a></div><div class="ttdeci">static int gCurrentTrackList</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00119">music.cpp:119</a></div></div>
<div class="ttc" id="astandard_8cpp_html_a5fc8fd1788f18ada61dfda9f171c5a1a"><div class="ttname"><a href="../../df/d92/standard_8cpp.html#a5fc8fd1788f18ada61dfda9f171c5a1a">printf</a></div><div class="ttdeci">printf(&quot;%c\n&quot;, *p_itemsInList)</div></div>
<div class="ttc" id="anamespace_pcm_html_a52feb59b6c08a451fcfe6543e0f20fb2"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a52feb59b6c08a451fcfe6543e0f20fb2">Pcm::UseStandardSoundtrack</a></div><div class="ttdeci">void UseStandardSoundtrack(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00419">music.cpp:419</a></div></div>
<div class="ttc" id="astruct_sfx_1_1s_volume_html_aff8f451f84d1facd785aaad61c9bb991"><div class="ttname"><a href="../../da/d13/struct_sfx_1_1s_volume.html#aff8f451f84d1facd785aaad61c9bb991">Sfx::sVolume::GetLoudestChannel</a></div><div class="ttdeci">float GetLoudestChannel(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbd/soundfx_8cpp_source.html#l00236">soundfx.cpp:236</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a91859ab4833d43a3eed785564840489c"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a91859ab4833d43a3eed785564840489c">Pcm::PCMAudio_StopStreams</a></div><div class="ttdeci">void PCMAudio_StopStreams(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01796">p_music.cpp:1796</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a67c6c833ffdd85e76c4e2b8ba2b98519"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a67c6c833ffdd85e76c4e2b8ba2b98519">Pcm::GetPlaylist</a></div><div class="ttdeci">void GetPlaylist(uint64 *flags1, uint64 *flags2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01996">music.cpp:1996</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a6edcea4d67aa18520e2e4f884cde67f3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a6edcea4d67aa18520e2e4f884cde67f3">Pcm::StreamLoading</a></div><div class="ttdeci">bool StreamLoading(uint32 streamID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02271">music.cpp:2271</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7b2cd5bc52989b31df91a22c66e6be5ca5fe52ed2a52767ac51d9064ab8ee04e4"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7b2cd5bc52989b31df91a22c66e6be5ca5fe52ed2a52767ac51d9064ab8ee04e4">Pcm::MUSIC_CHANNEL</a></div><div class="ttdeci">@ MUSIC_CHANNEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dae/ngc_2p__music_8h_source.html#l00017">p_music.h:17</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2f7105f989ea3de38f1c0a2f19aa3325"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2f7105f989ea3de38f1c0a2f19aa3325">Pcm::SetCurrentTrack</a></div><div class="ttdeci">void SetCurrentTrack(int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02314">music.cpp:2314</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_manager_html_a3bcd9ff025b0e98ebf8f45b089ea86ff"><div class="ttname"><a href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#a3bcd9ff025b0e98ebf8f45b089ea86ff">Pcm::CStreamFrameAmpManager::sFreeFrameAmp</a></div><div class="ttdeci">static bool sFreeFrameAmp(uint32 stream_checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02514">music.cpp:2514</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html">Pcm::TrackList</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00078">music.h:78</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a3d9777d4501fc1f3d0e6b056b060b9a8"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a3d9777d4501fc1f3d0e6b056b060b9a8">Pcm::CStreamFrameAmp::m_num_samples</a></div><div class="ttdeci">int m_num_samples</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00228">music.h:228</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a09ec8aa54db3e5f484e9166fb48ab6bc"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a09ec8aa54db3e5f484e9166fb48ab6bc">Pcm::PCMAudio_SetStreamPitch</a></div><div class="ttdeci">bool PCMAudio_SetStreamPitch(float fPitch, int whichStream)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01762">p_music.cpp:1762</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_a3872f7f0a9ebcc695745aabeefab2796"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#a3872f7f0a9ebcc695745aabeefab2796">Script::CStruct::AddComponent</a></div><div class="ttdeci">void AddComponent(CComponent *p_comp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l00896">struct.cpp:896</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab35c18f9ce4bfda6d0c40ff982b81063"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab35c18f9ce4bfda6d0c40ff982b81063">Pcm::PlayTrack</a></div><div class="ttdeci">void PlayTrack(const char *filename, bool loop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01213">music.cpp:1213</a></div></div>
<div class="ttc" id="anamespace_pcm_html_aaea5677a0457cc5c889c855dccff712b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#aaea5677a0457cc5c889c855dccff712b">Pcm::gTrackName</a></div><div class="ttdeci">static char gTrackName[MAX_TRACKNAME_STRING_LENGTH]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00120">music.cpp:120</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a95df7065d504f24a8d86e7ec7c25132c"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a95df7065d504f24a8d86e7ec7c25132c">Pcm::_StartPreLoadedMusicStream</a></div><div class="ttdeci">bool _StartPreLoadedMusicStream(float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00739">music.cpp:739</a></div></div>
<div class="ttc" id="anamespace_mth_html_ad62429ac906222803b02da8cc801b1bb"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#ad62429ac906222803b02da8cc801b1bb">Mth::Rnd</a></div><div class="ttdeci">int Rnd(int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d2d/math_8cpp_source.html#l00170">math.cpp:170</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a38a6f4993e760ae21cac3797c414ee10"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a38a6f4993e760ae21cac3797c414ee10">Pcm::GetChannelFromID</a></div><div class="ttdeci">int GetChannelFromID(uint32 id, bool assert_if_duplicate=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00172">music.cpp:172</a></div></div>
<div class="ttc" id="anamespace_pcm_html_adeac7464332d724b50072dbd1e490b4f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#adeac7464332d724b50072dbd1e490b4f">Pcm::SetMusicStreamVolume</a></div><div class="ttdeci">void SetMusicStreamVolume(float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01413">music.cpp:1413</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a9de7ec5d17ae1724820ec3cd372011b9"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a9de7ec5d17ae1724820ec3cd372011b9">Pcm::CStreamFrameAmp::free</a></div><div class="ttdeci">bool free()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02442">music.cpp:2442</a></div></div>
<div class="ttc" id="aclass_sfx_1_1_c_sfx_manager_html_a9620548fa1b9bcfb7f713e4ecdbe7d56"><div class="ttname"><a href="../../d2/d5f/class_sfx_1_1_c_sfx_manager.html#a9620548fa1b9bcfb7f713e4ecdbe7d56">Sfx::CSfxManager::GetMainVolume</a></div><div class="ttdeci">float GetMainVolume(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dbd/soundfx_8cpp_source.html#l01196">soundfx.cpp:1196</a></div></div>
<div class="ttc" id="anamespace_tmr_html_ac753b199dc166fdd9758ca5d04725d95"><div class="ttname"><a href="../../d1/d0d/namespace_tmr.html#ac753b199dc166fdd9758ca5d04725d95">Tmr::GetRenderFrame</a></div><div class="ttdeci">uint64 GetRenderFrame(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/win32functions_8cpp_source.html#l00009">win32functions.cpp:9</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_a0e6b3c086f0d8729c8cc4c946b87ff8e"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a0e6b3c086f0d8729c8cc4c946b87ff8e">Pcm::CurrentStreamInfo::dropoffFunction</a></div><div class="ttdeci">EDropoffFunc dropoffFunction</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00064">music.h:64</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa01a8643f022aeb2e63b45b1f5fa3514a">Pcm::PCM_STATUS_FREE</a></div><div class="ttdeci">@ PCM_STATUS_FREE</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dae/ngc_2p__music_8h_source.html#l00060">p_music.h:60</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_ac6963cacf147db71ad4d6ff414d3dd40"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#ac6963cacf147db71ad4d6ff414d3dd40">Pcm::CurrentStreamInfo::voice</a></div><div class="ttdeci">int voice</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00060">music.h:60</a></div></div>
<div class="ttc" id="anamespace_pcm_html_aedada8c569c3338fe9f6fd2ca93c2635"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#aedada8c569c3338fe9f6fd2ca93c2635">Pcm::PermTrackTitle</a></div><div class="ttdeci">TrackTitle PermTrackTitle[MAX_NUM_TRACKS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00114">music.cpp:114</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_object_html_ad39f6409df17fb6ee459d1071258c645"><div class="ttname"><a href="../../df/dde/class_obj_1_1_c_object.html#ad39f6409df17fb6ee459d1071258c645">Obj::CObject::GetID</a></div><div class="ttdeci">uint32 GetID() const</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d10/object_8h_source.html#l00130">object.h:130</a></div></div>
<div class="ttc" id="asoundfx_8h_html_aa353aa07442af82949943fb5e2261443"><div class="ttname"><a href="../../d2/d00/soundfx_8h.html#aa353aa07442af82949943fb5e2261443">EDropoffFunc</a></div><div class="ttdeci">EDropoffFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d00/soundfx_8h_source.html#l00107">soundfx.h:107</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a6cfb7d70a6d8a9c0381060ef3db68e03"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a6cfb7d70a6d8a9c0381060ef3db68e03">Pcm::s_xbox_user_soundtrack_random</a></div><div class="ttdeci">static bool s_xbox_user_soundtrack_random</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00146">music.cpp:146</a></div></div>
<div class="ttc" id="aclass_file_1_1_c_async_file_handle_html_a6b47a574088d7ca009661485d7080192"><div class="ttname"><a href="../../d8/dd3/class_file_1_1_c_async_file_handle.html#a6b47a574088d7ca009661485d7080192">File::CAsyncFileHandle::GetFileSize</a></div><div class="ttdeci">size_t GetFileSize(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d56/_async_filesys_8cpp_source.html#l00187">AsyncFilesys.cpp:187</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a62f6485d76de543f2c3dfc9ed867d647"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a62f6485d76de543f2c3dfc9ed867d647">Pcm::StreamAvailable</a></div><div class="ttdeci">bool StreamAvailable(int whichStream)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02225">music.cpp:2225</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ae985279ab7d217c22c62a838a9984f7d"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ae985279ab7d217c22c62a838a9984f7d">Pcm::SetRandomMode</a></div><div class="ttdeci">void SetRandomMode(int randomModeOn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01537">music.cpp:1537</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html">Pcm::CurrentStreamInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00054">music.h:54</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab672abb1449a04f9be713c625e1f6225abb27329eb68d24e557696764ec03b0d5"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225abb27329eb68d24e557696764ec03b0d5">Pcm::MUSIC_STREAM_TYPE_NORMAL</a></div><div class="ttdeci">@ MUSIC_STREAM_TYPE_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00049">music.h:49</a></div></div>
<div class="ttc" id="anamespace_config_html_afde1a372ebd0f2464fbc488b65f90d2dab13cb105a2ee655459bc740361f0ec12"><div class="ttname"><a href="../../d0/d31/namespace_config.html#afde1a372ebd0f2464fbc488b65f90d2dab13cb105a2ee655459bc740361f0ec12">Config::HARDWARE_PS2_PROVIEW</a></div><div class="ttdeci">@ HARDWARE_PS2_PROVIEW</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d16/config_8h_source.html#l00051">config.h:51</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a393f5c5a64835d651fa7ac8fa6282defa34e574aaaacc8f7eb63460d2783ffb6e"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a393f5c5a64835d651fa7ac8fa6282defa34e574aaaacc8f7eb63460d2783ffb6e">Pcm::PCM_STATUS_LOADING</a></div><div class="ttdeci">@ PCM_STATUS_LOADING</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dae/ngc_2p__music_8h_source.html#l00062">p_music.h:62</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_aa195b1c2bb42517390d7c8002bbf6fd2"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#aa195b1c2bb42517390d7c8002bbf6fd2">Pcm::CurrentStreamInfo::start_frame</a></div><div class="ttdeci">uint32 start_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00062">music.h:62</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_a2a4944a6b5c12333c6ef3afc504fbabea9559aee2bdc4324dc06e00802c8402a6"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#a2a4944a6b5c12333c6ef3afc504fbabea9559aee2bdc4324dc06e00802c8402a6">Pcm::CStreamFrameAmp::vMAX_SAMPLES</a></div><div class="ttdeci">@ vMAX_SAMPLES</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00207">music.h:207</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a7d23de9649e3df445ab6f9b09d96bf7f">Pcm::MUSIC_STREAM_TYPE_NONE</a></div><div class="ttdeci">@ MUSIC_STREAM_TYPE_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00048">music.h:48</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab9a37bbf752c43628b80328fecea0625"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab9a37bbf752c43628b80328fecea0625">Pcm::PCMAudio_StopMusic</a></div><div class="ttdeci">void PCMAudio_StopMusic(bool waitPlease)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01304">p_music.cpp:1304</a></div></div>
<div class="ttc" id="askate_8h_html"><div class="ttname"><a href="../../df/d23/skate_8h.html">skate.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac6919af76b351c3f71a01a4a2c1819cd"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac6919af76b351c3f71a01a4a2c1819cd">Pcm::StopMusic</a></div><div class="ttdeci">void StopMusic(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00205">music.cpp:205</a></div></div>
<div class="ttc" id="amusic_8h_html"><div class="ttname"><a href="../../db/d10/music_8h.html">music.h</a></div></div>
<div class="ttc" id="anamespace_script_html_aa0c62774649e1e3abcab019ea335a3ad"><div class="ttname"><a href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a></div><div class="ttdeci">int GetInteger(uint32 checksum, EAssertType assert)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7c/symboltable_8cpp_source.html#l00514">symboltable.cpp:514</a></div></div>
<div class="ttc" id="a_defines_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00134">Defines.h:134</a></div></div>
<div class="ttc" id="aconfig_8h_html"><div class="ttname"><a href="../../db/d16/config_8h.html">config.h</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_aaf07de2d10512808336ebad03ea70694"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#aaf07de2d10512808336ebad03ea70694">Pcm::TrackList::trackForbidden0</a></div><div class="ttdeci">uint64 trackForbidden0</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00084">music.h:84</a></div></div>
<div class="ttc" id="ascript_8h_html"><div class="ttname"><a href="../../de/d7f/script_8h.html">script.h</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_abe00f79ec264f160ccba71ea3794a1cd"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#abe00f79ec264f160ccba71ea3794a1cd">Pcm::CStreamFrameAmp::load</a></div><div class="ttdeci">bool load(uint32 stream_checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02405">music.cpp:2405</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ae11c6f947d002653d646ed6be25fe683"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ae11c6f947d002653d646ed6be25fe683">Pcm::PCMAudio_GetMusicStatus</a></div><div class="ttdeci">int PCMAudio_GetMusicStatus(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01367">p_music.cpp:1367</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7c9757f2ec8739f4da9760fc28405912a349002cd75ce53a4465e8c7266d30988">Pcm::TRACKLIST_LEVEL_SPECIFIC</a></div><div class="ttdeci">@ TRACKLIST_LEVEL_SPECIFIC</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00168">music.h:168</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a18a60bdc2fe052b37ad788a0114ba2d8"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a18a60bdc2fe052b37ad788a0114ba2d8">Pcm::PCMAudio_Pause</a></div><div class="ttdeci">void PCMAudio_Pause(bool pause, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01415">p_music.cpp:1415</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_a0702c713d216d25a4e5399e68db7a0f8"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#a0702c713d216d25a4e5399e68db7a0f8">Pcm::TrackList::numTracks</a></div><div class="ttdeci">int numTracks</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00082">music.h:82</a></div></div>
<div class="ttc" id="anamespace_pcm_html_adc8c3064bf3813334bbf1896e7f3dffa"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#adc8c3064bf3813334bbf1896e7f3dffa">Pcm::PCMAudio_SetStreamVolume</a></div><div class="ttdeci">bool PCMAudio_SetStreamVolume(float volumeL, float volumeR, int whichStream)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01723">p_music.cpp:1723</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a54b21a6865012eaca637e62f758e442c"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a54b21a6865012eaca637e62f758e442c">Pcm::gLastStreamChannelPlayed</a></div><div class="ttdeci">static int gLastStreamChannelPlayed</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00110">music.cpp:110</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_a1e85eee5e600de8358db26f6c777e42d"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#a1e85eee5e600de8358db26f6c777e42d">Script::CStruct::GetInteger</a></div><div class="ttdeci">bool GetInteger(uint32 nameChecksum, int *p_integerValue, EAssertType assert=NO_ASSERT) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01480">struct.cpp:1480</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2280b28a97d1dd91d8697507b5e3829f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2280b28a97d1dd91d8697507b5e3829f">Pcm::StreamPlaying</a></div><div class="ttdeci">bool StreamPlaying(uint32 streamID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02295">music.cpp:2295</a></div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_manager_html_af602e825f53aaa6c5005c57148a29024"><div class="ttname"><a href="../../de/ddd/class_pcm_1_1_c_stream_frame_amp_manager.html#af602e825f53aaa6c5005c57148a29024">Pcm::CStreamFrameAmpManager::sLoadFrameAmp</a></div><div class="ttdeci">static CStreamFrameAmp * sLoadFrameAmp(uint32 stream_checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02467">music.cpp:2467</a></div></div>
<div class="ttc" id="anamespace_pcm_html_af405ca6aedfbd64805e40505bd0004ab"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#af405ca6aedfbd64805e40505bd0004ab">Pcm::Update</a></div><div class="ttdeci">void Update(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01890">music.cpp:1890</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab672abb1449a04f9be713c625e1f6225a9f91ec10c6f721e7b097b9a8a3529209"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab672abb1449a04f9be713c625e1f6225a9f91ec10c6f721e7b097b9a8a3529209">Pcm::MUSIC_STREAM_TYPE_PRELOAD</a></div><div class="ttdeci">@ MUSIC_STREAM_TYPE_PRELOAD</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00050">music.h:50</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ab445361c3e2ae21eb9d577e4ba69ff2f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ab445361c3e2ae21eb9d577e4ba69ff2f">Pcm::StartPreLoadedMusicStream</a></div><div class="ttdeci">bool StartPreLoadedMusicStream(float volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01051">music.cpp:1051</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac2361038e1581be95a88ac2669e792d3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac2361038e1581be95a88ac2669e792d3">Pcm::PCMAudio_PreLoadMusicStreamDone</a></div><div class="ttdeci">bool PCMAudio_PreLoadMusicStreamDone(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l02010">p_music.cpp:2010</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_title_html_a59ee86f530d7a44ced5cf4b55e57f7a6"><div class="ttname"><a href="../../db/df5/struct_pcm_1_1_track_title.html#a59ee86f530d7a44ced5cf4b55e57f7a6">Pcm::TrackTitle::trackTitle</a></div><div class="ttdeci">char trackTitle[TRACK_TITLE_MAX_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00075">music.h:75</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_ad8ac4c4bc33b01855b82c7c618f9e163"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#ad8ac4c4bc33b01855b82c7c618f9e163">Pcm::TrackList::trackForbidden1</a></div><div class="ttdeci">uint64 trackForbidden1</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00085">music.h:85</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a7f6846d8438862b470677e9a6f278941"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a7f6846d8438862b470677e9a6f278941">Pcm::random_song_index</a></div><div class="ttdeci">static int random_song_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00154">music.cpp:154</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_stream_component_html_a0108371dc47ea5f5a0da20e047449b90"><div class="ttname"><a href="../../d2/db8/class_obj_1_1_c_stream_component.html#a0108371dc47ea5f5a0da20e047449b90">Obj::CStreamComponent::mStreamingID</a></div><div class="ttdeci">uint32 mStreamingID[MAX_STREAMS_PER_OBJECT]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d97/_stream_component_8h_source.html#l00065">StreamComponent.h:65</a></div></div>
<div class="ttc" id="anamespace_script_html_aa331360f088c15972ac441ecb8b40cd9"><div class="ttname"><a href="../../d1/d54/namespace_script.html#aa331360f088c15972ac441ecb8b40cd9">Script::GenerateCRC</a></div><div class="ttdeci">uint32 GenerateCRC(const char *p_string)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0f/script_8cpp_source.html#l03521">script.cpp:3521</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a579315dceed5aeba0d7d4d4828a121f5"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a579315dceed5aeba0d7d4d4828a121f5">Pcm::GetActiveTrackList</a></div><div class="ttdeci">int GetActiveTrackList(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02194">music.cpp:2194</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ad4838fc8a49961622c9b0eaef35d0739"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ad4838fc8a49961622c9b0eaef35d0739">Pcm::_PreLoadMusicStream</a></div><div class="ttdeci">bool _PreLoadMusicStream(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00725">music.cpp:725</a></div></div>
<div class="ttc" id="anamespace_script_html_ae80ed69ea4edcbcbbbd4985a6efdcd6e"><div class="ttname"><a href="../../d1/d54/namespace_script.html#ae80ed69ea4edcbcbbbd4985a6efdcd6e">Script::FindChecksumName</a></div><div class="ttdeci">const char * FindChecksumName(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d13/checksum_8cpp_source.html#l00252">checksum.cpp:252</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a44a3393eb63498717764bce8c583d8c3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a44a3393eb63498717764bce8c583d8c3">Pcm::_PlayStream</a></div><div class="ttdeci">int _PlayStream(uint32 checksum, Sfx::sVolume *p_volume, float pitch, int priority, uint32 controlID, bool preload_only)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00617">music.cpp:617</a></div></div>
<div class="ttc" id="anamespace_pcm_html_aa2312772fae6880b4e1dcf4cf379ad4b"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#aa2312772fae6880b4e1dcf4cf379ad4b">Pcm::gMusicLooping</a></div><div class="ttdeci">static bool gMusicLooping</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00124">music.cpp:124</a></div></div>
<div class="ttc" id="anamespace_pcm_html_aea178084ee3ed71abe7dbfd2df8bfea4"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#aea178084ee3ed71abe7dbfd2df8bfea4">Pcm::GetSoundtrackNumSongs</a></div><div class="ttdeci">unsigned int GetSoundtrackNumSongs(int soundtrack)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dde/p__soundtrack_8cpp_source.html#l00167">p_soundtrack.cpp:167</a></div></div>
<div class="ttc" id="anamespace_dbg_html_ab406a8cc16de5046c7d9fd09c9de5e22"><div class="ttname"><a href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">Dbg::sprintf</a></div><div class="ttdeci">sprintf(tmp1, &quot;FILE:      %s(%d) &quot;, file, line)</div></div>
<div class="ttc" id="aclass_pcm_1_1_c_stream_frame_amp_html_aca54b2df52957ccb284a9dd14a265716"><div class="ttname"><a href="../../dd/d0a/class_pcm_1_1_c_stream_frame_amp.html#aca54b2df52957ccb284a9dd14a265716">Pcm::CStreamFrameAmp::Init</a></div><div class="ttdeci">void Init()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02346">music.cpp:2346</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a407d787f47ba35f9f6ee73609b3946ea"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a407d787f47ba35f9f6ee73609b3946ea">Pcm::AddTrackToPlaylist</a></div><div class="ttdeci">void AddTrackToPlaylist(const char *trackName, int whichList, const char *trackTitle)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01439">music.cpp:1439</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a659c4738c99389e5d9e7bd68e66149dc"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a659c4738c99389e5d9e7bd68e66149dc">Pcm::StopStreamFromID</a></div><div class="ttdeci">void StopStreamFromID(uint32 streamID)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00236">music.cpp:236</a></div></div>
<div class="ttc" id="anamespace_script_html_a84ac1eedf37ab70be269e8fcbdc6ea21af2eca5380b5f9edf380b1ea9121c03eb"><div class="ttname"><a href="../../d1/d54/namespace_script.html#a84ac1eedf37ab70be269e8fcbdc6ea21af2eca5380b5f9edf380b1ea9121c03eb">Script::ESYMBOLTYPE_INTEGER</a></div><div class="ttdeci">@ ESYMBOLTYPE_INTEGER</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dc0/symboltype_8h_source.html#l00010">symboltype.h:10</a></div></div>
<div class="ttc" id="aclass_game_1_1_c_game_mode_html_a5d9234e8e4f1df7f88eb224cefca3b87"><div class="ttname"><a href="../../d0/d21/class_game_1_1_c_game_mode.html#a5d9234e8e4f1df7f88eb224cefca3b87">Game::CGameMode::IsFrontEnd</a></div><div class="ttdeci">bool IsFrontEnd()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dcd/_game_mode_8cpp_source.html#l00691">GameMode.cpp:691</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a77bd5c8fd47c96186832ffbf06df7075"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a77bd5c8fd47c96186832ffbf06df7075">Pcm::PCMAudio_StartPreLoadedStream</a></div><div class="ttdeci">bool PCMAudio_StartPreLoadedStream(int whichStream, float volumeL, float volumeR, float pitch)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01857">p_music.cpp:1857</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a0872a5c505eab0b910b6ff898618d73f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a0872a5c505eab0b910b6ff898618d73f">Pcm::gMusicStreamVolume</a></div><div class="ttdeci">static float gMusicStreamVolume</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00122">music.cpp:122</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a4ca02b853b494f2c40efc49fdc375a5f"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a4ca02b853b494f2c40efc49fdc375a5f">Pcm::GetSoundtrackName</a></div><div class="ttdeci">const WCHAR * GetSoundtrackName(int soundtrack)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dde/p__soundtrack_8cpp_source.html#l00152">p_soundtrack.cpp:152</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ac77adb07df4cd02d0a83fc32daeb7cac"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ac77adb07df4cd02d0a83fc32daeb7cac">Pcm::IDAvailable</a></div><div class="ttdeci">bool IDAvailable(uint32 id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00159">music.cpp:159</a></div></div>
<div class="ttc" id="anamespace_replay_html_a3a69e13e44771901b80376faac3e61ee"><div class="ttname"><a href="../../d9/d29/namespace_replay.html#a3a69e13e44771901b80376faac3e61ee">Replay::WriteStopStream</a></div><div class="ttdeci">void WriteStopStream(int channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8f/replay_8cpp_source.html#l03549">replay.cpp:3549</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_current_stream_info_html_a10d34ab3542840908644591495bbacfc"><div class="ttname"><a href="../../d1/db4/struct_pcm_1_1_current_stream_info.html#a10d34ab3542840908644591495bbacfc">Pcm::CurrentStreamInfo::use_pos_info</a></div><div class="ttdeci">bool use_pos_info</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00063">music.h:63</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a1ca914a51189c427eb0bc7022adbcdc3"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a1ca914a51189c427eb0bc7022adbcdc3">Pcm::SetActiveTrackList</a></div><div class="ttdeci">void SetActiveTrackList(int whichList)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l02175">music.cpp:2175</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a2ce21f5c2ea118617d2437eda3bfd215"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a2ce21f5c2ea118617d2437eda3bfd215">Pcm::PCMAudio_PreLoadStream</a></div><div class="ttdeci">bool PCMAudio_PreLoadStream(uint32 checksum, int whichStream)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l01815">p_music.cpp:1815</a></div></div>
<div class="ttc" id="anamespace_pcm_html_af4c0b73e5f5e635e24687c025dc6d274"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#af4c0b73e5f5e635e24687c025dc6d274">Pcm::s_xbox_user_soundtrack_song</a></div><div class="ttdeci">static uint32 s_xbox_user_soundtrack_song</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00145">music.cpp:145</a></div></div>
<div class="ttc" id="anamespace_pcm_html_af316eb0b1ea1e1919b36dd2404e2ac21"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#af316eb0b1ea1e1919b36dd2404e2ac21">Pcm::MusicIsPaused</a></div><div class="ttdeci">bool MusicIsPaused()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01335">music.cpp:1335</a></div></div>
<div class="ttc" id="anamespace_pcm_html_a40ff528e21ecd75aac50a806657859eb"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#a40ff528e21ecd75aac50a806657859eb">Pcm::StreamsDisabled</a></div><div class="ttdeci">bool StreamsDisabled()</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l00091">music.cpp:91</a></div></div>
<div class="ttc" id="astruct_pcm_1_1_track_list_html_a949d7b79cf2391b680a537517dc7c070"><div class="ttname"><a href="../../d2/d8a/struct_pcm_1_1_track_list.html#a949d7b79cf2391b680a537517dc7c070">Pcm::TrackList::allTracksForbidden</a></div><div class="ttdeci">bool allTracksForbidden</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d10/music_8h_source.html#l00088">music.h:88</a></div></div>
<div class="ttc" id="a_async_filesys_8h_html"><div class="ttname"><a href="../../d4/d6c/_async_filesys_8h.html">AsyncFilesys.h</a></div></div>
<div class="ttc" id="ap__soundtrack_8h_html"><div class="ttname"><a href="../../d7/d46/p__soundtrack_8h.html">p_soundtrack.h</a></div></div>
<div class="ttc" id="anamespace_pcm_html_ae03b04f2b2d5a0bd57ca3853aea093a6"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#ae03b04f2b2d5a0bd57ca3853aea093a6">Pcm::SetLoopingMode</a></div><div class="ttdeci">void SetLoopingMode(bool loop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d8a/music_8cpp_source.html#l01565">music.cpp:1565</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_viewport_manager_html_ad68f4757ec292366e6063031ad913e5b"><div class="ttname"><a href="../../d0/d19/class_nx_1_1_c_viewport_manager.html#ad68f4757ec292366e6063031ad913e5b">Nx::CViewportManager::sGetClosestCamera</a></div><div class="ttdeci">static Gfx::Camera * sGetClosestCamera(const Mth::Vector &amp;pos, float *distParam=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/de7/_nx_view_man_8cpp_source.html#l00279">NxViewMan.cpp:279</a></div></div>
<div class="ttc" id="anamespace_pcm_html_afefe0e832aef6da83100e7a0811685e5"><div class="ttname"><a href="../../de/d3e/namespace_pcm.html#afefe0e832aef6da83100e7a0811685e5">Pcm::PCMAudio_StartPreLoadedMusicStream</a></div><div class="ttdeci">bool PCMAudio_StartPreLoadedMusicStream(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/ngc_2p__music_8cpp_source.html#l02028">p_music.cpp:2028</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_3601fabbe3429c936523f20d8da3f5fe.html">gel</a></li><li class="navelem"><a class="el" href="../../dir_e9d4da43962330fc62f75934c483c6e5.html">Music</a></li><li class="navelem"><a class="el" href="../../d9/d8a/music_8cpp.html">music.cpp</a></li>
    <li class="footer">Документация по OpenTHUG. Последние изменения: Вс 26 Апр 2020 03:47:23. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
