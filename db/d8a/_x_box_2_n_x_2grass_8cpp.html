<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenTHUG: Файл C:/git/thug/src/gfx/XBox/NX/grass.cpp</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenTHUG
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">OpenTHUG: let&#39;s port THUG on Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('db/d8a/_x_box_2_n_x_2grass_8cpp.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Пространства имен</a> &#124;
<a href="#func-members">Функции</a> &#124;
<a href="#var-members">Переменные</a>  </div>
  <div class="headertitle">
<div class="title">Файл grass.cpp</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">См. исходные тексты.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Пространства имен</h2></td></tr>
<tr class="memitem:d4/ddf/namespace_nx_xbox"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/ddf/namespace_nx_xbox.html">NxXbox</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Функции</h2></td></tr>
<tr class="memitem:a59f51600bcc410ea93231015e839824e"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a59f51600bcc410ea93231015e839824e">XBUtil_UnswizzleTexture2D</a> (D3DLOCKED_RECT *pLock, const D3DSURFACE_DESC *pDesc)</td></tr>
<tr class="separator:a59f51600bcc410ea93231015e839824e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72362ad54a50ebaa347fd79015023b2f"><td class="memItemLeft" align="right" valign="top">VOID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a72362ad54a50ebaa347fd79015023b2f">XBUtil_SwizzleTexture2D</a> (D3DLOCKED_RECT *pLock, const D3DSURFACE_DESC *pDesc)</td></tr>
<tr class="separator:a72362ad54a50ebaa347fd79015023b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8696826baa73f02c5a651987f2a3ae12"><td class="memItemLeft" align="right" valign="top">HRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8696826baa73f02c5a651987f2a3ae12">LoadBumpTextures</a> (void)</td></tr>
<tr class="separator:a8696826baa73f02c5a651987f2a3ae12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a3819974b51b64332036407c7eb63c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a4a3819974b51b64332036407c7eb63c5">CreateWaterMaterial</a> (<a class="el" href="../../da/df5/struct_nx_xbox_1_1s_material.html">NxXbox::sMaterial</a> *p_material)</td></tr>
<tr class="separator:a4a3819974b51b64332036407c7eb63c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146898d7158e8e86cf56c85f52cdc1e7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a146898d7158e8e86cf56c85f52cdc1e7">AddWater</a> (<a class="el" href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html">Nx::CXboxGeom</a> *p_geom, <a class="el" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html">NxXbox::sMesh</a> *p_mesh)</td></tr>
<tr class="separator:a146898d7158e8e86cf56c85f52cdc1e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d0e1ba88b0d89b8db12fc0aff23b24"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a11d0e1ba88b0d89b8db12fc0aff23b24">AddGrass</a> (<a class="el" href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html">Nx::CXboxGeom</a> *p_geom, <a class="el" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html">NxXbox::sMesh</a> *p_mesh)</td></tr>
<tr class="separator:a11d0e1ba88b0d89b8db12fc0aff23b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Переменные</h2></td></tr>
<tr class="memitem:a46ff7a7824a1a98fbd68ed4c11504dcc"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a46ff7a7824a1a98fbd68ed4c11504dcc">bumpsLoaded</a> = false</td></tr>
<tr class="separator:a46ff7a7824a1a98fbd68ed4c11504dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8446084a13480517e58c5888b041b916"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/df5/struct_nx_xbox_1_1s_material.html">NxXbox::sMaterial</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8446084a13480517e58c5888b041b916">waterMaterial</a></td></tr>
<tr class="separator:a8446084a13480517e58c5888b041b916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75b37fe5416f23325a106efe188bccda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a> [2]</td></tr>
<tr class="separator:a75b37fe5416f23325a106efe188bccda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d8a74a4714617963173cf7e02ef6bb8"><td class="memItemLeft" align="right" valign="top">IDirect3DTexture8 *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a> [17]</td></tr>
<tr class="separator:a8d8a74a4714617963173cf7e02ef6bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0f17d370113ff3097e1e6cb3a68b9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a0c0f17d370113ff3097e1e6cb3a68b9e">bumpTextures</a> [17]</td></tr>
<tr class="separator:a0c0f17d370113ff3097e1e6cb3a68b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Функции</h2>
<a id="a59f51600bcc410ea93231015e839824e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59f51600bcc410ea93231015e839824e">&#9670;&nbsp;</a></span>XBUtil_UnswizzleTexture2D()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID XBUtil_UnswizzleTexture2D </td>
          <td>(</td>
          <td class="paramtype">D3DLOCKED_RECT *&#160;</td>
          <td class="paramname"><em>pLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const D3DSURFACE_DESC *&#160;</td>
          <td class="paramname"><em>pDesc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00032">32</a></p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    DWORD dwPixelSize   = XGBytesPerPixelFromFormat( pDesc-&gt;Format );</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    DWORD dwTextureSize = pDesc-&gt;Width * pDesc-&gt;Height * dwPixelSize;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    BYTE* pSrcBits = <span class="keyword">new</span> BYTE[ dwTextureSize ];</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    memcpy( pSrcBits, pLock-&gt;pBits, dwTextureSize );</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    XGUnswizzleRect( pSrcBits, pDesc-&gt;Width, pDesc-&gt;Height, NULL, pLock-&gt;pBits, </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                     0, NULL, dwPixelSize );</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">delete</span> [] pSrcBits;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00076">LoadBumpTextures()</a>.</p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a59f51600bcc410ea93231015e839824e_icgraph.svg" width="376" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a72362ad54a50ebaa347fd79015023b2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72362ad54a50ebaa347fd79015023b2f">&#9670;&nbsp;</a></span>XBUtil_SwizzleTexture2D()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VOID XBUtil_SwizzleTexture2D </td>
          <td>(</td>
          <td class="paramtype">D3DLOCKED_RECT *&#160;</td>
          <td class="paramname"><em>pLock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const D3DSURFACE_DESC *&#160;</td>
          <td class="paramname"><em>pDesc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00054">54</a></p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    DWORD dwPixelSize   = XGBytesPerPixelFromFormat( pDesc-&gt;Format );</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    DWORD dwTextureSize = pDesc-&gt;Width * pDesc-&gt;Height * dwPixelSize;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    BYTE* pSrcBits = <span class="keyword">new</span> BYTE[ dwTextureSize ];</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    memcpy( pSrcBits, pLock-&gt;pBits, dwTextureSize );</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    XGSwizzleRect( pSrcBits, 0, NULL, pLock-&gt;pBits,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                  pDesc-&gt;Width, pDesc-&gt;Height, </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                  NULL, dwPixelSize );</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keyword">delete</span> [] pSrcBits;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00076">LoadBumpTextures()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a72362ad54a50ebaa347fd79015023b2f_icgraph.svg" width="362" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a8696826baa73f02c5a651987f2a3ae12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8696826baa73f02c5a651987f2a3ae12">&#9670;&nbsp;</a></span>LoadBumpTextures()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRESULT LoadBumpTextures </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00076">76</a></p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    HRESULT hr = S_OK;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 17; ++i )</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordtype">int</span> height = 128, width = 128;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="comment">// Find file name</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordtype">char</span> strBumpFile[128];</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">sprintf</a>( strBumpFile, <span class="stringliteral">&quot;c:\\skate5\\data\\images\\miscellaneous\\%d.bum&quot;</span>, i );</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <span class="comment">// Open and read file.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordtype">void</span> *fp = <a class="code" href="../../de/d10/namespace_file.html#a180384dc852ac3b971285fc63b1287cb">File::Open</a>( strBumpFile, <span class="stringliteral">&quot;rb&quot;</span> );</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">if</span>( !fp )</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">return</span> E_FAIL;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="comment">// Create texture.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">if</span>( FAILED( hr = D3DDevice_CreateTexture( width,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            height,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            3,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            NULL,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            D3DFMT_V8U8,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            D3DPOOL_MANAGED,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            &amp;<a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i] )))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">return</span> hr;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;       </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="comment">// Lock first level.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        D3DLOCKED_RECT lr; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        D3DSURFACE_DESC desc;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i]-&gt;GetLevelDesc( 0, &amp;desc );</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i]-&gt;LockRect( NULL, &amp;lr, NULL, NULL );</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a59f51600bcc410ea93231015e839824e">XBUtil_UnswizzleTexture2D</a>( &amp;lr, &amp;desc );</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="../../de/d10/namespace_file.html#ae5e5ed0fd4834fc2e0e1c29edc62fc02">File::Read</a>( lr.pBits, <span class="keyword">sizeof</span>( WORD ), height * width, fp );</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="comment">// Modulate the size of the offset.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *p_mod = (<a class="code" href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>*)lr.pBits;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p = 0; p &lt; height * width * 2; ++p )</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="comment">// Noticed occasionally this maps to outside of the map tetxure with texbem.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">// Culprit appears to be the maximum negative value (0, given 0x80 offset of values</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">// in V8U8 format).</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">if</span>( *p_mod == 0 )</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="comment">// Max negative offset.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                *p_mod = 1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            ++p_mod;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a72362ad54a50ebaa347fd79015023b2f">XBUtil_SwizzleTexture2D</a>( &amp;lr, &amp;desc );</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i]-&gt;UnlockRect( 0 );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment">// Load mipmaps</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordtype">int</span> level = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">while</span>( ++level &lt; 3 )</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            width &gt;&gt;= 1;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            height &gt;&gt;= 1;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                        </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i]-&gt;GetLevelDesc( level, &amp;desc );</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i]-&gt;LockRect( level, &amp;lr, NULL,NULL );</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a59f51600bcc410ea93231015e839824e">XBUtil_UnswizzleTexture2D</a>( &amp;lr, &amp;desc );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <a class="code" href="../../de/d10/namespace_file.html#ae5e5ed0fd4834fc2e0e1c29edc62fc02">File::Read</a>( lr.pBits, <span class="keyword">sizeof</span>( WORD ), height * width, fp );</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="comment">// Modulate the size of the offset.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            p_mod = (<a class="code" href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>*)lr.pBits;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> p = 0; p &lt; height * width * 2; ++p )</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="comment">// Noticed occasionally this maps to outside of the map tetxure with texbem.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <span class="comment">// Culprit appears to be the maximum negative value (0, given 0x80 offset of values</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="comment">// in V8U8 format).</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <span class="keywordflow">if</span>( *p_mod == 0 )</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="comment">// Max negative offset.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    *p_mod = 1;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                ++p_mod;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a72362ad54a50ebaa347fd79015023b2f">XBUtil_SwizzleTexture2D</a>( &amp;lr, &amp;desc );</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i]-&gt;UnlockRect( level );</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <a class="code" href="../../de/d10/namespace_file.html#af5cd83b01fc5f341f767beb7c0b1130c">File::Close</a>( fp );</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a0c0f17d370113ff3097e1e6cb3a68b9e">bumpTextures</a>[i].<a class="code" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html#a917fa9f4966c164d234cd05e0a6aedc3">pD3DTexture</a> = <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[i];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a0c0f17d370113ff3097e1e6cb3a68b9e">bumpTextures</a>[i].<a class="code" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html#abe6240b33a14384ce4025d17fceaf495">pD3DPalette</a> = NULL;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// Set up the texture container for the bump textures.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ZeroMemory( &amp;<a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a>[0],  <span class="keyword">sizeof</span>( <a class="code" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a> ));</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a>[0].<a class="code" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html#a917fa9f4966c164d234cd05e0a6aedc3">pD3DTexture</a> = <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a>[0];</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> hr;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00016">bumpTextures</a>, <a class="el" href="../../d8/dbe/ngc_2p__filesys_8cpp_source.html#l00425">File::Close()</a>, <a class="el" href="../../d8/dbe/ngc_2p__filesys_8cpp_source.html#l00391">File::Open()</a>, <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00015">pBumpTextures</a>, <a class="el" href="../../d1/d46/_x_box_2_n_x_2texture_8h_source.html#l00027">NxXbox::sTexture::pD3DPalette</a>, <a class="el" href="../../d1/d46/_x_box_2_n_x_2texture_8h_source.html#l00026">NxXbox::sTexture::pD3DTexture</a>, <a class="el" href="../../d8/dbe/ngc_2p__filesys_8cpp_source.html#l00443">File::Read()</a>, <a class="el" href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">Dbg::sprintf()</a>, <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00013">waterTextures</a>, <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00054">XBUtil_SwizzleTexture2D()</a> и <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00032">XBUtil_UnswizzleTexture2D()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a8696826baa73f02c5a651987f2a3ae12_cgraph.svg" width="376" height="291"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a4a3819974b51b64332036407c7eb63c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a3819974b51b64332036407c7eb63c5">&#9670;&nbsp;</a></span>CreateWaterMaterial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateWaterMaterial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/df5/struct_nx_xbox_1_1s_material.html">NxXbox::sMaterial</a> *&#160;</td>
          <td class="paramname"><em>p_material</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00179">179</a></p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Set texture 0 to be the first bump texture.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a8a385eea785d60884c3522cf8f2cc3e1">mp_tex</a>[0]           = &amp;<a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a>[0];</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a8a385eea785d60884c3522cf8f2cc3e1">mp_tex</a>[1]           = &amp;<a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a>[1];</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a723f207b6c6f7bc0a029de5e3afa0a65">m_reg_alpha</a>[0]      = <a class="code" href="../../d4/ddf/namespace_nx_xbox.html#af9a41b989a910a00f7578e5ffe8f8529a5e7ee6698260be4a28ceb9347764dbe5">NxXbox::vBLEND_MODE_BLEND_FIXED</a> | ( 0x40UL &lt;&lt; 24 );</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#adcd30d27359afc63a970c63968634b7b">m_color</a>[0][3]       = 0.5f;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a7653198ea9bd1f49c42fb58259a16421">m_passes</a>            = 2;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// Add transparent flag.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0]          |= 0x40;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[1]          = 0x00;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// Add bump setup flag.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0]          |= MATFLAG_BUMP_SIGNED_TEXTURE;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[1]          |= MATFLAG_BUMP_LOAD_MATRIX;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#ac1aa8dbba0e2af93ed049639a01d4a54">m_uv_wibble</a>         = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0]          &amp;= ~MATFLAG_ENVIRONMENT;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0]          &amp;= ~MATFLAG_UV_WIBBLE;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// Adjust K.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a5426f6022216a6a5f0195bd900e8fdf2">m_k</a>[0]              = 0.0f;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a5426f6022216a6a5f0195bd900e8fdf2">m_k</a>[1]              = 0.0f;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// Set texture address mode.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#aa6a131b5c9801164355a24ca5ae33211">m_uv_addressing</a>[0]  = 0x00000000UL;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#aa6a131b5c9801164355a24ca5ae33211">m_uv_addressing</a>[1]  = 0x00000000UL;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// Set the draw order to ensure meshes are drawn from the bottom up. Default draw order for transparent</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// meshes is 1000.0, so add a little onto that.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a2814779faab4180df056fb12e282cb2b">m_sorted</a>            = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#ad31897c8160e29447c188946d92edea5">m_draw_order</a>        = 1501.0f;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// Create the animating texture details.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a4da01282fa531f0b40841a2f89581dbd">m_texture_wibble</a>    = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0]          |= MATFLAG_PASS_TEXTURE_ANIMATES;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>                        = <span class="keyword">new</span> <a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html">NxXbox::sTextureWibbleParams</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#a5c75392231c35bcea865857b1c73c51f">m_num_keyframes</a>[0]    = 18;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#a6f8cdeba23770c7e69ddbf97bea3923f">m_phase</a>[0]            = 0;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ace1a5d74835986f7e40683c0162f53b4">m_num_iterations</a>[0]   = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">mp_keyframes</a>[0]       = <span class="keyword">new</span> <a class="code" href="../../d5/d06/struct_nx_xbox_1_1s_texture_wibble_keyframe.html">NxXbox::sTextureWibbleKeyframe</a>[18];</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">mp_keyframes</a>[1]       = NULL;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">mp_keyframes</a>[2]       = NULL;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">mp_keyframes</a>[3]       = NULL;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> f = 0; f &lt; 18; ++f )</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">mp_keyframes</a>[0][f].<a class="code" href="../../d5/d06/struct_nx_xbox_1_1s_texture_wibble_keyframe.html#a2759bd6358a506b2a55bb0f3b6d9133c">m_time</a>                     = (( f * 1000 ) / 30 );</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        p_material-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">mp_wibble_texture_params</a>-&gt;<a class="code" href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">mp_keyframes</a>[0][f].<a class="code" href="../../d5/d06/struct_nx_xbox_1_1s_texture_wibble_keyframe.html#adacb415d8adf600f7b0bd6736284a6d9">mp_texture</a>                 = &amp;<a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a0c0f17d370113ff3097e1e6cb3a68b9e">bumpTextures</a>[f % 17];</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00016">bumpTextures</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00112">NxXbox::sMaterial::m_color</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00109">NxXbox::sMaterial::m_draw_order</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00110">NxXbox::sMaterial::m_flags</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00118">NxXbox::sMaterial::m_k</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00075">NxXbox::sTextureWibbleParams::m_num_iterations</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00073">NxXbox::sTextureWibbleParams::m_num_keyframes</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00098">NxXbox::sMaterial::m_passes</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00074">NxXbox::sTextureWibbleParams::m_phase</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00113">NxXbox::sMaterial::m_reg_alpha</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00100">NxXbox::sMaterial::m_sorted</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00103">NxXbox::sMaterial::m_texture_wibble</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00067">NxXbox::sTextureWibbleKeyframe::m_time</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00114">NxXbox::sMaterial::m_uv_addressing</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00102">NxXbox::sMaterial::m_uv_wibble</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00076">NxXbox::sTextureWibbleParams::mp_keyframes</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00111">NxXbox::sMaterial::mp_tex</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00068">NxXbox::sTextureWibbleKeyframe::mp_texture</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00122">NxXbox::sMaterial::mp_wibble_texture_params</a>, <a class="el" href="../../d4/d42/_x_box_2_n_x_2render_8h_source.html#l00072">NxXbox::vBLEND_MODE_BLEND_FIXED</a> и <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00013">waterTextures</a>.</p>

<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00239">AddWater()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a4a3819974b51b64332036407c7eb63c5_icgraph.svg" width="408" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a146898d7158e8e86cf56c85f52cdc1e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146898d7158e8e86cf56c85f52cdc1e7">&#9670;&nbsp;</a></span>AddWater()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AddWater </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html">Nx::CXboxGeom</a> *&#160;</td>
          <td class="paramname"><em>p_geom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html">NxXbox::sMesh</a> *&#160;</td>
          <td class="paramname"><em>p_mesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00239">239</a></p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// Ensure there is at least two sets of uv&#39;s available.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    Dbg_Assert( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ae8d42348c86a99094f0dcb5dfb469248">m_uv0_offset</a> &gt; 0 );</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// Check to see whether the texture we want is present.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="../../de/d7a/class_nx_1_1_c_scene.html">Nx::CScene</a>      *p_sky_scene        = <a class="code" href="../../d9/d8c/class_nx_1_1_c_engine.html#ae44debf7f19c548196af974c8849697c">Nx::CEngine::sGetSkyScene</a>();</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="../../d1/d37/class_nx_1_1_c_tex_dict.html">Nx::CTexDict</a>    *p_tex_dict         = p_sky_scene-&gt;<a class="code" href="../../de/d7a/class_nx_1_1_c_scene.html#a612f88d1d9543900ce032e335efda5b8">GetTexDict</a>();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="../../da/df1/class_nx_1_1_c_texture.html">Nx::CTexture</a>    *p_texture          = p_tex_dict-&gt;<a class="code" href="../../d1/d37/class_nx_1_1_c_tex_dict.html#ae580a961a82318c752e4ed1b4b1163d6">GetTexture</a>( 0x96d0bf08UL );</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span>( p_texture == NULL )</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="../../de/dea/class_nx_1_1_c_xbox_texture.html">Nx::CXboxTexture</a>    *p_xbox_texture = <span class="keyword">static_cast&lt;</span><a class="code" href="../../de/dea/class_nx_1_1_c_xbox_texture.html">Nx::CXboxTexture</a>*<span class="keyword">&gt;</span>( p_texture );</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a>    *p_engine_texture   = p_xbox_texture-&gt;<a class="code" href="../../de/dea/class_nx_1_1_c_xbox_texture.html#ab90d1d3ea80208baa028e95cdec2d405">GetEngineTexture</a>();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    CopyMemory( &amp;<a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a>[1], p_engine_texture, <span class="keyword">sizeof</span>( <a class="code" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a> ));</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">int</span> num_tc_sets = ( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> - p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ae8d42348c86a99094f0dcb5dfb469248">m_uv0_offset</a> ) / 8;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span>( num_tc_sets == 1 )</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// We need to alter this mesh to create two sets of uv&#39;s.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        IDirect3DVertexBuffer8* p_new_buffer = p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a80e56cde1c8c2cb20614f31425699118">AllocateVertexBuffer</a>(( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> + 8 ) * p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aa0780820824923f8bc7ecf5bf1f2bc4b">m_num_vertices</a> );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        BYTE* p_read_byte;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        BYTE* p_write_byte;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#af306caaf25a091983b3187e7680ccd3f">mp_vertex_buffer</a>[0]-&gt;Lock( 0, 0, &amp;p_read_byte, D3DLOCK_READONLY | D3DLOCK_NOFLUSH );</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        p_new_buffer-&gt;Lock( 0, 0, &amp;p_write_byte, D3DLOCK_NOFLUSH );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> v = 0; v &lt; p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aa0780820824923f8bc7ecf5bf1f2bc4b">m_num_vertices</a>; ++v )</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="comment">// Copy all existing vertex information.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            CopyMemory( p_write_byte, p_read_byte, p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> );</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            p_read_byte     += p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            p_write_byte    += p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> + 8;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keyword">delete</span> p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#af306caaf25a091983b3187e7680ccd3f">mp_vertex_buffer</a>[0];</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#af306caaf25a091983b3187e7680ccd3f">mp_vertex_buffer</a>[0] = p_new_buffer;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> += 8;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">// Switch the vertex shader.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a14e9f854d177056042f3a9353aa5faae">m_vertex_shader</a>[0]  &amp;= ~( D3DFVF_TEX1 | D3DFVF_TEXCOORDSIZE2( 0 ));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a14e9f854d177056042f3a9353aa5faae">m_vertex_shader</a>[0]  |= D3DFVF_TEX2 | D3DFVF_TEXCOORDSIZE2( 0 ) | D3DFVF_TEXCOORDSIZE2( 1 );</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html">NxXbox::sMaterial</a> *p_water_mat = p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a4a3819974b51b64332036407c7eb63c5">CreateWaterMaterial</a>( p_water_mat );</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// Disable skater shadow on the mesh.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ace52a2342a88f178553e80c84b821199">m_flags</a> |= <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aa7d56f714a6af8a411e9262840a6840e1">NxXbox::sMesh::MESH_FLAG_NO_SKATER_SHADOW</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ace52a2342a88f178553e80c84b821199">m_flags</a> |= <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aae8a66fcbc5001b49a2fda5b5d0749698">NxXbox::sMesh::MESH_FLAG_BUMPED_WATER</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// Set the water pixel shader.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ab8b67bed125caccd5db997aa0d5f70fd">m_pixel_shader</a>  = <a class="code" href="../../d2/dad/_x_box_2_n_x_2render_8cpp.html#a98d38b525a792aed3c7adf1ac949b57e">PixelShaderBumpWater</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// Go through and calculate new texture coordinates based on the x-z space of the vertex positions.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    BYTE *p_byte_dest;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#af306caaf25a091983b3187e7680ccd3f">mp_vertex_buffer</a>[0]-&gt;Lock( 0, 0, &amp;p_byte_dest, 0 );</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">for</span>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> vert = 0; vert &lt; p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aa0780820824923f8bc7ecf5bf1f2bc4b">m_num_vertices</a>; ++vert )</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        D3DXVECTOR3 *<a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>  = (D3DXVECTOR3*)( p_byte_dest + ( vert * p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> ));</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordtype">float</span> u0                = <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;x / 192.0f;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordtype">float</span> v0                = <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;z / 192.0f;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordtype">float</span> u1                = <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;x / 96.0f;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordtype">float</span> v1                = <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;z / 96.0f;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordtype">float</span> *p_tex        = (<span class="keywordtype">float</span>*)( p_byte_dest + p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ae8d42348c86a99094f0dcb5dfb469248">m_uv0_offset</a> + ( vert * p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> ));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        p_tex[0]            = u0;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        p_tex[1]            = v0;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        p_tex[2]            = u1;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        p_tex[3]            = v1;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="../../da/d76/_x_box_2_n_x_2mesh_8cpp_source.html#l00804">NxXbox::sMesh::AllocateVertexBuffer()</a>, <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00179">CreateWaterMaterial()</a>, <a class="el" href="../../d0/d41/_x_box_2p__nxtexture_8h_source.html#l00052">Nx::CXboxTexture::GetEngineTexture()</a>, <a class="el" href="../../da/dca/_nx_scene_8h_source.html#l00264">Nx::CScene::GetTexDict()</a>, <a class="el" href="../../d7/dba/_nx_texture_8cpp_source.html#l01082">Nx::CTexDict::GetTexture()</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00113">NxXbox::sMesh::m_flags</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00128">NxXbox::sMesh::m_num_vertices</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00133">NxXbox::sMesh::m_pixel_shader</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00124">NxXbox::sMesh::m_uv0_offset</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00132">NxXbox::sMesh::m_vertex_shader</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00118">NxXbox::sMesh::m_vertex_stride</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00059">NxXbox::sMesh::MESH_FLAG_BUMPED_WATER</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00050">NxXbox::sMesh::MESH_FLAG_NO_SKATER_SHADOW</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00116">NxXbox::sMesh::mp_material</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00142">NxXbox::sMesh::mp_vertex_buffer</a>, <a class="el" href="../../d7/d43/cfuncs_8cpp_source.html#l00203">p_pos</a>, <a class="el" href="../../d2/dad/_x_box_2_n_x_2render_8cpp_source.html#l00050">PixelShaderBumpWater</a>, <a class="el" href="../../dd/d16/nx_8cpp_source.html#l00473">Nx::CEngine::sGetSkyScene()</a> и <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00013">waterTextures</a>.</p>

<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00324">AddGrass()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a146898d7158e8e86cf56c85f52cdc1e7_cgraph.svg" width="474" height="323"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Граф вызова функции:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a146898d7158e8e86cf56c85f52cdc1e7_icgraph.svg" width="219" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a11d0e1ba88b0d89b8db12fc0aff23b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d0e1ba88b0d89b8db12fc0aff23b24">&#9670;&nbsp;</a></span>AddGrass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AddGrass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html">Nx::CXboxGeom</a> *&#160;</td>
          <td class="paramname"><em>p_geom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html">NxXbox::sMesh</a> *&#160;</td>
          <td class="paramname"><em>p_mesh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00324">324</a></p>
<div class="fragment"><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="comment">// Need a material to proceed.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span>( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a> == NULL )</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">if</span>( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0] &amp; MATFLAG_WATER_EFFECT )</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a146898d7158e8e86cf56c85f52cdc1e7">AddWater</a>( p_geom, p_mesh );</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span>( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a1496518805e56c06b89faab577ba6df2">m_grass_layers</a> == 0 )</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// At this stage we know we want to add grass.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    Dbg_Assert( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a1496518805e56c06b89faab577ba6df2">m_grass_layers</a> &gt; 0 );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordtype">int</span>     grass_layers        = ( p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a1496518805e56c06b89faab577ba6df2">m_grass_layers</a> &gt; 5 ) ? 5 : p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a1496518805e56c06b89faab577ba6df2">m_grass_layers</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">float</span>   height_per_layer    = p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a6aaeb7ae7fc1a5684c07a815fec18584">m_grass_height</a> / grass_layers;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> layer = 0; layer &lt; grass_layers; ++layer )</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <a class="code" href="../../d2/d0a/class_mem_1_1_manager.html#a3aefd91781b7f41d35e6df6a32d379d0">Mem::Manager::sHandle</a>().<a class="code" href="../../d2/d0a/class_mem_1_1_manager.html#aaf8e36abc36eecabe46bf2582035192a">PushContext</a>( <a class="code" href="../../d2/d0a/class_mem_1_1_manager.html#a3aefd91781b7f41d35e6df6a32d379d0">Mem::Manager::sHandle</a>().BottomUpHeap());</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html">NxXbox::sMesh</a> *p_grass_mesh = p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aba8b998d465af2ddf0ed18421245b3ad">Clone</a>( <span class="keyword">false</span> );</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <a class="code" href="../../d2/d0a/class_mem_1_1_manager.html#a3aefd91781b7f41d35e6df6a32d379d0">Mem::Manager::sHandle</a>().<a class="code" href="../../d2/d0a/class_mem_1_1_manager.html#a7c4cba14870f002aee0243e16114f443">PopContext</a>();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="comment">// Disable skater shadow on the mesh.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ace52a2342a88f178553e80c84b821199">m_flags</a> |= <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aa7d56f714a6af8a411e9262840a6840e1">NxXbox::sMesh::MESH_FLAG_NO_SKATER_SHADOW</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">// Turn off anisotropic filtering and z-write on the mesh.</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ace52a2342a88f178553e80c84b821199">m_flags</a> |= ( <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aa7836e9576456a0163c218e863171fdd6">NxXbox::sMesh::MESH_FLAG_NO_ANISOTROPIC</a> | <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aafbd1ffbbb081adfb7065fcba9b071f23">NxXbox::sMesh::MESH_FLAG_NO_ZWRITE</a> );</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">// Now point the mesh to a different material, first build the material checksum from the name of the parent</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="comment">// material (Grass) and the name of the sub material (Grass_LayerX)...</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordtype">char</span> material_name[64];</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">sprintf</a>( material_name, <span class="stringliteral">&quot;Grass-Grass_Layer%d&quot;</span>, layer );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> material_checksum    = <a class="code" href="../../d3/d9b/namespace_crc.html#a60ea952dd05dcbab6d54f8f922f35872">Crc::GenerateCRCCaseSensitive</a>( material_name, strlen( material_name ));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">// ...then use the checksum to lookup the material.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>   = p_geom-&gt;<a class="code" href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html#a4b7982c0b74de92a823082b334b5d75f">mp_scene</a>-&gt;<a class="code" href="../../d6/dfc/class_nx_1_1_c_xbox_scene.html#a54c6d3803cc705f2bcd330862bd7bc04">GetEngineScene</a>()-&gt;GetMaterial( material_checksum );</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        Dbg_MsgAssert( p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>, ( <span class="stringliteral">&quot;Grass maaterial for layer %d appears to be named badly&quot;</span>, layer ));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">// We need also to override the mesh pixel shader, which may have been setup for a multipass material.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <a class="code" href="../../d4/ddf/namespace_nx_xbox.html#acd163978a054a9f375a746a197b4d11c">NxXbox::GetPixelShader</a>( p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>, &amp;p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ab8b67bed125caccd5db997aa0d5f70fd">m_pixel_shader</a> );</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="comment">// Add transparent flag to the material.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">m_flags</a>[0]       |= 0x40;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="comment">// Adjust K for the material.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a5426f6022216a6a5f0195bd900e8fdf2">m_k</a>[0]           = -2.0f;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">// Set the draw order to ensure meshes are drawn from the bottom up. Default draw order for transparent</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="comment">// meshes is 1000.0, so add a little onto that.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#a2814779faab4180df056fb12e282cb2b">m_sorted</a>      = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">mp_material</a>-&gt;<a class="code" href="../../da/df5/struct_nx_xbox_1_1s_material.html#ad31897c8160e29447c188946d92edea5">m_draw_order</a>  = 1100.0f + ( layer * 0.1f );</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="comment">// Go through and move all the vertices up a little, and calculate new texture coordinates based on the x-z space of the vertex positions.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        BYTE *p_byte_dest;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#af306caaf25a091983b3187e7680ccd3f">mp_vertex_buffer</a>[0]-&gt;Lock( 0, 0, &amp;p_byte_dest, 0 );</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordflow">for</span>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> vert = 0; vert &lt; p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aa0780820824923f8bc7ecf5bf1f2bc4b">m_num_vertices</a>; ++vert )</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            D3DXVECTOR3 *<a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a> = (D3DXVECTOR3*)( p_byte_dest + ( vert * p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> ));</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;y += ( height_per_layer * ( layer + 1 ));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordtype">float</span> u         = <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;x / 48.0f;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordtype">float</span> v         = <a class="code" href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a>-&gt;z / 48.0f;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordtype">float</span> *p_tex    = (<span class="keywordtype">float</span>*)( p_byte_dest + p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ae8d42348c86a99094f0dcb5dfb469248">m_uv0_offset</a> + ( vert * p_grass_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">m_vertex_stride</a> ));</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            p_tex[0]        = u;        </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            p_tex[1]        = v;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        p_geom-&gt;<a class="code" href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html#a4480b1969f54543d50d1e9638b9887ce">AddMesh</a>( p_grass_mesh );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// Turn off anisotropic filtering on the base mesh also.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    p_mesh-&gt;<a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ace52a2342a88f178553e80c84b821199">m_flags</a> |= <a class="code" href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aa7836e9576456a0163c218e863171fdd6">NxXbox::sMesh::MESH_FLAG_NO_ANISOTROPIC</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Перекрестные ссылки <a class="el" href="../../d5/d92/_x_box_2p___nx_geom_8cpp_source.html#l00088">Nx::CXboxGeom::AddMesh()</a>, <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00239">AddWater()</a>, <a class="el" href="../../da/d76/_x_box_2_n_x_2mesh_8cpp_source.html#l00749">NxXbox::sMesh::Clone()</a>, <a class="el" href="../../d8/dd1/crc_8cpp_source.html#l00171">Crc::GenerateCRCCaseSensitive()</a>, <a class="el" href="../../d6/d6f/_x_box_2p__nxscene_8h_source.html#l00022">Nx::CXboxScene::GetEngineScene()</a>, <a class="el" href="../../d2/dad/_x_box_2_n_x_2render_8cpp_source.html#l01087">NxXbox::GetPixelShader()</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00109">NxXbox::sMaterial::m_draw_order</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00110">NxXbox::sMaterial::m_flags</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00113">NxXbox::sMesh::m_flags</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00107">NxXbox::sMaterial::m_grass_height</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00108">NxXbox::sMaterial::m_grass_layers</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00118">NxXbox::sMaterial::m_k</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00128">NxXbox::sMesh::m_num_vertices</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00133">NxXbox::sMesh::m_pixel_shader</a>, <a class="el" href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00100">NxXbox::sMaterial::m_sorted</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00124">NxXbox::sMesh::m_uv0_offset</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00118">NxXbox::sMesh::m_vertex_stride</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00056">NxXbox::sMesh::MESH_FLAG_NO_ANISOTROPIC</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00050">NxXbox::sMesh::MESH_FLAG_NO_SKATER_SHADOW</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00057">NxXbox::sMesh::MESH_FLAG_NO_ZWRITE</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00116">NxXbox::sMesh::mp_material</a>, <a class="el" href="../../da/d03/_x_box_2p___nx_geom_8h_source.html#l00102">Nx::CXboxGeom::mp_scene</a>, <a class="el" href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00142">NxXbox::sMesh::mp_vertex_buffer</a>, <a class="el" href="../../d7/d43/cfuncs_8cpp_source.html#l00203">p_pos</a>, <a class="el" href="../../df/dda/win32functions_8cpp_source.html#l00075">Mem::Manager::PopContext()</a>, <a class="el" href="../../df/dda/win32functions_8cpp_source.html#l00071">Mem::Manager::PushContext()</a>, <a class="el" href="../../d3/d76/memman_8h_source.html#l00340">Mem::Manager::sHandle()</a> и <a class="el" href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">Dbg::sprintf()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Граф вызовов:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/d8a/_x_box_2_n_x_2grass_8cpp_a11d0e1ba88b0d89b8db12fc0aff23b24_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<h2 class="groupheader">Переменные</h2>
<a id="a46ff7a7824a1a98fbd68ed4c11504dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46ff7a7824a1a98fbd68ed4c11504dcc">&#9670;&nbsp;</a></span>bumpsLoaded</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool bumpsLoaded = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00011">11</a></p>

</div>
</div>
<a id="a8446084a13480517e58c5888b041b916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8446084a13480517e58c5888b041b916">&#9670;&nbsp;</a></span>waterMaterial</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/df5/struct_nx_xbox_1_1s_material.html">NxXbox::sMaterial</a> waterMaterial</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00012">12</a></p>

</div>
</div>
<a id="a75b37fe5416f23325a106efe188bccda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75b37fe5416f23325a106efe188bccda">&#9670;&nbsp;</a></span>waterTextures</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a> waterTextures[2]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00013">13</a></p>

<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00239">AddWater()</a>, <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00179">CreateWaterMaterial()</a> и <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00076">LoadBumpTextures()</a>.</p>

</div>
</div>
<a id="a8d8a74a4714617963173cf7e02ef6bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d8a74a4714617963173cf7e02ef6bb8">&#9670;&nbsp;</a></span>pBumpTextures</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IDirect3DTexture8* pBumpTextures[17]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00015">15</a></p>

<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00076">LoadBumpTextures()</a>.</p>

</div>
</div>
<a id="a0c0f17d370113ff3097e1e6cb3a68b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c0f17d370113ff3097e1e6cb3a68b9e">&#9670;&nbsp;</a></span>bumpTextures</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a> bumpTextures[17]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html">grass.cpp</a> строка <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00016">16</a></p>

<p class="reference">Используется в <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00179">CreateWaterMaterial()</a> и <a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00076">LoadBumpTextures()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a72362ad54a50ebaa347fd79015023b2f"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a72362ad54a50ebaa347fd79015023b2f">XBUtil_SwizzleTexture2D</a></div><div class="ttdeci">VOID XBUtil_SwizzleTexture2D(D3DLOCKED_RECT *pLock, const D3DSURFACE_DESC *pDesc)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00054">grass.cpp:54</a></div></div>
<div class="ttc" id="anamespace_nx_xbox_html_acd163978a054a9f375a746a197b4d11c"><div class="ttname"><a href="../../d4/ddf/namespace_nx_xbox.html#acd163978a054a9f375a746a197b4d11c">NxXbox::GetPixelShader</a></div><div class="ttdeci">void GetPixelShader(sMaterial *p_material, uint32 *p_pixel_shader_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dad/_x_box_2_n_x_2render_8cpp_source.html#l01087">render.cpp:1087</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a146898d7158e8e86cf56c85f52cdc1e7"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a146898d7158e8e86cf56c85f52cdc1e7">AddWater</a></div><div class="ttdeci">bool AddWater(Nx::CXboxGeom *p_geom, NxXbox::sMesh *p_mesh)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00239">grass.cpp:239</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_xbox_geom_html_a4b7982c0b74de92a823082b334b5d75f"><div class="ttname"><a href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html#a4b7982c0b74de92a823082b334b5d75f">Nx::CXboxGeom::mp_scene</a></div><div class="ttdeci">CXboxScene * mp_scene</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d03/_x_box_2p___nx_geom_8h_source.html#l00102">p_NxGeom.h:102</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a5426f6022216a6a5f0195bd900e8fdf2"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a5426f6022216a6a5f0195bd900e8fdf2">NxXbox::sMaterial::m_k</a></div><div class="ttdeci">float m_k[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00118">material.h:118</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_af306caaf25a091983b3187e7680ccd3f"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#af306caaf25a091983b3187e7680ccd3f">NxXbox::sMesh::mp_vertex_buffer</a></div><div class="ttdeci">IDirect3DVertexBuffer8 * mp_vertex_buffer[MAX_VERTEX_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00142">mesh.h:142</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_tex_dict_html"><div class="ttname"><a href="../../d1/d37/class_nx_1_1_c_tex_dict.html">Nx::CTexDict</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_nx_texture_8h_source.html#l00160">NxTexture.h:160</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a6aaeb7ae7fc1a5684c07a815fec18584"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a6aaeb7ae7fc1a5684c07a815fec18584">NxXbox::sMaterial::m_grass_height</a></div><div class="ttdeci">float m_grass_height</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00107">material.h:107</a></div></div>
<div class="ttc" id="a_defines_8h_html_a1134b580f8da4de94ca6b1de4d37975e"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a></div><div class="ttdeci">unsigned long uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00147">Defines.h:147</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_xbox_texture_html"><div class="ttname"><a href="../../de/dea/class_nx_1_1_c_xbox_texture.html">Nx::CXboxTexture</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d41/_x_box_2p__nxtexture_8h_source.html#l00018">p_nxtexture.h:18</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a833e140d6c8bcfad615ed65e2813681aafbd1ffbbb081adfb7065fcba9b071f23"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aafbd1ffbbb081adfb7065fcba9b071f23">NxXbox::sMesh::MESH_FLAG_NO_ZWRITE</a></div><div class="ttdeci">@ MESH_FLAG_NO_ZWRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00057">mesh.h:57</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_html_a917fa9f4966c164d234cd05e0a6aedc3"><div class="ttname"><a href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html#a917fa9f4966c164d234cd05e0a6aedc3">NxXbox::sTexture::pD3DTexture</a></div><div class="ttdeci">IDirect3DTexture8 * pD3DTexture</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d46/_x_box_2_n_x_2texture_8h_source.html#l00026">texture.h:26</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_ace52a2342a88f178553e80c84b821199"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ace52a2342a88f178553e80c84b821199">NxXbox::sMesh::m_flags</a></div><div class="ttdeci">uint32 m_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00113">mesh.h:113</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a26884001daa49526c1a48d98e56b9a20"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a26884001daa49526c1a48d98e56b9a20">NxXbox::sMaterial::mp_wibble_texture_params</a></div><div class="ttdeci">sTextureWibbleParams * mp_wibble_texture_params</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00122">material.h:122</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_ad31897c8160e29447c188946d92edea5"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#ad31897c8160e29447c188946d92edea5">NxXbox::sMaterial::m_draw_order</a></div><div class="ttdeci">float m_draw_order</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00109">material.h:109</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a59f51600bcc410ea93231015e839824e"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a59f51600bcc410ea93231015e839824e">XBUtil_UnswizzleTexture2D</a></div><div class="ttdeci">VOID XBUtil_UnswizzleTexture2D(D3DLOCKED_RECT *pLock, const D3DSURFACE_DESC *pDesc)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00032">grass.cpp:32</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_scene_html_a612f88d1d9543900ce032e335efda5b8"><div class="ttname"><a href="../../de/d7a/class_nx_1_1_c_scene.html#a612f88d1d9543900ce032e335efda5b8">Nx::CScene::GetTexDict</a></div><div class="ttdeci">CTexDict * GetTexDict() const</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dca/_nx_scene_8h_source.html#l00264">NxScene.h:264</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_aba8b998d465af2ddf0ed18421245b3ad"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aba8b998d465af2ddf0ed18421245b3ad">NxXbox::sMesh::Clone</a></div><div class="ttdeci">sMesh * Clone(bool instance=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d76/_x_box_2_n_x_2mesh_8cpp_source.html#l00749">mesh.cpp:749</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_tex_dict_html_ae580a961a82318c752e4ed1b4b1163d6"><div class="ttname"><a href="../../d1/d37/class_nx_1_1_c_tex_dict.html#ae580a961a82318c752e4ed1b4b1163d6">Nx::CTexDict::GetTexture</a></div><div class="ttdeci">CTexture * GetTexture(uint32 checksum) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dba/_nx_texture_8cpp_source.html#l01082">NxTexture.cpp:1082</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a2814779faab4180df056fb12e282cb2b"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a2814779faab4180df056fb12e282cb2b">NxXbox::sMaterial::m_sorted</a></div><div class="ttdeci">bool m_sorted</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00100">material.h:100</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a4a3819974b51b64332036407c7eb63c5"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a4a3819974b51b64332036407c7eb63c5">CreateWaterMaterial</a></div><div class="ttdeci">void CreateWaterMaterial(NxXbox::sMaterial *p_material)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00179">grass.cpp:179</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a833e140d6c8bcfad615ed65e2813681aa7d56f714a6af8a411e9262840a6840e1"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aa7d56f714a6af8a411e9262840a6840e1">NxXbox::sMesh::MESH_FLAG_NO_SKATER_SHADOW</a></div><div class="ttdeci">@ MESH_FLAG_NO_SKATER_SHADOW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00050">mesh.h:50</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a8d8a74a4714617963173cf7e02ef6bb8"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a8d8a74a4714617963173cf7e02ef6bb8">pBumpTextures</a></div><div class="ttdeci">IDirect3DTexture8 * pBumpTextures[17]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00015">grass.cpp:15</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_ae8d42348c86a99094f0dcb5dfb469248"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ae8d42348c86a99094f0dcb5dfb469248">NxXbox::sMesh::m_uv0_offset</a></div><div class="ttdeci">uint8 m_uv0_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00124">mesh.h:124</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_aa0780820824923f8bc7ecf5bf1f2bc4b"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#aa0780820824923f8bc7ecf5bf1f2bc4b">NxXbox::sMesh::m_num_vertices</a></div><div class="ttdeci">uint16 m_num_vertices</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00128">mesh.h:128</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_ab8b67bed125caccd5db997aa0d5f70fd"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ab8b67bed125caccd5db997aa0d5f70fd">NxXbox::sMesh::m_pixel_shader</a></div><div class="ttdeci">uint32 m_pixel_shader</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00133">mesh.h:133</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_xbox_texture_html_ab90d1d3ea80208baa028e95cdec2d405"><div class="ttname"><a href="../../de/dea/class_nx_1_1_c_xbox_texture.html#ab90d1d3ea80208baa028e95cdec2d405">Nx::CXboxTexture::GetEngineTexture</a></div><div class="ttdeci">NxXbox::sTexture * GetEngineTexture() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d41/_x_box_2p__nxtexture_8h_source.html#l00052">p_nxtexture.h:52</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html">NxXbox::sMaterial</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00081">material.h:81</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a833e140d6c8bcfad615ed65e2813681aa7836e9576456a0163c218e863171fdd6"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aa7836e9576456a0163c218e863171fdd6">NxXbox::sMesh::MESH_FLAG_NO_ANISOTROPIC</a></div><div class="ttdeci">@ MESH_FLAG_NO_ANISOTROPIC</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00056">mesh.h:56</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_params_html_a5c75392231c35bcea865857b1c73c51f"><div class="ttname"><a href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#a5c75392231c35bcea865857b1c73c51f">NxXbox::sTextureWibbleParams::m_num_keyframes</a></div><div class="ttdeci">uint32 m_num_keyframes[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00073">material.h:73</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_adcd30d27359afc63a970c63968634b7b"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#adcd30d27359afc63a970c63968634b7b">NxXbox::sMaterial::m_color</a></div><div class="ttdeci">float m_color[MAX_PASSES][4]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00112">material.h:112</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a14e9f854d177056042f3a9353aa5faae"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a14e9f854d177056042f3a9353aa5faae">NxXbox::sMesh::m_vertex_shader</a></div><div class="ttdeci">uint32 m_vertex_shader[VERTEX_SHADER_STACK_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00132">mesh.h:132</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a7653198ea9bd1f49c42fb58259a16421"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a7653198ea9bd1f49c42fb58259a16421">NxXbox::sMaterial::m_passes</a></div><div class="ttdeci">uint32 m_passes</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00098">material.h:98</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a0c0f17d370113ff3097e1e6cb3a68b9e"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a0c0f17d370113ff3097e1e6cb3a68b9e">bumpTextures</a></div><div class="ttdeci">NxXbox::sTexture bumpTextures[17]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00016">grass.cpp:16</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_params_html_ad783b97c977018b5f186a865385037cc"><div class="ttname"><a href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ad783b97c977018b5f186a865385037cc">NxXbox::sTextureWibbleParams::mp_keyframes</a></div><div class="ttdeci">sTextureWibbleKeyframe * mp_keyframes[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00076">material.h:76</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2grass_8cpp_html_a75b37fe5416f23325a106efe188bccda"><div class="ttname"><a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html#a75b37fe5416f23325a106efe188bccda">waterTextures</a></div><div class="ttdeci">NxXbox::sTexture waterTextures[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d8a/_x_box_2_n_x_2grass_8cpp_source.html#l00013">grass.cpp:13</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a97f6ad6d5f66fc4279d601fe0cc6c215"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a97f6ad6d5f66fc4279d601fe0cc6c215">NxXbox::sMesh::m_vertex_stride</a></div><div class="ttdeci">uint8 m_vertex_stride</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00118">mesh.h:118</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_aa6a131b5c9801164355a24ca5ae33211"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#aa6a131b5c9801164355a24ca5ae33211">NxXbox::sMaterial::m_uv_addressing</a></div><div class="ttdeci">uint32 m_uv_addressing[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00114">material.h:114</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_params_html_ace1a5d74835986f7e40683c0162f53b4"><div class="ttname"><a href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#ace1a5d74835986f7e40683c0162f53b4">NxXbox::sTextureWibbleParams::m_num_iterations</a></div><div class="ttdeci">int m_num_iterations[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00075">material.h:75</a></div></div>
<div class="ttc" id="aclass_mem_1_1_manager_html_a3aefd91781b7f41d35e6df6a32d379d0"><div class="ttname"><a href="../../d2/d0a/class_mem_1_1_manager.html#a3aefd91781b7f41d35e6df6a32d379d0">Mem::Manager::sHandle</a></div><div class="ttdeci">static Manager &amp; sHandle(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d76/memman_8h_source.html#l00340">memman.h:340</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_engine_html_ae44debf7f19c548196af974c8849697c"><div class="ttname"><a href="../../d9/d8c/class_nx_1_1_c_engine.html#ae44debf7f19c548196af974c8849697c">Nx::CEngine::sGetSkyScene</a></div><div class="ttdeci">static CScene * sGetSkyScene()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/nx_8cpp_source.html#l00473">nx.cpp:473</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_params_html_a6f8cdeba23770c7e69ddbf97bea3923f"><div class="ttname"><a href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html#a6f8cdeba23770c7e69ddbf97bea3923f">NxXbox::sTextureWibbleParams::m_phase</a></div><div class="ttdeci">int m_phase[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00074">material.h:74</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_scene_html"><div class="ttname"><a href="../../de/d7a/class_nx_1_1_c_scene.html">Nx::CScene</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dca/_nx_scene_8h_source.html#l00036">NxScene.h:36</a></div></div>
<div class="ttc" id="anamespace_file_html_a180384dc852ac3b971285fc63b1287cb"><div class="ttname"><a href="../../de/d10/namespace_file.html#a180384dc852ac3b971285fc63b1287cb">File::Open</a></div><div class="ttdeci">void * Open(const char *filename, const char *access)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/ngc_2p__filesys_8cpp_source.html#l00391">p_filesys.cpp:391</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a833e140d6c8bcfad615ed65e2813681aae8a66fcbc5001b49a2fda5b5d0749698"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a833e140d6c8bcfad615ed65e2813681aae8a66fcbc5001b49a2fda5b5d0749698">NxXbox::sMesh::MESH_FLAG_BUMPED_WATER</a></div><div class="ttdeci">@ MESH_FLAG_BUMPED_WATER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00059">mesh.h:59</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a8a385eea785d60884c3522cf8f2cc3e1"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a8a385eea785d60884c3522cf8f2cc3e1">NxXbox::sMaterial::mp_tex</a></div><div class="ttdeci">sTexture * mp_tex[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00111">material.h:111</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_a80e56cde1c8c2cb20614f31425699118"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#a80e56cde1c8c2cb20614f31425699118">NxXbox::sMesh::AllocateVertexBuffer</a></div><div class="ttdeci">static IDirect3DVertexBuffer8 * AllocateVertexBuffer(uint32 size)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d76/_x_box_2_n_x_2mesh_8cpp_source.html#l00804">mesh.cpp:804</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_xbox_geom_html_a4480b1969f54543d50d1e9638b9887ce"><div class="ttname"><a href="../../d6/dbd/class_nx_1_1_c_xbox_geom.html#a4480b1969f54543d50d1e9638b9887ce">Nx::CXboxGeom::AddMesh</a></div><div class="ttdeci">void AddMesh(NxXbox::sMesh *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/_x_box_2p___nx_geom_8cpp_source.html#l00088">p_NxGeom.cpp:88</a></div></div>
<div class="ttc" id="aclass_mem_1_1_manager_html_aaf8e36abc36eecabe46bf2582035192a"><div class="ttname"><a href="../../d2/d0a/class_mem_1_1_manager.html#aaf8e36abc36eecabe46bf2582035192a">Mem::Manager::PushContext</a></div><div class="ttdeci">void PushContext(Allocator *alloc)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/win32functions_8cpp_source.html#l00071">win32functions.cpp:71</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_keyframe_html"><div class="ttname"><a href="../../d5/d06/struct_nx_xbox_1_1s_texture_wibble_keyframe.html">NxXbox::sTextureWibbleKeyframe</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00065">material.h:65</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_html"><div class="ttname"><a href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html">NxXbox::sTexture</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d46/_x_box_2_n_x_2texture_8h_source.html#l00009">texture.h:9</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_keyframe_html_adacb415d8adf600f7b0bd6736284a6d9"><div class="ttname"><a href="../../d5/d06/struct_nx_xbox_1_1s_texture_wibble_keyframe.html#adacb415d8adf600f7b0bd6736284a6d9">NxXbox::sTextureWibbleKeyframe::mp_texture</a></div><div class="ttdeci">sTexture * mp_texture</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00068">material.h:68</a></div></div>
<div class="ttc" id="anamespace_crc_html_a60ea952dd05dcbab6d54f8f922f35872"><div class="ttname"><a href="../../d3/d9b/namespace_crc.html#a60ea952dd05dcbab6d54f8f922f35872">Crc::GenerateCRCCaseSensitive</a></div><div class="ttdeci">uint32 GenerateCRCCaseSensitive(const char *stream, int size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dd1/crc_8cpp_source.html#l00171">crc.cpp:171</a></div></div>
<div class="ttc" id="anamespace_file_html_af5cd83b01fc5f341f767beb7c0b1130c"><div class="ttname"><a href="../../de/d10/namespace_file.html#af5cd83b01fc5f341f767beb7c0b1130c">File::Close</a></div><div class="ttdeci">int Close(void *pFP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/ngc_2p__filesys_8cpp_source.html#l00425">p_filesys.cpp:425</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a1496518805e56c06b89faab577ba6df2"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a1496518805e56c06b89faab577ba6df2">NxXbox::sMaterial::m_grass_layers</a></div><div class="ttdeci">int m_grass_layers</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00108">material.h:108</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_accea7aa372c80c1273671653883dd294"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#accea7aa372c80c1273671653883dd294">NxXbox::sMaterial::m_flags</a></div><div class="ttdeci">uint32 m_flags[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00110">material.h:110</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_texture_html"><div class="ttname"><a href="../../da/df1/class_nx_1_1_c_texture.html">Nx::CTexture</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dcf/_nx_texture_8h_source.html#l00023">NxTexture.h:23</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_params_html"><div class="ttname"><a href="../../d6/da3/struct_nx_xbox_1_1s_texture_wibble_params.html">NxXbox::sTextureWibbleParams</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00071">material.h:71</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a723f207b6c6f7bc0a029de5e3afa0a65"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a723f207b6c6f7bc0a029de5e3afa0a65">NxXbox::sMaterial::m_reg_alpha</a></div><div class="ttdeci">uint32 m_reg_alpha[MAX_PASSES]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00113">material.h:113</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html_ade65b339f79a19614775db76aade229b"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html#ade65b339f79a19614775db76aade229b">NxXbox::sMesh::mp_material</a></div><div class="ttdeci">sMaterial * mp_material</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00116">mesh.h:116</a></div></div>
<div class="ttc" id="acfuncs_8cpp_html_aa3edcb35ddaa706b45aadff3a48aafdd"><div class="ttname"><a href="../../d7/d43/cfuncs_8cpp.html#aa3edcb35ddaa706b45aadff3a48aafdd">p_pos</a></div><div class="ttdeci">static char * p_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d43/cfuncs_8cpp_source.html#l00203">cfuncs.cpp:203</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_a4da01282fa531f0b40841a2f89581dbd"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#a4da01282fa531f0b40841a2f89581dbd">NxXbox::sMaterial::m_texture_wibble</a></div><div class="ttdeci">bool m_texture_wibble</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00103">material.h:103</a></div></div>
<div class="ttc" id="anamespace_nx_xbox_html_af9a41b989a910a00f7578e5ffe8f8529a5e7ee6698260be4a28ceb9347764dbe5"><div class="ttname"><a href="../../d4/ddf/namespace_nx_xbox.html#af9a41b989a910a00f7578e5ffe8f8529a5e7ee6698260be4a28ceb9347764dbe5">NxXbox::vBLEND_MODE_BLEND_FIXED</a></div><div class="ttdeci">@ vBLEND_MODE_BLEND_FIXED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d42/_x_box_2_n_x_2render_8h_source.html#l00072">render.h:72</a></div></div>
<div class="ttc" id="aclass_mem_1_1_manager_html_a7c4cba14870f002aee0243e16114f443"><div class="ttname"><a href="../../d2/d0a/class_mem_1_1_manager.html#a7c4cba14870f002aee0243e16114f443">Mem::Manager::PopContext</a></div><div class="ttdeci">void PopContext(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/win32functions_8cpp_source.html#l00075">win32functions.cpp:75</a></div></div>
<div class="ttc" id="a_defines_8h_html_adde6aaee8457bee49c2a92621fe22b79"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a></div><div class="ttdeci">unsigned char uint8</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00134">Defines.h:134</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_material_html_ac1aa8dbba0e2af93ed049639a01d4a54"><div class="ttname"><a href="../../da/df5/struct_nx_xbox_1_1s_material.html#ac1aa8dbba0e2af93ed049639a01d4a54">NxXbox::sMaterial::m_uv_wibble</a></div><div class="ttdeci">bool m_uv_wibble</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00102">material.h:102</a></div></div>
<div class="ttc" id="a_x_box_2_n_x_2render_8cpp_html_a98d38b525a792aed3c7adf1ac949b57e"><div class="ttname"><a href="../../d2/dad/_x_box_2_n_x_2render_8cpp.html#a98d38b525a792aed3c7adf1ac949b57e">PixelShaderBumpWater</a></div><div class="ttdeci">DWORD PixelShaderBumpWater</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dad/_x_box_2_n_x_2render_8cpp_source.html#l00050">render.cpp:50</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_xbox_scene_html_a54c6d3803cc705f2bcd330862bd7bc04"><div class="ttname"><a href="../../d6/dfc/class_nx_1_1_c_xbox_scene.html#a54c6d3803cc705f2bcd330862bd7bc04">Nx::CXboxScene::GetEngineScene</a></div><div class="ttdeci">NxXbox::sScene * GetEngineScene() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d6f/_x_box_2p__nxscene_8h_source.html#l00022">p_nxscene.h:22</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_html_abe6240b33a14384ce4025d17fceaf495"><div class="ttname"><a href="../../d6/dd9/struct_nx_xbox_1_1s_texture.html#abe6240b33a14384ce4025d17fceaf495">NxXbox::sTexture::pD3DPalette</a></div><div class="ttdeci">IDirect3DPalette8 * pD3DPalette</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d46/_x_box_2_n_x_2texture_8h_source.html#l00027">texture.h:27</a></div></div>
<div class="ttc" id="anamespace_dbg_html_ab406a8cc16de5046c7d9fd09c9de5e22"><div class="ttname"><a href="../../da/d37/namespace_dbg.html#ab406a8cc16de5046c7d9fd09c9de5e22">Dbg::sprintf</a></div><div class="ttdeci">sprintf(tmp1, &quot;FILE:      %s(%d) &quot;, file, line)</div></div>
<div class="ttc" id="anamespace_file_html_ae5e5ed0fd4834fc2e0e1c29edc62fc02"><div class="ttname"><a href="../../de/d10/namespace_file.html#ae5e5ed0fd4834fc2e0e1c29edc62fc02">File::Read</a></div><div class="ttdeci">size_t Read(void *addr, size_t size, size_t count, void *pFP)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbe/ngc_2p__filesys_8cpp_source.html#l00443">p_filesys.cpp:443</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_mesh_html"><div class="ttname"><a href="../../d6/d5e/struct_nx_xbox_1_1s_mesh.html">NxXbox::sMesh</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6e/_x_box_2_n_x_2mesh_8h_source.html#l00039">mesh.h:39</a></div></div>
<div class="ttc" id="astruct_nx_xbox_1_1s_texture_wibble_keyframe_html_a2759bd6358a506b2a55bb0f3b6d9133c"><div class="ttname"><a href="../../d5/d06/struct_nx_xbox_1_1s_texture_wibble_keyframe.html#a2759bd6358a506b2a55bb0f3b6d9133c">NxXbox::sTextureWibbleKeyframe::m_time</a></div><div class="ttdeci">int m_time</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d9f/_x_box_2_n_x_2material_8h_source.html#l00067">material.h:67</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_c86603f79b902ad390ffc2674fbc4470.html">gfx</a></li><li class="navelem"><a class="el" href="../../dir_f1e3aad0a8b25f72ef4018f1d1f27bef.html">XBox</a></li><li class="navelem"><a class="el" href="../../dir_17ac0882b9f307ce11d41f7e7c182a97.html">NX</a></li><li class="navelem"><a class="el" href="../../db/d8a/_x_box_2_n_x_2grass_8cpp.html">grass.cpp</a></li>
    <li class="footer">Документация по OpenTHUG. Последние изменения: Вс 26 Апр 2020 03:47:43. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
