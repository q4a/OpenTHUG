<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenTHUG: Исходный файл C:/git/thug/src/gel/Components/GunslingerWalkComponent.cpp</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenTHUG
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">OpenTHUG: let&#39;s port THUG on Linux</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/dbd/_gunslinger_walk_component_8cpp_source.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GunslingerWalkComponent.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../da/dbd/_gunslinger_walk_component_8cpp.html">См. документацию.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//****************************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//* MODULE:         Gel/Components</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//* FILENAME:       WalkComponent.cpp</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//* OWNER:          Dan</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//* CREATION DATE:  4/2/3</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//****************************************************************************</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/db3/_walk_component_8h.html">gel/components/walkcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d1/d1a/_input_component_8h.html">gel/components/inputcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/d8b/animationcomponent_8h.html">gel/components/animationcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d0/d3d/_walk_camera_component_8h.html">gel/components/walkcameracomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/d45/modelcomponent_8h.html">gel/components/modelcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/d67/_trigger_component_8h.html">gel/components/triggercomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/db1/_movable_contact_component_8h.html">gel/components/movablecontactcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/d62/_rail_manager_component_8h.html">gel/components/railmanagercomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/dd4/compositeobject_8h.html">gel/object/compositeobject.h</a>&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d8/dff/compositeobjectmanager_8h.html">gel/object/compositeobjectmanager.h</a>&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/d31/checksum_8h.html">gel/scripting/checksum.h</a>&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/d7f/script_8h.html">gel/scripting/script.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/dec/struct_8h.html">gel/scripting/struct.h</a>&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d6/d98/symboltable_8h.html">gel/scripting/symboltable.h</a>&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d5/d0f/_coll_cache_8h.html">gel/collision/collcache.h</a>&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/d33/rail_8h.html">sk/objects/rail.h</a>&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d1/d74/feeler_8h.html">sk/engine/feeler.h</a>&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/d23/skate_8h.html">sk/modules/skate/skate.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d0/dfd/_skater_physics_control_component_8h.html">sk/components/skaterphysicscontrolcomponent.h</a>&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"> * - Take out manual, take out manual, take out manual.</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * - Switch over to no-origin-teleport animations.</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> * - Catching on curbs right after jump (use snap up code from skater)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * - Moving contacts (and sticking to moving rails).</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * - Control Feel</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> *    - Perhaps X equals run only during run outs.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * - Camera</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> *    - Flush requests don&#39;t quite complete using the timer method.  Perhaps with forward control locking, the goal method may once again be useful.</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> *    - Transition out of vert facing camera.  Perhaps flush camera at first landing after an air transition.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"> *    - Rewrite camera with &quot;forward locking&quot; affecting target matrix instead of turning off lerping.  Lookaround when walking shouldn&#39;t reset to behind</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment"> *      during walking.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"> * - Shadow update.</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment"> * - Height update.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment"> * - Enter/exit walk behavior (always rotates to along slope, run out to walk behavior still looks odd).</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> * - Turn off stance panel nollie.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"> * - Step up/down (use feeler to look ahead).  Delay WalkOffEdge animation change.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment"> * - Animations:</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> *    - Pull-up-from-hang has no feet!</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> *    - Trot walking animation.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> *    - Drop-to-hang animation.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> *    - Hop-to-hang animation.</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> *    - Three walk/run-to-stand animations.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"> *    - Rotate walk/run animation.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"> *    - Two ladder idle animations.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> *    - Onto-ladder-top animation. </span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> *    - Off-ladder-bottom animation.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> *    - Ladder-to-hang/hang-to-ladder animations.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment"> *    - idle skater to stand</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment"> *    - land to walk issues</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"> *    - special pull-up-to-wire anim</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> *    - off-ladder-bottom anim to allow blending at anim start / teleport at anim end</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment"> *    - onto-ladder-top anim to allow blending at anim start / teleport at anim end</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment"> *    - grab-to-hang swing and wall anims suck</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"> *    - grab-to-hang sideways swing</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment"> *    - Onto-ladder-top animation.  Currently play Off-ladder-top backwards.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"> *    - Fall-air before jump-air anim.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"> * - Animation comments:</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"> *    - running land doesn&#39;t really work (no weight), especially when you land and then immediately run off an edge and then land again</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"> *    - full run is odd looking</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment"> * - Walk to stand animation will require at least three versions.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"> * - Hang</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"> *    - Rail-to-rail ledge transition issues.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment"> *    - Jerky rail corners.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment"> *    - Non horizontal hang movement animations.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"> *    - Camera pop during pull-up (caused by camera collision).</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"> *    - Jump off hang.</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"> * - Ladder</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> *    - Jump off ladder.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"> *    - Jump onto ladder.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> *    - You can grind ladders.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> * - Grab rail in air.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"> * - Little talkie boxes don&#39;t always work.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment"> * - Gaps still trigger, but based on skate state.  Maybe run gap component while walking and include walking gap flag.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"> * - How can we deal with a low snap-up height, yet allow for steep slope walking?</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment"> * - Grind transition animation in Grind script (check to see if its playing).</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"> * - Clean 1/3 second delay before X running.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"> * - Upper body interpenetrates stuff.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"> * - Hang from bottom of ladder.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment"> * - Pull up collision restrictions are too restrictive (use push feeler distance?).</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"> * - Make it easier to grab a rail when you walk off an edge.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment"> * - Ladder to rail across top.  Rail across top to ladder.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"> * - Hand-plants, drop-ins, etc.</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * BUGS:</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * - Snap to hangs can cause the origin to go to bad places?  NJ by your roof.</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> * - Fall through verts with low frame rate.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"> * - Pop in transition from last to first frames of slow cycling walk animations.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d2/d10/namespace_obj.html">Obj</a></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">  107</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum )</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>* p_walk_params = <a class="code" href="../../d1/d54/namespace_script.html#aaf10cce8c51e44ea46f7789b3db96bc0">Script::GetStructure</a>( CRCD( 0x1c33e162, <span class="stringliteral">&quot;GunslingerWalkParameters&quot;</span> ));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    Dbg_Assert(p_walk_params);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">float</span> param;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    p_walk_params-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#acae6f1a5a02d406ab56292ec3fcfaefd">GetFloat</a>(checksum, &amp;param, <a class="code" href="../../d1/d54/namespace_script.html#a1dbce4b634727b78b34e4f40ad1ba884ab2e8f3e4dd999c157c1c26dbd463e1a8">Script::ASSERT</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> param;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    </div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa70017630ff3ee14254b6e27cde495d3">  126</a></span>&#160;<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html">CBaseComponent</a>* <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa70017630ff3ee14254b6e27cde495d3">CWalkComponent::s_create</a>()</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html">CBaseComponent</a>* <span class="keyword">&gt;</span>( <span class="keyword">new</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae2ab22f8b3a94d811832fc65b41d66e4">CWalkComponent</a> );    </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae2ab22f8b3a94d811832fc65b41d66e4">  136</a></span>&#160;<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae2ab22f8b3a94d811832fc65b41d66e4">CWalkComponent::CWalkComponent</a>() : <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html">CBaseComponent</a>()</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a880a8b9b7ec5b22563c6821ae0f1903e">SetType</a>( CRC_WALK );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d9d37f13fd2e111ca6da13efeeefaa7">mp_collision_cache</a> = <a class="code" href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#ae2812510fb736b3f4b87690a2fa23a37">Nx::CCollCacheManager::sCreateCollCache</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a> = NULL;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a> = NULL;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a> = NULL;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>( 0.0f, 0.0f, 0.0f, 0.0f );</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>( 0.0f, 0.0f, 0.0f, 0.0f );</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    </div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1541074b5bb529bbbcf7c1cf2e047189">  155</a></span>&#160;<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1541074b5bb529bbbcf7c1cf2e047189">CWalkComponent::~CWalkComponent</a>()</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#a531b3aa8b0ca163aa2212ea0ef738376">Nx::CCollCacheManager::sDestroyCollCache</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d9d37f13fd2e111ca6da13efeeefaa7">mp_collision_cache</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad8453df58ba446c1017f9a288ed67331">  165</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad8453df58ba446c1017f9a288ed67331">CWalkComponent::Finalize</a>()</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a> = GetInputComponentFromObject(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a> = GetAnimationComponentFromObject(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a42afe47c63bd1b6e471d73dfd5baa6e6">mp_model_component</a> = GetModelComponentFromObject(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a> = GetTriggerComponentFromObject(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afb004ebe80726e356693ce26c049e7a2">mp_physics_control_component</a> = GetSkaterPhysicsControlComponentFromObject(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a> = GetMovableContactComponentFromObject(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a42afe47c63bd1b6e471d73dfd5baa6e6">mp_model_component</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afb004ebe80726e356693ce26c049e7a2">mp_physics_control_component</a>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aedc29855e2817adb3caba2554d998225">  187</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aedc29855e2817adb3caba2554d998225">CWalkComponent::InitFromStructure</a>( <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>* pParams )</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> camera_id;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#aa39e6fe5fdf1d6c48136ae26a7ad511e">GetChecksum</a>(CRCD(0xc4e311fa, <span class="stringliteral">&quot;camera&quot;</span>), &amp;camera_id))</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html">CCompositeObject</a>* p_camera = <span class="keyword">static_cast&lt;</span> <a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html">CCompositeObject</a>* <span class="keyword">&gt;</span>(CCompositeObjectManager::Instance()-&gt;GetObjectByID(camera_id));</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        Dbg_MsgAssert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">mp_camera</a>, (<span class="stringliteral">&quot;No such camera object&quot;</span>));</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8e850e61696d92cfecfe8a6f9f73a234">SetAssociatedCamera</a>(p_camera);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8521fe72114647da75d88c9e044ed8a9">  203</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8521fe72114647da75d88c9e044ed8a9">CWalkComponent::RefreshFromStructure</a>( <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>* pParams )</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aedc29855e2817adb3caba2554d998225">InitFromStructure</a>(pParams);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a93a603eb6f32522550b740ce8d56900d">  213</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a93a603eb6f32522550b740ce8d56900d">CWalkComponent::Update</a>()</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;{</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// TEMP: debounce R1 after a transition</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a73927b864cbb3b9834d0fe3a7edd14e9">m_ignore_grab_button</a> &amp;&amp; !<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a41b59c68e9d4e830401e7d0d63633046">m_R1</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#ad17c4ebd394f8e5966f6291af1477baa">GetPressed</a>())</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a73927b864cbb3b9834d0fe3a7edd14e9">m_ignore_grab_button</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="comment">// zero the frame event</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acdb9db6ebacc956ba2d70ad6c592fa87">m_last_frame_event</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = 0;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="comment">// get input</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aadb3aab545117e6bf7ae7b66c1512054">get_controller_input</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// extract initial state for this frame from the object</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#addf10ff084fa457e293e69afe013ee4c">GetPos</a>();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// note that m_facing and m_upward will often not be orthogonal, but will always span a plan</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">// generally straight up, but now after a transition from skating</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a18d374784f1787eb7b22b92a84084dfc">GetMatrix</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a18d374784f1787eb7b22b92a84084dfc">GetMatrix</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordtype">float</span> length = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (length &lt; 0.001f)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment">// upward facing orientation matrix</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = -<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a18d374784f1787eb7b22b92a84084dfc">GetMatrix</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="comment">// since m_upward is now in the same plan as m_facing, push m_upward up a touch</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += 0.01f;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> /= length;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// set the frame length</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a> = <a class="code" href="../../d1/d0d/namespace_tmr.html#a3560bd3134b7b29bed7013950d91ad06">Tmr::FrameLength</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// go to our true Y position</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acf4c4c75c04baefe7bcbcc1e62b5e8d9">m_curb_float_height_adjusted</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] -= <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// switch logic based on walking state</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a>)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>:</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a0ac69c034862c775af90cd21b01d2182">go_on_ground_state</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>:</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a40ceeaea9d8d11dd084f85e5f1a9c6b1">go_in_air_state</a>();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                                                                      </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">//      case WALKING_HOP:</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">//          go_hop_state();</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">//          break;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                                                      </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">WALKING_HANG</a>:</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a47e2ec8517dde7e41a503e7367923d00">go_hang_state</a>();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a>:</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d02fe38c8947e79e32f6af1b5e98334">go_ladder_state</a>();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4dabd852565c44bedd18e024fe37db60ae9">WALKING_ANIMWAIT</a>:</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a01fc88db74534fc5d7fb6796f45ad37a">go_anim_wait_state</a> (   );</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// the there&#39;s no curb to adjust due to, lerp down to zero</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acf4c4c75c04baefe7bcbcc1e62b5e8d9">m_curb_float_height_adjusted</a>)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a>, 0.0f, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x9b3388fa, <span class="stringliteral">&quot;curb_float_lerp_down_rate&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// adjust back to our curb float Y position</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// scripts may have restarted us / switched us to skating</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//  if (should_bail_from_frame()) return;</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// keep the object from falling through holes in the geometry</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a977c668dbbde50506e556cc1dbc60017">uber_frig</a>();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// rotate to upright</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a577b1a0dc5ac7cdf4184fac9cc61b5c2">lerp_upright</a>();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// setup the object based on this frame&#39;s walking</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a588641f53976ec34f778e00bd1e03d30">copy_state_into_object</a>();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#a4eb63ba2d07ba494d8bbaf4729f2fc68">SelfEvent</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">// set the animation speeds</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">m_anim_scale_speed</a>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aa0c1d396bc8906158daddff344abafdc9">RUNNING</a>:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1ca0f3fadb51de9597cddcf7d65cec">m_anim_standard_speed</a> &gt; 0.0f)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a>-&gt;<a class="code" href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a5aceee61de07d0e4e5a6213e64c0cfe9">SetAnimSpeed</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> / <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1ca0f3fadb51de9597cddcf7d65cec">m_anim_standard_speed</a>, <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aaa6a38eff044e02d2ed197c32263abe57">HANGMOVE</a>:</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a>-&gt;<a class="code" href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a5aceee61de07d0e4e5a6213e64c0cfe9">SetAnimSpeed</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> / <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xd77ee881, <span class="stringliteral">&quot;hang_move_speed&quot;</span>)), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aaab0df6f28b5c50c589e33343f80d61f0">LADDERMOVE</a>:</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a>-&gt;<a class="code" href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a5aceee61de07d0e4e5a6213e64c0cfe9">SetAnimSpeed</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> / <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xab2db54, <span class="stringliteral">&quot;ladder_move_speed&quot;</span>)), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="comment">// camera controls</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// NOTE: script parameters</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a>)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">case</span> CRCC(0xf41aba21, <span class="stringliteral">&quot;Hop&quot;</span>):</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, 0.05f);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">case</span> CRCC(0x2d9815c3, <span class="stringliteral">&quot;HangMoveLeft&quot;</span>):</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> facing = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            facing.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aefd39649915b66c713cf66086ed3f3c5">RotateY</a>(-0.95f);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(facing, 0.05f);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">case</span> CRCC(0x279b1f0b, <span class="stringliteral">&quot;HangMoveRight&quot;</span>):</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> facing = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            facing.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aefd39649915b66c713cf66086ed3f3c5">RotateY</a>(0.95f);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(facing, 0.05f);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                    </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">case</span> CRCC(0x4194ecca, <span class="stringliteral">&quot;Hang&quot;</span>):</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, 0.05f);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">case</span> CRCC(0xc84243da, <span class="stringliteral">&quot;Ladder&quot;</span>):</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">case</span> CRCC(0xaf5abc82, <span class="stringliteral">&quot;LadderMoveUp&quot;</span>):</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">case</span> CRCC(0xfec9dded, <span class="stringliteral">&quot;LadderMoveDown&quot;</span>):</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, 0.05f);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                    </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">case</span> CRCC(0x4fe6069c, <span class="stringliteral">&quot;AnimWait&quot;</span>):</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab7a7dcb7969fa117bddf6a1406212b07">m_anim_wait_camera_mode</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adcba77d4fe60797434fec760204ba2ccade2453676dd680e701cefb522720dc0c">AWC_CURRENT</a>)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, 0.05f);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;            }</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">SetOverrides</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>, 0.05f);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>-&gt;<a class="code" href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#aade7494be74cbc48f94855165a30e660">UnsetOverrides</a>();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">    #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="../../de/d47/namespace_gfx.html#aa5fe969d58eb3f2da559a24244a15ef9">Gfx::AddDebugStar</a>(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/df4/matrix_8h.html#ad393a55b0cd17b6dea798c49863e8de4">GetPos</a>(), 36.0f, MAKE_RGB(255, 255, 255), 1);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aca9a426b8e603f01ef0f9b628ce47659">  407</a></span>&#160;<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6">CBaseComponent::EMemberFunctionResult</a> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aca9a426b8e603f01ef0f9b628ce47659">CWalkComponent::CallMemberFunction</a>( <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> Checksum, <a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a>* pParams, <a class="code" href="../../db/df2/class_script_1_1_c_script.html">Script::CScript</a>* pScript )</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">switch</span> ( Checksum )</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="comment">// @script | Walk_Ground |</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">case</span> CRCC(0x893213e5, <span class="stringliteral">&quot;Walk_Ground&quot;</span>):</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> ? <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056">CBaseComponent::MF_TRUE</a> : <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6abcf1143afd4522b3edc277761a8d4ec1">CBaseComponent::MF_FALSE</a>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="comment">// @script | Walk_Air |</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keywordflow">case</span> CRCC(0x5012082e, <span class="stringliteral">&quot;Walk_Air&quot;</span>):</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a> ? <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056">CBaseComponent::MF_TRUE</a> : <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6abcf1143afd4522b3edc277761a8d4ec1">CBaseComponent::MF_FALSE</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="comment">// @script | Walk_Hang |</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">case</span> CRCC(0x9a3ca853, <span class="stringliteral">&quot;Walk_Hang&quot;</span>):</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">WALKING_HANG</a> ? <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056">CBaseComponent::MF_TRUE</a> : <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6abcf1143afd4522b3edc277761a8d4ec1">CBaseComponent::MF_FALSE</a>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="comment">// @script | Walk_Ladder |</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordflow">case</span> CRCC(0x19702ca8, <span class="stringliteral">&quot;Walk_Ladder&quot;</span>):</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a> ? <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056">CBaseComponent::MF_TRUE</a> : <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6abcf1143afd4522b3edc277761a8d4ec1">CBaseComponent::MF_FALSE</a>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="comment">// @script | Walk_GetStateTime | Loads the time in milliseconds since last state change.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">case</span> CRCC(0xce64576c, <span class="stringliteral">&quot;Walk_GetStateTime&quot;</span>):</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            pScript-&gt;<a class="code" href="../../db/df2/class_script_1_1_c_script.html#a95b75cd110a15699d07bef528f96d7aa">GetParams</a>()-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">AddInteger</a>(CRCD(0x5ab23cc9, <span class="stringliteral">&quot;StateTime&quot;</span>), <a class="code" href="../../d1/d0d/namespace_tmr.html#aeede2bf5e4d84e9aae6110f582389a96">Tmr::ElapsedTime</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a907fc013b062fe33c660f8bdfc55aeb5">m_state_timestamp</a>));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// @script | Walk_Jump |</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">case</span> CRCC(0x83e4bd70, <span class="stringliteral">&quot;Walk_Jump&quot;</span>):</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;            <span class="comment">// jump strength scales with the length the jump button has been held</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac9d773fa5db2d51ea1ee3d51c0bfc349">jump</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">//          jump(Mth::Lerp(</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">//              s_get_gunslinger_param(CRCD(0x246d0bf3, &quot;min_jump_factor&quot;)), </span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">//              1.0f,</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">//              Mth::ClampMax(mp_input_component-&gt;GetControlPad().m_x.GetPressedTime() / s_get_gunslinger_param(CRCD(0x12333ebd, &quot;hold_time_for_max_jump&quot;)), 1.0f)</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">//          ));</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">//      case CRCC(0xeb0d763b, &quot;Walk_HangJump&quot;):</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">//      {</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">//          // jump strength scales with the length the jump button has been held</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">//          jump(s_get_gunslinger_param(CRCD(0xf2fa5845, &quot;hang_jump_factor&quot;)), true);</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">//          break;</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">//      }</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        </div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="comment">// @script | Walk_SetDragFactor |</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">case</span> CRCC(0xc6100a7d, <span class="stringliteral">&quot;Walk_SetDragFactor&quot;</span>):</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">case</span> CRCC(0x4e4fae43, <span class="stringliteral">&quot;Walk_ResetDragFactor&quot;</span>):</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">case</span> CRCC(0xaf04b983, <span class="stringliteral">&quot;Walk_GetSpeedScale&quot;</span>):</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <a class="code" href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a> checksum;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> &lt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xf3649996, <span class="stringliteral">&quot;max_slow_walk_speed&quot;</span>)))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                checksum = CRCD(0x1150cabb, <span class="stringliteral">&quot;WALK_SLOW&quot;</span>);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> &lt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6a5805d8, <span class="stringliteral">&quot;max_fast_walk_speed&quot;</span>)))</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                checksum = CRCD(0x131f2a2, <span class="stringliteral">&quot;WALK_FAST&quot;</span>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> &lt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x1c94cc9c, <span class="stringliteral">&quot;max_slow_run_speed&quot;</span>)))</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                checksum = CRCD(0x5606d106, <span class="stringliteral">&quot;RUN_SLOW&quot;</span>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            {</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                checksum = CRCD(0x4667e91f, <span class="stringliteral">&quot;RUN_FAST&quot;</span>);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            pScript-&gt;<a class="code" href="../../db/df2/class_script_1_1_c_script.html#a95b75cd110a15699d07bef528f96d7aa">GetParams</a>()-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x92c388f, <span class="stringliteral">&quot;SpeedScale&quot;</span>), checksum);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="comment">// @script | Walk_ScaleAnimSpeed | Sets the manner in which the walk animations speeds should be scaled.</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="comment">// @flag Off | No animation speed scaling.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// @flag Run | Scale animation speeds against running speed.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="comment">// @flag Walk | Scale animation speeds against walking speed.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">case</span> CRCC(0x56112c03, <span class="stringliteral">&quot;Walk_ScaleAnimSpeed&quot;</span>):</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">if</span> (pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#aa27bdd009eb62b22c75dac7b9398a902">ContainsFlag</a>(CRCD(0xd443a2bc, <span class="stringliteral">&quot;Off&quot;</span>)))</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">m_anim_scale_speed</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aa85be5d882b259aa21ab1ac0d9df5f843">OFF</a>)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">m_anim_scale_speed</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aa85be5d882b259aa21ab1ac0d9df5f843">OFF</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a>-&gt;<a class="code" href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a5aceee61de07d0e4e5a6213e64c0cfe9">SetAnimSpeed</a>(1.0f, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#aa27bdd009eb62b22c75dac7b9398a902">ContainsFlag</a>(CRCD(0xaf895b3f, <span class="stringliteral">&quot;Run&quot;</span>)))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">m_anim_scale_speed</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aa0c1d396bc8906158daddff344abafdc9">RUNNING</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#aa27bdd009eb62b22c75dac7b9398a902">ContainsFlag</a>(CRCD(0x6384f1da, <span class="stringliteral">&quot;HangMove&quot;</span>)))</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">m_anim_scale_speed</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aaa6a38eff044e02d2ed197c32263abe57">HANGMOVE</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#aa27bdd009eb62b22c75dac7b9398a902">ContainsFlag</a>(CRCD(0xa2bfe505, <span class="stringliteral">&quot;LadderMove&quot;</span>)))</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">m_anim_scale_speed</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aaab0df6f28b5c50c589e33343f80d61f0">LADDERMOVE</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                Dbg_MsgAssert(<span class="keyword">false</span>, (<span class="stringliteral">&quot;Walk_ScaleAnimSpeed requires Off, Run, or Walk flag&quot;</span>));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            pParams-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#acae6f1a5a02d406ab56292ec3fcfaefd">GetFloat</a>(CRCD(0xb2d59baf, <span class="stringliteral">&quot;StandardSpeed&quot;</span>), &amp;<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1ca0f3fadb51de9597cddcf7d65cec">m_anim_standard_speed</a>);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// @script | Walk_AnimWaitComplete | Signal from script that the walk component should leave its animation wait</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="keywordflow">case</span> CRCC(0x9d3eebe8, <span class="stringliteral">&quot;Walk_AnimWaitComplete&quot;</span>):</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a334b804e9478f7f193274d75697b8999">anim_wait_complete</a>();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                            </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="comment">// @script | Walk_GetHangInitAnimType | Determine which type of initial hang animation should be played</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">case</span> CRCC(0xc6cd659e, <span class="stringliteral">&quot;Walk_GetHangInitAnimType&quot;</span>):</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="comment">// m_initial_hang_animation is set when the hang rail is filtered</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            pScript-&gt;<a class="code" href="../../db/df2/class_script_1_1_c_script.html#a95b75cd110a15699d07bef528f96d7aa">GetParams</a>()-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x85fa9ac4, <span class="stringliteral">&quot;HangInitAnimType&quot;</span>), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6652d70459d9c9cc3fb03c1b01dad51c">m_initial_hang_animation</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a56171927079158674d748a0593274357">CBaseComponent::MF_NOT_EXECUTED</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056">CBaseComponent::MF_TRUE</a>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5ac5bec24c2e551489790c95725c2e1c">  538</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5ac5bec24c2e551489790c95725c2e1c">CWalkComponent::GetDebugInfo</a>(<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a> *p_info)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    Dbg_MsgAssert(p_info,(<span class="stringliteral">&quot;NULL p_info sent to CWalkComponent::GetDebugInfo&quot;</span>));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a>)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>:</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            p_info-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x109b9260, <span class="stringliteral">&quot;m_state&quot;</span>), CRCD(0x58007c97, <span class="stringliteral">&quot;GROUND&quot;</span>));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>:</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            p_info-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x109b9260, <span class="stringliteral">&quot;m_state&quot;</span>), CRCD(0x439f4704, <span class="stringliteral">&quot;AIR&quot;</span>));</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">//      case WALKING_HOP:</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">//          p_info-&gt;AddChecksum(CRCD(0x109b9260, &quot;m_state&quot;), CRCD(0xf41aba21, &quot;HOP&quot;));</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">//          break;                                       </span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">WALKING_HANG</a>:</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            p_info-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x109b9260, <span class="stringliteral">&quot;m_state&quot;</span>), CRCD(0x4194ecca, <span class="stringliteral">&quot;HANG&quot;</span>));</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">break</span>;                                       </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a>:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            p_info-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x109b9260, <span class="stringliteral">&quot;m_state&quot;</span>), CRCD(0xc84243da, <span class="stringliteral">&quot;LADDER&quot;</span>));</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordflow">break</span>;                                       </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4dabd852565c44bedd18e024fe37db60ae9">WALKING_ANIMWAIT</a>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            p_info-&gt;<a class="code" href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">AddChecksum</a>(CRCD(0x109b9260, <span class="stringliteral">&quot;m_state&quot;</span>), CRCD(0x4fe6069c, <span class="stringliteral">&quot;ANIMWAIT&quot;</span>));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <span class="keywordflow">break</span>;                                       </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#acb60b78cb120aaaa883df1fd4d4d15bf">CBaseComponent::GetDebugInfo</a>(p_info);     </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;}</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8e850e61696d92cfecfe8a6f9f73a234">  572</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8e850e61696d92cfecfe8a6f9f73a234">CWalkComponent::SetAssociatedCamera</a> ( <a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html">CCompositeObject</a>* camera_obj )</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;{</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">mp_camera</a> = camera_obj;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">mp_camera</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a> = GetWalkCameraComponentFromObject(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">mp_camera</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    Dbg_MsgAssert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">mp_camera_component</a>, (<span class="stringliteral">&quot;No WalkCameraComponent in camera object&quot;</span>));</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;}</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acfa757b8597c4b3189a9aa05893bdcd4">  585</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acfa757b8597c4b3189a9aa05893bdcd4">CWalkComponent::ReadyWalkState</a> ( <span class="keywordtype">bool</span> to_ground_state )</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;{</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// setup the state in preparation for being in walking mode next object update</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    MARK;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="comment">// always reset the state timestamp</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a907fc013b062fe33c660f8bdfc55aeb5">m_state_timestamp</a> = <a class="code" href="../../d1/d0d/namespace_tmr.html#a73fa70536cd356e6914161cb7737fd65">Tmr::GetTime</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">if</span> (to_ground_state)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="comment">// will be incorrect for one frame</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>(0.0f, 1.0f, 0.0);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">// set primary air direction in the direction of velocity</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordtype">float</span> length = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keywordflow">if</span> (length &lt; 0.001f)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="comment">// or facing</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a18d374784f1787eb7b22b92a84084dfc">GetMatrix</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            length = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keywordflow">if</span> (length &lt; 0.001f)</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="comment">// or future facing</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = -<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a18d374784f1787eb7b22b92a84084dfc">GetMatrix</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                length = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> /= length;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">leave_movable_contact_for_air</a>(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;GetVel(), <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;GetVel()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>]);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160; </div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a> = 0.0f;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acdb9db6ebacc956ba2d70ad6c592fa87">m_last_frame_event</a> = 0;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">// TEMP: debounce R1 after a transition</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a73927b864cbb3b9834d0fe3a7edd14e9">m_ignore_grab_button</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28994255913671fef01e95b0a938717c">  645</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28994255913671fef01e95b0a938717c">CWalkComponent::CleanUpWalkState</a> (   )</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;{</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a0ac69c034862c775af90cd21b01d2182">  655</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a0ac69c034862c775af90cd21b01d2182">CWalkComponent::go_on_ground_state</a>( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="comment">// Check for trying to mount a horse, triggered on triangle.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a251ec89a507fa7213bf8d6a389e5489c">m_triangle</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#abb7ba2f7cbeb5c929209152e0200bf4c">GetTriggered</a>())</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a251ec89a507fa7213bf8d6a389e5489c">m_triangle</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#a735c5f3324a7d41a78b16892d5093b9d">ClearTrigger</a>();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        <span class="comment">// Get the control component.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <a class="code" href="../../d4/deb/class_obj_1_1_c_skater_physics_control_component.html">CSkaterPhysicsControlComponent</a>* p_control_component = GetSkaterPhysicsControlComponentFromObject( <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>());</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        p_control_component-&gt;<a class="code" href="../../d4/deb/class_obj_1_1_c_skater_physics_control_component.html#a464204726957c78800bcfd2798040994">CallMemberFunction</a>( CRCD( 0x14c4f16b, <span class="stringliteral">&quot;SkaterPhysicsControl_SwitchWalkingToRiding&quot;</span>), NULL, NULL );</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="comment">// Send the &#39;Ride&#39; exception.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD( 0x64c2832f, <span class="stringliteral">&quot;Ride&quot;</span> );</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#a4eb63ba2d07ba494d8bbaf4729f2fc68">SelfEvent</a>( <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> );</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a175e4af768c563cf579f4048997d4574">account_for_movable_contact</a>();</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad766498be574d6be90a574cb45d0e5b9">setup_collision_cache</a>();</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// calculate initial horizontal speed</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordtype">float</span> horizontal_speed = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a69776cbd692ad0370f7f59cad039df2f">calculate_horizontal_speed_and_facing</a>(horizontal_speed);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// calculate this frame&#39;s movement</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> = horizontal_speed * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// prevent movement into walls</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a00a59f4e756358f5ad9e35744c40c4a9">adjust_horizonal_vel_for_environment</a>())</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="comment">// turn to face newly adjusted velocity</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a026d7238ec78dafaf1e513a2f48a80c8">adjust_facing_for_adjusted_horizontal_vel</a>();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="comment">// if we are wall pushing, we may have decided to switch states during adjust_horizonal_vel_for_environment based on our environment</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> <span class="comment">/*|| should_bail_from_frame()*/</span>)</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="comment">// apply movement for this frame</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// snap up and down curbs and perhaps switch to air</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28f469e9766438223c23b8b53ffb7b13">respond_to_ground</a>();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> <span class="comment">/*|| should_bail_from_frame()*/</span>)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a739e89f6d8b4d5ac5cff457f86b564bf">adjust_curb_float_height</a>();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// insure that we do not slip through the cracks in the collision geometry which are a side-effect of moving collidable objects</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html">CCompositeObject</a>* p_inside_object = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a16e4db6b4c9b98a1e9d9fe4734ab6e50">CheckInsideObjects</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>))</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        MESSAGE(<span class="stringliteral">&quot;WALKING_GROUND, within moving object&quot;</span>);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="comment">// allow it to push us forward, causing a bit of a stumble</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> = p_inside_object-&gt;GetVel();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = 0.0f;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="keywordtype">float</span> speed_sqr = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ab77f5f45e45ad0f1ce8b7d7232a70cb1">LengthSqr</a>();</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">if</span> (speed_sqr &gt; (10.0f * 10.0f))</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> * (1.0f / sqrtf(speed_sqr));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;}</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160; </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a79ec16281183620ea1ec5ca56054ca08">  738</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a79ec16281183620ea1ec5ca56054ca08">CWalkComponent::CollideWithOtherSkaterLost</a> ( <a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html">CCompositeObject</a>* p_other_skater )</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;{</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    </div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">leave_movable_contact_for_air</a>(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;GetVel(), <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;GetVel()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>]);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a69776cbd692ad0370f7f59cad039df2f">  753</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a69776cbd692ad0370f7f59cad039df2f">CWalkComponent::calculate_horizontal_speed_and_facing</a> ( <span class="keywordtype">float</span> &amp;horizontal_speed )</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;{</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// calculate user&#39;s desired speed</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordtype">float</span> desired_speed = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afe2094362feb83d1fdf19df00ef3ce5c">calculate_desired_speed</a>();</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                </div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="comment">// setup frame&#39;s event</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> (desired_speed &lt;= <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x74e8227d, <span class="stringliteral">&quot;max_stand_speed&quot;</span>)))</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    {</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x9b46e749, <span class="stringliteral">&quot;Stand&quot;</span>);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0xaf895b3f, <span class="stringliteral">&quot;Run&quot;</span>);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordtype">bool</span> special_acceleration = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="comment">// adjust facing based on input</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="keywordflow">if</span>( <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> &gt; 0.0f )</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordtype">float</span> dot = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>( <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a> );</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">if</span> (horizontal_speed &lt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x52582d5b, <span class="stringliteral">&quot;max_rotate_in_place_speed&quot;</span>)) &amp;&amp; dot &lt; cosf(<a class="code" href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x5dff96a4, <span class="stringliteral">&quot;max_rotate_in_place_angle&quot;</span>)))))</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            <span class="comment">// low speed rotate to desired orientation with no speed change</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <span class="keywordtype">float</span> delta_angle = <a class="code" href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xb557804b, <span class="stringliteral">&quot;rotate_in_place_rate&quot;</span>))) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <span class="keywordtype">bool</span> left_turn = -<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] + <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] &lt; 0.0f;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a99d5f9a35ca44238df445eabb1af1724">m_run_toggle</a>)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                delta_angle *= <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x7b446c98, <span class="stringliteral">&quot;walk_rotate_factor&quot;</span>));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            }</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <span class="keywordtype">float</span> cos_delta_angle = cosf(left_turn ? delta_angle : -delta_angle);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordtype">float</span> sin_delta_angle = sinf(left_turn ? delta_angle : -delta_angle);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordtype">float</span> adjusted_vel = cos_delta_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] + sin_delta_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = -sin_delta_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] + cos_delta_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = adjusted_vel;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="comment">// check for overturn</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="keywordflow">if</span> (left_turn != (-<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] + <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] &lt; 0.0f))</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="comment">// no acceleration until we reach the desired orientation</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            special_acceleration = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;            <span class="comment">// setup the event</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = left_turn ? CRCD(0xf28adbfc, <span class="stringliteral">&quot;RotateLeft&quot;</span>) : CRCD(0x912220f8, <span class="stringliteral">&quot;RotateRight&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="keywordflow">if</span> (dot &gt; -cosf(<a class="code" href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x2d571c0f, <span class="stringliteral">&quot;max_reverse_angle&quot;</span>)))))</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                <span class="comment">// if the turn angle is soft</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                <span class="comment">// below a speed threshold, scale up the turn rate</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                <span class="keywordtype">float</span> turn_factor;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                <span class="keywordflow">if</span> (horizontal_speed &lt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x27815f69, <span class="stringliteral">&quot;max_pop_speed&quot;</span>)))</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                    <span class="comment">// quick turn</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                    turn_factor = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xb278405d, <span class="stringliteral">&quot;best_turn_factor&quot;</span>)), <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6cb2e5de, <span class="stringliteral">&quot;worse_turn_factor&quot;</span>)), horizontal_speed / <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x27815f69, <span class="stringliteral">&quot;max_pop_speed&quot;</span>))); </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                    <span class="comment">// slower turn</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                    turn_factor = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6cb2e5de, <span class="stringliteral">&quot;worse_turn_factor&quot;</span>));</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                turn_factor *= <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a>;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                <span class="comment">// exponentially approach the new facing</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                <span class="keywordtype">float</span> turn_ratio = turn_factor * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                <span class="keywordflow">if</span> (turn_ratio &gt;= 1.0f)</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                }</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>, turn_ratio);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                <span class="comment">// the turn angle is hard</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                </div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                <span class="keywordflow">if</span> (horizontal_speed &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xf1e97e45, <span class="stringliteral">&quot;min_skid_speed&quot;</span>)))</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                    <span class="comment">// if moving fast enough to require a skidding stop</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                    special_acceleration = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                    horizontal_speed -= <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x9661ed7, <span class="stringliteral">&quot;skid_accel&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                    horizontal_speed = <a class="code" href="../../d5/db9/namespace_mth.html#a2b4280ae191736bc0c6d331bf95a7c87">Mth::ClampMin</a>(horizontal_speed, 0.0f);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x1d537eff, <span class="stringliteral">&quot;Skid&quot;</span>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                    <span class="comment">// if max_rotate_in_place_speed is larger than min_skid_speed and max_reverse_angle points farther in reverse than</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                    <span class="comment">// max_rotate_in_place_angle, as they should, then this code should never be run</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                    <a class="code" href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a>(<span class="stringliteral">&quot;Unexpected state in CWalkComponent::calculate_horizontal_speed_and_facing&quot;</span>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                    </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                    <span class="comment">// to be safe, pop to the new facing</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;        }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (special_acceleration) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="comment">// store desired speed for animation speed scaling</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> = desired_speed;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// adjust desired speed for slope</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    desired_speed = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7cf53422bf3a8a52e69c6d466c449b54">adjust_desired_speed_for_slope</a>(desired_speed);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// linear acceleration; exponential deceleration</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">if</span> (horizontal_speed &gt; desired_speed)</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        horizontal_speed = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(horizontal_speed, desired_speed, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xacfa4e0c, <span class="stringliteral">&quot;decel_factor&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        <span class="keywordflow">if</span> (desired_speed == 0.0f)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <span class="keywordflow">if</span> (horizontal_speed &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x79d182ad, <span class="stringliteral">&quot;walk_speed&quot;</span>)))</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x1d537eff, <span class="stringliteral">&quot;Skid&quot;</span>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;            }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acdb9db6ebacc956ba2d70ad6c592fa87">m_last_frame_event</a> == CRCD(0x1d537eff, <span class="stringliteral">&quot;Skid&quot;</span>) &amp;&amp; horizontal_speed &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x311d02b2, <span class="stringliteral">&quot;stop_skidding_speed&quot;</span>)))</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x1d537eff, <span class="stringliteral">&quot;Skid&quot;</span>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            }</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a99d5f9a35ca44238df445eabb1af1724">m_run_toggle</a>)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            horizontal_speed += <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x4f47c998, <span class="stringliteral">&quot;run_accel_rate&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            horizontal_speed += <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6590a49b, <span class="stringliteral">&quot;walk_accel_rate&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        <span class="keywordflow">if</span> (horizontal_speed &gt; desired_speed)</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            horizontal_speed = desired_speed;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160; </div>
<div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a00a59f4e756358f5ad9e35744c40c4a9">  910</a></span>&#160;<span class="keywordtype">bool</span>  <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a00a59f4e756358f5ad9e35744c40c4a9">CWalkComponent::adjust_horizonal_vel_for_environment</a> ( <span class="keywordtype">void</span> )</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;{</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="comment">// We send out feeler rays to find nearby walls.  We limit velocity to be flush with the first wall found.  If two or more non-parallel walls</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// are found, velocity is zeroed.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordtype">float</span> feeler_length = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x99978d2b, <span class="stringliteral">&quot;feeler_length&quot;</span>));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordtype">float</span> feeler_height = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6da7f696, <span class="stringliteral">&quot;feeler_height&quot;</span>));</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordtype">bool</span> contact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> + 1; n++)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="comment">// setup the the feeler</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keywordflow">if</span> (n == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a>)</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            <span class="comment">// final feeler is for air state only and is at the feet; solves situations in which the feet impact with vertical surfaces which the</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;            <span class="comment">// wall feelers are too high to touch</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>)</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;            {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a>].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac5735ce7cf31a3167f529bea2bbf1b28">in_collision</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;            </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> + <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a> + 0.5f * -<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xa5e2da58, <span class="stringliteral">&quot;gravity&quot;</span>)) * <a class="code" href="../../d5/db9/namespace_mth.html#adc6e7f87c6c36d52a16a9abceee925b4">Mth::Sqr</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        }</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += feeler_height;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> + feeler_length * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa359c688dc5a5fde3ce8a5e062c38e99">calculate_feeler_offset_direction</a>(n);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += feeler_height;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac5735ce7cf31a3167f529bea2bbf1b28">in_collision</a> = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision)</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="preprocessor">            #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(0, 0, 255, 1);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="preprocessor">            #endif</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        contact = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">        #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(255, 0, 0, 1);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;        <span class="comment">// grab the horizontal normal of the contacted wall</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ab67b4ea236fd92dd56edf03fc0f38564">normal</a> = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a857f74a78460c52a1454db73e1c0a59d">GetNormal</a>();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ab67b4ea236fd92dd56edf03fc0f38564">normal</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ab67b4ea236fd92dd56edf03fc0f38564">normal</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="comment">// if we&#39;re on the moving object, don&#39;t count its movement when doing collision detection, as the walker&#39;s velocity is already measured</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="comment">// relative to its movable contact&#39;s</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">if</span> (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a9d80cbafe413f8be6c3409400c3eb517">IsMovableCollision</a>()</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            &amp;&amp; (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7ded233e8dc3439336d8b5feef49f447">HaveContact</a>() || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#a5b8f3611c64d7d04b94ba3b5620fb26a">GetObject</a>() != feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a6213a6d0794e924d7b2b310b97a5e1f2">GetMovingObject</a>()))</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;        {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ade002bc1e8e105fd43b042f6c802882c">movement</a> = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a6213a6d0794e924d7b2b310b97a5e1f2">GetMovingObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>(), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ab67b4ea236fd92dd56edf03fc0f38564">normal</a>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ade002bc1e8e105fd43b042f6c802882c">movement</a> = 0.0f;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;        }</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">// check for wall push</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    {</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a64dd7bc636df9ef5cc0a18581efaf4da">check_for_wall_push</a>())</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;            <span class="comment">// if we&#39;re wall pushing, we may decide to switch states based on our environment</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;            </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0d/namespace_tmr.html#aeede2bf5e4d84e9aae6110f582389a96">Tmr::ElapsedTime</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#a95eee7b82a06adfcb41976e194021662">test_start_time</a>) &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x928e6775, <span class="stringliteral">&quot;hop_delay&quot;</span>)))</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a91b01d646eb74113799e647dbc4f462a">maybe_climb_up_ladder</a>() || <span class="comment">/*maybe_hop_to_hang() ||*/</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab58303a24bb5d1ee544ca45463cacc4f">maybe_jump_low_barrier</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0d/namespace_tmr.html#aeede2bf5e4d84e9aae6110f582389a96">Tmr::ElapsedTime</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#a95eee7b82a06adfcb41976e194021662">test_start_time</a>) &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x38d36700, <span class="stringliteral">&quot;barrier_jump_delay&quot;</span>)))</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;            {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a91b01d646eb74113799e647dbc4f462a">maybe_climb_up_ladder</a>() || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab58303a24bb5d1ee544ca45463cacc4f">maybe_jump_low_barrier</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a41b59c68e9d4e830401e7d0d63633046">m_R1</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#ad17c4ebd394f8e5966f6291af1477baa">GetPressed</a>() &amp;&amp; !<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a73927b864cbb3b9834d0fe3a7edd14e9">m_ignore_grab_button</a>)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a91b01d646eb74113799e647dbc4f462a">maybe_climb_up_ladder</a>(<span class="keyword">true</span>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        }</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keywordflow">if</span> (!contact) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="comment">// push away from walls</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> + 1; n++)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                        </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a85369c8702f7abb6fffe8fae9cfacc48">GetDist</a>() &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0xa20c43b7, <span class="stringliteral">&quot;push_feeler_length&quot;</span>)) / feeler_length)</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        {</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0x4d16f37d, <span class="stringliteral">&quot;push_strength&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ab67b4ea236fd92dd56edf03fc0f38564">normal</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="comment">// from here on we ignore collisions we&#39;re moving out of</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    contact = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> + 1; n++)</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <span class="comment">// don&#39;t count collisions we&#39;re moving out of</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].normal, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>) &gt;= <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../d0/db2/p__camera_8cpp.html#af1e98e1845604922bcc08e0088e8f74f">movement</a>)</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        {</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac5735ce7cf31a3167f529bea2bbf1b28">in_collision</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            contact = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;        }</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordflow">if</span> (!contact) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    </div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="comment">// Now we calculate how our movement is effected by our collisions.  The movement must have a non-negative dot product with all collision normals.</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="comment">// The algorithm used should be valid for all convex environments.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="comment">// if any of the colllision normals are more than right angles to one another, no movement is possible</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="comment">// NOTE: not valid with movable contacts; could cause jerky movement in corners where walls are movable</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> + 1; n++)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    {</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = n + 1; m &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> + 1; m++)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[m].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].normal, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[m].normal) &lt;= 0.0f)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;            {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab8f7791305c26c5bd278c0d38bb7cbeb">Mth::Min</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xbd6a05d, <span class="stringliteral">&quot;min_anim_run_speed&quot;</span>)), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a>);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        }</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    }</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="comment">// direction of proposed movement</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> movement_direction = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    movement_direction.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> adjusted_vel = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="comment">// loop over the contacts (from backward to forward)</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> contact_idxs[] = { 7, 4, 3, 5, 2, 6, 1, 0 };</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> + 1; i++)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    {</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordtype">int</span> n = contact_idxs[i];</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        </div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        <span class="comment">// check to see if the movement still violates this constraint</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordtype">float</span> normal_vel = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(adjusted_vel, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].normal);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        <span class="keywordflow">if</span> (normal_vel &gt;= <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../d0/db2/p__camera_8cpp.html#af1e98e1845604922bcc08e0088e8f74f">movement</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        </div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="comment">// adjust the movement to the closest direction allowed by this contraint</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        adjusted_vel -= (normal_vel - <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ade002bc1e8e105fd43b042f6c802882c">movement</a>) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].normal;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;        <span class="comment">// if the mvoement direction no longer points in the direction of the proposed movement, no movement occurs</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(adjusted_vel, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>) &lt;= 0.0f)</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;        {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>();</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab8f7791305c26c5bd278c0d38bb7cbeb">Mth::Min</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xbd6a05d, <span class="stringliteral">&quot;min_anim_run_speed&quot;</span>)), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    }</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    <span class="comment">// insure that the adjusted velocity in the final direction is not larger than the projection of the initial velocity into that direction</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordtype">float</span> adjusted_speed = adjusted_vel.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> adjusted_vel_direction = adjusted_vel;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    adjusted_vel_direction *= 1.0f / adjusted_speed;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keywordtype">float</span> projected_vel = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, adjusted_vel_direction);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">if</span> (adjusted_speed &gt; projected_vel)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        adjusted_vel = adjusted_vel_direction * projected_vel;</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="comment">// only the velocity along the movement direction is retained</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> = adjusted_vel;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordtype">float</span> final_horiz_vel = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xbd6a05d, <span class="stringliteral">&quot;min_anim_run_speed&quot;</span>)))</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> = final_horiz_vel;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ae729e489f6c4e17060888db3cb5b2a8c">Mth::Max</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xbd6a05d, <span class="stringliteral">&quot;min_anim_run_speed&quot;</span>)), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">m_anim_effective_speed</a>);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    }</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;}</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    </div>
<div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a026d7238ec78dafaf1e513a2f48a80c8"> 1119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a026d7238ec78dafaf1e513a2f48a80c8">CWalkComponent::adjust_facing_for_adjusted_horizontal_vel</a> (   )</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;{</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="comment">// We adjust facing due to adjustment in horizontal velocity due to environment.  Basically, we want to object to turn to face the velocity</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// that the environment has forced upon it.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// IDEA: shift to basing turn amount on angle difference and not speed</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <span class="keywordtype">float</span> horizontal_speed = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>();</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    <span class="keywordflow">if</span> (horizontal_speed &lt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x515a933, <span class="stringliteral">&quot;wall_turn_speed_threshold&quot;</span>))) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="comment">// the new facing is in the direction of our adjusted velocity</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> new_facing = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    new_facing.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    <span class="comment">// smoothly transition between no wall turning to full wall turning</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordtype">float</span> turn_ratio;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <span class="keywordflow">if</span> (horizontal_speed &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xe6c1cd0d, <span class="stringliteral">&quot;max_wall_turn_speed_threshold&quot;</span>)))</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        turn_ratio = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x7a583b9b, <span class="stringliteral">&quot;wall_turn_factor&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    }</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;        turn_ratio = <a class="code" href="../../d5/db9/namespace_mth.html#ab1c1b5804cee65f8c4f453adf4eaf30c">Mth::LinearMap</a>(</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;            0.0f,</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;            <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x7a583b9b, <span class="stringliteral">&quot;wall_turn_factor&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>,</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            horizontal_speed,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;            <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x0515a933, <span class="stringliteral">&quot;wall_turn_speed_threshold&quot;</span>)),</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xe6c1cd0d, <span class="stringliteral">&quot;max_wall_turn_speed_threshold&quot;</span>))</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        );</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// exponentially approach new facing</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">if</span> (turn_ratio &gt;= 1.0f)</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = new_facing;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    {</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, new_facing, turn_ratio);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    }</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7cf53422bf3a8a52e69c6d466c449b54"> 1168</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7cf53422bf3a8a52e69c6d466c449b54">CWalkComponent::adjust_desired_speed_for_slope</a> ( <span class="keywordtype">float</span> desired_speed )</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;{</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// Slow velocity up and down slopes.</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="comment">// skip if there is no appreciable slope</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] &gt; 0.95f) <span class="keywordflow">return</span> desired_speed;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// skip if not running</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keywordflow">if</span> (desired_speed &lt;= <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x79d182ad, <span class="stringliteral">&quot;walk_speed&quot;</span>))) <span class="keywordflow">return</span> desired_speed;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="comment">// calculate a horizontal vector up the slope</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> up_slope = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    up_slope[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    up_slope.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// horizontal factor of velocity if the velocity were pointing along the slope (instead of along the horizontal)</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordtype">float</span> movement_factor = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    </div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <span class="comment">// factor of velocity pointing up the slope</span></div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordtype">float</span> dot = <a class="code" href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a>(<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>, up_slope));</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="comment">// scale the up-the-slope element of velocity based on the slope strength</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keywordflow">return</span> (1.0f - dot) * desired_speed + dot * movement_factor * desired_speed;</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    </div>
<div class="line"><a name="l01198"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28f469e9766438223c23b8b53ffb7b13"> 1198</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28f469e9766438223c23b8b53ffb7b13">CWalkComponent::respond_to_ground</a> (   )</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;{</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <span class="comment">// Look for the ground below us.  If we find it, snap to it.  If not, go to air state.</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xcee3a3e1, <span class="stringliteral">&quot;snap_up_height&quot;</span>));</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] -= <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xaf3e4251, <span class="stringliteral">&quot;snap_down_height&quot;</span>));</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    </div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <span class="keywordflow">if</span> (!feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>())</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <span class="comment">// no ground</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;        </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a>)</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;        {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a>-&gt;<a class="code" href="../../df/d8e/class_obj_1_1_c_trigger_component.html#a22c10b196e94076c0715a8d1c8185b04">CheckFeelerForTrigger</a>(<a class="code" href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96a5212c4cff0cf263caa5ffa600233b32e">TRIGGER_SKATE_OFF_EDGE</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a>);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">//          if (should_bail_from_frame()) return;</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a251ec89a507fa7213bf8d6a389e5489c">m_triangle</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#ad17c4ebd394f8e5966f6291af1477baa">GetPressed</a>())</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <span class="comment">// need to give the player a change to rail before climbing down ladders and such</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            </div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;            <span class="comment">// if we just climbed up to a rail and are immediately falling, we need some minute amount of movement in order to find a rail</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>)</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += 0.001f;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;            }</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;            </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1b8a1a1c44669478e82c888f170250d9">maybe_stick_to_rail</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        }</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a2c975b7481991f160a8483738e749f69">maybe_climb_down_ladder</a>() || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6fad5dcf6774ce730b69880d78568b5e">maybe_drop_to_hang</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="comment">// go to air state</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">leave_movable_contact_for_air</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0xabf1f6ac, <span class="stringliteral">&quot;WalkOffEdge&quot;</span>);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="keywordtype">float</span> snap_distance = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">GetPoint</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] - <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    </div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">// no not send event for very small snaps</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a>(snap_distance) &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xd3193d8e, <span class="stringliteral">&quot;max_unnoticed_ground_snap&quot;</span>)))</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    {</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#a4eb63ba2d07ba494d8bbaf4729f2fc68">SelfEvent</a>(snap_distance &gt; 0.0f ? CRCD(0x93fcf3ed, <span class="stringliteral">&quot;SnapUpEdge&quot;</span>) : CRCD(0x56e21153, <span class="stringliteral">&quot;SnapDownEdge&quot;</span>));</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    }</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="comment">// snap position to the ground</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">GetPoint</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// adjust stair float distance</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a> = <a class="code" href="../../d5/db9/namespace_mth.html#a2b4280ae191736bc0c6d331bf95a7c87">Mth::ClampMin</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a> - snap_distance, 0.0f);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="comment">// see if we&#39;ve changed sectors</span></div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a>.<a class="code" href="../../dc/d35/class_c_feeler.html#a80fea312ec3a472e288443b2f4435d7c">GetSector</a>() != feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a80fea312ec3a472e288443b2f4435d7c">GetSector</a>())</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    {</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a>)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;        {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a>-&gt;<a class="code" href="../../df/d8e/class_obj_1_1_c_trigger_component.html#a22c10b196e94076c0715a8d1c8185b04">CheckFeelerForTrigger</a>(<a class="code" href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96a11d971bf64c28d68889d7345f89ca63a">TRIGGER_SKATE_OFF</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="comment">//          if (should_bail_from_frame()) return;</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;        }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a>-&gt;<a class="code" href="../../df/d8e/class_obj_1_1_c_trigger_component.html#a22c10b196e94076c0715a8d1c8185b04">CheckFeelerForTrigger</a>(<a class="code" href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96aadf20212cefc7ed5d1d0857043da8582">TRIGGER_SKATE_ONTO</a>, feeler);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">//      if (should_bail_from_frame()) return;</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    </div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">// stash the ground feeler so that we can trip the group&#39;s triggers at a later time</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a> = feeler;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// set the ground normal for next frame&#39;s velocity slope adjustment</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a> = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a857f74a78460c52a1454db73e1c0a59d">GetNormal</a>();</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">// NOTE: need to repeat this code anywhere we enter the ground state</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a99fadd1411647c164bebaefc636c10f7">CheckForMovableContact</a>(feeler);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    </div>
<div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a739e89f6d8b4d5ac5cff457f86b564bf"> 1283</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a739e89f6d8b4d5ac5cff457f86b564bf">CWalkComponent::adjust_curb_float_height</a> (   )</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;{</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// adjust m_curb_float_height to smooth out moving up stairs</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    </div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="comment">// When facing a curb, we smoothly increase m_curb_float_height to the height of the curb.  When we snap up the curb, m_curb_float_height is then</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="comment">// reduced by an amount equal to the snap distance.</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <span class="comment">// When we snap down a curb, m_curb_float_height is increased by the snap distance.  We then drop m_curb_float_height smoothly to zero.</span></div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">// determine appropriate direction to search for a curb</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> feeler_direction = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    feeler_direction.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a66f11c6027ceb3ee7527e4a70690b71d">ProjectToPlane</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a>);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    feeler_direction[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = <a class="code" href="../../d5/db9/namespace_mth.html#a2b4280ae191736bc0c6d331bf95a7c87">Mth::ClampMin</a>(feeler_direction[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>], 0.0f);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    feeler_direction.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="comment">// look for a curb</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += 0.5f;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> + <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x11edcc52, <span class="stringliteral">&quot;curb_float_feeler_length&quot;</span>)) * feeler_direction;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += 0.5f;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="preprocessor">    #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(0, 255, 0, 1);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">if</span> (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>())</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        <span class="comment">// grab the distance to the curb</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordtype">float</span> distance_to_curb = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a85369c8702f7abb6fffe8fae9cfacc48">GetDist</a>();</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;        </div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="comment">// look up from the curb to find the curb height</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">GetPoint</a>() + 0.5f * feeler_direction;</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] + <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xcee3a3e1, <span class="stringliteral">&quot;snap_up_height&quot;</span>));</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="preprocessor">        #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(0, 255, 255, 1);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        </div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        <span class="keywordflow">if</span> (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>())</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        {</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;            <span class="comment">// calculate the m_curb_float_height we should have based on the curb height and distance</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            <span class="keywordtype">float</span> appropriate_curb_float_height = (1.0f - distance_to_curb) * (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">GetPoint</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] - <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>]);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            </div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a>) &lt; 0.01f &amp;&amp; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> == 0.0f &amp;&amp; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ab77f5f45e45ad0f1ce8b7d7232a70cb1">LengthSqr</a>() &lt; <a class="code" href="../../d5/db9/namespace_mth.html#adc6e7f87c6c36d52a16a9abceee925b4">Mth::Sqr</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x227d72ee, <span class="stringliteral">&quot;min_curb_height_adjust_vel&quot;</span>))))</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;            {</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                <span class="comment">// don&#39;t update the curb height if we&#39;re on the ground and standing still; this is mostly to prevent snapping up right after landing a jump</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            }</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                <span class="comment">// lerp to the appropriate height</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">m_curb_float_height</a>, appropriate_curb_float_height, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x856a80d3, <span class="stringliteral">&quot;curb_float_lerp_up_rate&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acf4c4c75c04baefe7bcbcc1e62b5e8d9">m_curb_float_height_adjusted</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        }</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;}</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a175e4af768c563cf579f4048997d4574"> 1351</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a175e4af768c563cf579f4048997d4574">CWalkComponent::account_for_movable_contact</a> (   )</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;{</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7cf22b37f0b4630f05c96cc5e6e5dde7">UpdateContact</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#ae1bf784318d82abc8c88032909614c63">GetMovement</a>();</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#aaf815222fd2942e7c260d2b6c7eda5b9">IsRotated</a>())</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#aed83af43d377de4ce03ccf89cac599be">GetRotation</a>().<a class="code" href="../../d9/d37/class_mth_1_1_matrix.html#ad0595a262667a0ac38df0e5b8ad09d7d">Rotate</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] != 0.0f)</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;        {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;            DUMPF(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>]);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160; </div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    </div>
<div class="line"><a name="l01374"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac9d773fa5db2d51ea1ee3d51c0bfc349"> 1374</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac9d773fa5db2d51ea1ee3d51c0bfc349">CWalkComponent::jump</a> (   )</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;{</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="comment">// switch to air state and give the object an upwards velocity</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    </div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordtype">float</span> strength = 0.0f;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a>)</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    {</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>:</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>:</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;            <span class="comment">// jump strength scales with the length the jump button has been held</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            strength = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0x246d0bf3, <span class="stringliteral">&quot;min_jump_factor&quot;</span>)), </div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                1.0f,</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                <a class="code" href="../../d5/db9/namespace_mth.html#a7605206f9d659981632c4d485ffb6a6b">Mth::ClampMax</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#acacdfcec7b1baa226b85f7ea3f8461ef">m_x</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#a345702274dac5d99497f6f2ce2616dba">GetPressedTime</a>() / <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0x12333ebd, <span class="stringliteral">&quot;hold_time_for_max_jump&quot;</span>)), 1.0f)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;            );</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;            </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">WALKING_HANG</a>:</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a>:</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4dabd852565c44bedd18e024fe37db60ae9">WALKING_ANIMWAIT</a>:</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;            strength = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0xf2fa5845, <span class="stringliteral">&quot;hang_jump_factor&quot;</span>));</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    }</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// if we&#39;re jumping from the ground, trip the ground&#39;s triggers</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> &amp;&amp; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a>)</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    {</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a>-&gt;<a class="code" href="../../df/d8e/class_obj_1_1_c_trigger_component.html#a22c10b196e94076c0715a8d1c8185b04">CheckFeelerForTrigger</a>(<a class="code" href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96ab541c3d1b7149f1661716aaf606ba911">TRIGGER_JUMP_OFF</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a>);</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afb004ebe80726e356693ce26c049e7a2">mp_physics_control_component</a>-&gt;<a class="code" href="../../d4/deb/class_obj_1_1_c_skater_physics_control_component.html#a229415c2830e3032c4f5734b77089936">HaveBeenReset</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    }</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// Called by script from outside of the component update, so m_vertical_vel is not used.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = strength * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0x63d62a21, <span class="stringliteral">&quot;jump_velocity&quot;</span>));</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="comment">// jumps for ladders and hanging get a backwards velocity</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a>)</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>:</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>:</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        {</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">//          extract_state_from_object();</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a>)</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                <span class="keywordtype">float</span> min_launch_speed = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afe2094362feb83d1fdf19df00ef3ce5c">calculate_desired_speed</a>()</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;                    * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">s_get_param</a>(CRCD(0x839fe542, <span class="stringliteral">&quot;jump_horiz_speed&quot;</span>)) / <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad572966df3606ec1a093dac7d3dd321e">get_run_speed</a>();</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                </div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>) &gt; 0.0f)</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;                {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#abdb5dd9ff4493d6fb1005969e608bed1">ProjectToNormal</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>);</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Length</a>() &lt; min_launch_speed)</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                    {</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;                        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>(min_launch_speed);</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                    }</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;                }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;                {</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> = min_launch_speed * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;                </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;            {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            }</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;            </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;<span class="comment">//          adjust_jump_for_ceiling_obstructions();</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;            <span class="comment">// setup primary air direction</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            <span class="keywordtype">float</span> length_sqr = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ab77f5f45e45ad0f1ce8b7d7232a70cb1">LengthSqr</a>();</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keywordflow">if</span> (length_sqr &gt; 0.01f)</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>;</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> /= sqrtf(length_sqr);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            }</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a588641f53976ec34f778e00bd1e03d30">copy_state_into_object</a>();</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;        }</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4dabd852565c44bedd18e024fe37db60ae9">WALKING_ANIMWAIT</a>:</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a1fec63eae4ac97e75153bd9cf9b998fe">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a67fa51ea36179286d854a5c588d3f55d">distance</a> = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a6d9f3164d7a72289304a6df0840dd8ce">normal</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> + <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae36a595e48c954bc50031e45a1232bf6">m_critical_point_offset</a>);</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;            </div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = 0.0f;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = 0.0f;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">WALKING_HANG</a>:</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a1fec63eae4ac97e75153bd9cf9b998fe">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a6d9f3164d7a72289304a6df0840dd8ce">normal</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a67fa51ea36179286d854a5c588d3f55d">distance</a> = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a6d9f3164d7a72289304a6df0840dd8ce">normal</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> + <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae36a595e48c954bc50031e45a1232bf6">m_critical_point_offset</a>);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">m_false_wall</a>.<a class="code" href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#af0da42263f80627049ad20aba63673d0">cancel_height</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] - <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a58bfca2c0d25209f17ca5559dcf75355">m_vertical_hang_offset</a>;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;            </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = 0.0f;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = 0.0f;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a>:</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = 0.0f;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = 0.0f;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    }</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    </div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">leave_movable_contact_for_air</a>(<a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;GetVel(), <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;GetVel()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>]);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#aa5331d6b04c4b9a19512c3076d083f83">BroadcastEvent</a>(CRCD(0x8687163a, <span class="stringliteral">&quot;SkaterJump&quot;</span>));</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;}</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    </div>
<div class="line"><a name="l01500"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a40ceeaea9d8d11dd084f85e5f1a9c6b1"> 1500</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a40ceeaea9d8d11dd084f85e5f1a9c6b1">CWalkComponent::go_in_air_state</a> (   )</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;{</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad766498be574d6be90a574cb45d0e5b9">setup_collision_cache</a>();</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="comment">// default air event</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x439f4704, <span class="stringliteral">&quot;Air&quot;</span>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    <span class="comment">// user control of horizontal velocity</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aae07aedd25d9d42b2b896d47d480f8b2">control_horizontal_vel</a>();</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    <span class="comment">// prevent movement into walls</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a00a59f4e756358f5ad9e35744c40c4a9">adjust_horizonal_vel_for_environment</a>();</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">//  if (should_bail_from_frame()) return;</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    <span class="comment">// check for head bonking</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaea9b7f5b7d1448d27e09c5766a6f1fe">adjust_vertical_vel_for_ceiling</a>();</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="comment">// apply movement and acceleration for this frame</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a> + 0.5f * -<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xa5e2da58, <span class="stringliteral">&quot;gravity&quot;</span>)) * <a class="code" href="../../d5/db9/namespace_mth.html#adc6e7f87c6c36d52a16a9abceee925b4">Mth::Sqr</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> += -<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xa5e2da58, <span class="stringliteral">&quot;gravity&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <span class="comment">// see if we&#39;ve landed yet</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a43d215f3a5dadabc06e47688b6f30823">check_for_landing</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a> <span class="comment">/*|| should_bail_from_frame()*/</span>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    <span class="comment">// maybe grab a rail; delay regrabbing of hang rails</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a41b59c68e9d4e830401e7d0d63633046">m_R1</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#ad17c4ebd394f8e5966f6291af1477baa">GetPressed</a>() &amp;&amp; !<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a73927b864cbb3b9834d0fe3a7edd14e9">m_ignore_grab_button</a></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;        &amp;&amp; ((<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adca4db4359bb306dd1c047706ee38d14">m_previous_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">WALKING_HANG</a> &amp;&amp; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adca4db4359bb306dd1c047706ee38d14">m_previous_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a>) || <a class="code" href="../../d1/d0d/namespace_tmr.html#aeede2bf5e4d84e9aae6110f582389a96">Tmr::ElapsedTime</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a907fc013b062fe33c660f8bdfc55aeb5">m_state_timestamp</a>) &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xe6e0c0a4, <span class="stringliteral">&quot;rehang_delay&quot;</span>))))</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adca4db4359bb306dd1c047706ee38d14">m_previous_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">WALKING_LADDER</a>)</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        {</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            <span class="comment">// can&#39;t regrab ladders</span></div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a30280997913993fc998b4b6a71808b6d">maybe_grab_to_hang</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>))</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;            }</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        }</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a30280997913993fc998b4b6a71808b6d">maybe_grab_to_hang</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>) || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4d6ef4db7092846a673dd137b0807cf">maybe_grab_to_ladder</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>))</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;            {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;            }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;        }</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    </div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#a251ec89a507fa7213bf8d6a389e5489c">m_triangle</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#ad17c4ebd394f8e5966f6291af1477baa">GetPressed</a>())</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;    {</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1b8a1a1c44669478e82c888f170250d9">maybe_stick_to_rail</a>())</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;        {</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;            <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="comment">// insure that we do not slip through the cracks in the collision geometry which are a side-effect of moving collidable objects</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> previous_pos = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html">CCompositeObject</a>* p_inside_object = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a16e4db6b4c9b98a1e9d9fe4734ab6e50">CheckInsideObjects</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>))</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    {</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;        MESSAGE(<span class="stringliteral">&quot;WALKING_AIR, within moving object&quot;</span>);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>();</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = 0.0f;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a43d215f3a5dadabc06e47688b6f30823">check_for_landing</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>, previous_pos);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    }</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a>();</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;}</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160; </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aae07aedd25d9d42b2b896d47d480f8b2"> 1578</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aae07aedd25d9d42b2b896d47d480f8b2">CWalkComponent::control_horizontal_vel</a> (   )</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;{</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="comment">// We allow user control over the object&#39;s in air velocity.  The algorithm is complicated by the fact that the forward velocity of the jump needs</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;    <span class="comment">// to be accounted for when allowing for velocity adjustment.  It is assumed that the jump direction is the same as the facing.</span></div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;    <span class="comment">// remove uncontrollable velocity term</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> -= <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;    <span class="comment">// forced run still works in the air</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    adjust_control_for_forced_run();</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;    </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <span class="comment">// adjust speed by the script set drag factor</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    <span class="keywordtype">float</span> adjust_magnitude = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a>;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    </div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="comment">// adjust velocity perpendicular to jump direction</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <span class="comment">// direction perpendicular to jump direction</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> perp_direction(-<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>], 0.0f, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>]);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// desired perpendicular velocity</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="keywordtype">float</span> perp_desired_vel = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x896c8888, <span class="stringliteral">&quot;jump_adjust_speed&quot;</span>)) * adjust_magnitude * <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>, perp_direction);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    </div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// current perpendicular velocity</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="keywordtype">float</span> perp_vel = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, perp_direction);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="comment">// exponentially approach desired velocity</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    perp_vel = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(perp_vel, perp_desired_vel, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xf085443b, <span class="stringliteral">&quot;jump_accel_factor&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;        </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="comment">// adjust velocity parallel to jump direction</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// desired parallel velocity</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordtype">float</span> para_desired_vel = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x896c8888, <span class="stringliteral">&quot;jump_adjust_speed&quot;</span>)) * adjust_magnitude * <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <span class="comment">// current parallel velocity</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordtype">float</span> para_vel = <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a>);</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;    <span class="comment">// if desired velocity if forward and forward velocity already exceeds adjustment velocity</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="keywordflow">if</span> (para_desired_vel &gt;= 0.0f &amp;&amp; para_vel &gt; para_desired_vel)</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        <span class="comment">// do nothing; don&#39;t slow down the jump</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    }</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        <span class="comment">// adjust desired velocity to center around current velocity to insure that our in air stopping ability is not too amazing</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">if</span> (para_desired_vel &lt; 0.0f &amp;&amp; para_vel &gt; 0.0f)</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;        {</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            para_desired_vel += para_vel;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;        }</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;        <span class="comment">// expondentially approach desired velocity</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;        para_vel = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(para_vel, para_desired_vel, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xf085443b, <span class="stringliteral">&quot;jump_accel_factor&quot;</span>)) * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    }</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// rebuild horizontal velocity from parallel and perpendicular components</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> = para_vel * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> + perp_vel * perp_direction;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="comment">// reinstitute uncontrollable velocity term</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;}</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaea9b7f5b7d1448d27e09c5766a6f1fe"> 1644</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaea9b7f5b7d1448d27e09c5766a6f1fe">CWalkComponent::adjust_vertical_vel_for_ceiling</a> (   )</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;{</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment">// If we hit our head, zero vertical velocity</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="comment">// only worry about the ceiling if we&#39;re moving upwards</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> &lt;= 0.0f) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">// look for a collision up through the body to the head</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x9ea1974a, <span class="stringliteral">&quot;walker_height&quot;</span>));</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="keywordflow">if</span> (!feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="comment">// zero upward velocity</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = 0.0f;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#a4eb63ba2d07ba494d8bbaf4729f2fc68">SelfEvent</a>(CRCD(0x6e84acf3, <span class="stringliteral">&quot;HitCeiling&quot;</span>));</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;}</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    </div>
<div class="line"><a name="l01669"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a43d215f3a5dadabc06e47688b6f30823"> 1669</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a43d215f3a5dadabc06e47688b6f30823">CWalkComponent::check_for_landing</a> ( <span class="keyword">const</span> <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>&amp; previous_pos, <span class="keyword">const</span> <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>&amp; final_pos )</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;{</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="comment">// See if our feet have passed through geometry.  If so, snap to it and go to ground state.</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = previous_pos;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = final_pos;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="keywordflow">if</span> (!feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="comment">// snap to the collision point</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">GetPoint</a>();</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    </div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="comment">// zero vertical velocity</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = 0.0f;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">// change to ground state</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="comment">// stash the feeler</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a> = feeler;</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    </div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    <span class="comment">// trip any land trigger</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">mp_trigger_component</a>-&gt;<a class="code" href="../../df/d8e/class_obj_1_1_c_trigger_component.html#a22c10b196e94076c0715a8d1c8185b04">CheckFeelerForTrigger</a>(<a class="code" href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96ad680cd054a615d490c23cb1633d54eef">TRIGGER_LAND_ON</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">m_last_ground_feeler</a>);</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="comment">//  if (should_bail_from_frame()) return;</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    </div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    <span class="comment">// setup our ground normal for next frames velocity slope adjustment</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a> = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#a857f74a78460c52a1454db73e1c0a59d">GetNormal</a>();</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    </div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="comment">// check for a moving contact</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a99fadd1411647c164bebaefc636c10f7">CheckForMovableContact</a>(feeler);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7ded233e8dc3439336d8b5feef49f447">HaveContact</a>())</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    {</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a> -= <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#a5b8f3611c64d7d04b94ba3b5620fb26a">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>();</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    }</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    </div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="comment">// retain only that velocity which is parallel to our facing and forward</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>) &gt; 0.0f)</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#abdb5dd9ff4493d6fb1005969e608bed1">ProjectToNormal</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    }</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>();</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    }</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="comment">// clear any jump requests</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>().<a class="code" href="../../de/d49/class_c_skater_pad.html#acacdfcec7b1baa226b85f7ea3f8461ef">m_x</a>.<a class="code" href="../../da/dd9/class_c_skater_button.html#a61b52b36077d564ddebe8d614572e9e2">ClearRelease</a>();</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    </div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x57ff2a27, <span class="stringliteral">&quot;Land&quot;</span>);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;}</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160; </div>
<div class="line"><a name="l01727"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a977c668dbbde50506e556cc1dbc60017"> 1727</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a977c668dbbde50506e556cc1dbc60017">CWalkComponent::uber_frig</a> (   )</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <span class="comment">// insure that we don&#39;t fall to the center of the earth, even if there are holes in the geometry; also, do lighting since we&#39;ve got the feeler anyway</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    </div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += 1.0f;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] -= FEET(400);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="keywordflow">if</span> (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>())</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    {</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a42afe47c63bd1b6e471d73dfd5baa6e6">mp_model_component</a>-&gt;<a class="code" href="../../df/d52/class_obj_1_1_c_model_component.html#a000aef42ee124576ed2623e5cf0bebf9">ApplyLightingFromCollision</a>(feeler);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    }</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    </div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    MESSAGE(<span class="stringliteral">&quot;applying uber frig&quot;</span>);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">// teleport us back to our position at the frame&#39;s start; not pretty, but this isn&#39;t supposed to be</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">m_frame_start_pos</a>;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="comment">// zero our velocity too</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>();</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = 0.0f;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="comment">// set our state to ground</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                </div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">m_last_ground_feeler_valid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">m_ground_normal</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>(0.0f, 1.0f, 0.0f);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">// reset our script state</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x57ff2a27, <span class="stringliteral">&quot;Land&quot;</span>);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;}</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    </div>
<div class="line"><a name="l01768"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a577b1a0dc5ac7cdf4184fac9cc61b5c2"> 1768</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a577b1a0dc5ac7cdf4184fac9cc61b5c2">CWalkComponent::lerp_upright</a> (   )                                      </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;{</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] == 1.0f) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] &gt; 0.999f)</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;    {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>(0.0f, 1.0f, 0.0f);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;    }</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    </div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a> = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>, <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>(0.0f, 1.0f, 0.0f), <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xf22c135, <span class="stringliteral">&quot;lerp_upright_rate&quot;</span>)) * <a class="code" href="../../d1/d0d/namespace_tmr.html#a3560bd3134b7b29bed7013950d91ad06">Tmr::FrameLength</a>());</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;}</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a64dd7bc636df9ef5cc0a18581efaf4da"> 1787</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a64dd7bc636df9ef5cc0a18581efaf4da">CWalkComponent::check_for_wall_push</a> (   )</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;{</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;    <span class="comment">// ensure we have a forward contact</span></div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[0].in_collision &amp;&amp; !<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[1].in_collision &amp;&amp; !<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> - 1].in_collision)</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;    {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#ab05c4755d02637c711f49c56f5b00e11">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    </div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="comment">// ensure that control is maxed out</span></div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">m_control_pegged</a>)</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#ab05c4755d02637c711f49c56f5b00e11">active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    }</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#ab05c4755d02637c711f49c56f5b00e11">active</a>)</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    {</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;        <span class="comment">// if we&#39;re not testing, simply start the test</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#a95eee7b82a06adfcb41976e194021662">test_start_time</a> = <a class="code" href="../../d1/d0d/namespace_tmr.html#a73fa70536cd356e6914161cb7737fd65">Tmr::GetTime</a>();</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">m_wall_push_test</a>.<a class="code" href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#ab05c4755d02637c711f49c56f5b00e11">active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    }</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;}</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab58303a24bb5d1ee544ca45463cacc4f"> 1816</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab58303a24bb5d1ee544ca45463cacc4f">CWalkComponent::maybe_jump_low_barrier</a> (   )</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;{</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="comment">// For each forward contact in collision, we check to see if any lacks a collision at the maximum jump height.  For any that do, we find the first height</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="comment">// at which they are in contact.  The lowest such height is used at the target jump height.</span></div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> p_forward_contact_idxs[] = { 0, 1, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a> - 1 };</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="comment">// we use the lowest hang height as the maximum autojump barrier height</span></div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keywordtype">float</span> top_feeler_height = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x2c942693, <span class="stringliteral">&quot;lowest_hang_height&quot;</span>));</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordtype">float</span> feeler_length = 2.0f * <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x99978d2b, <span class="stringliteral">&quot;feeler_length&quot;</span>));</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordtype">float</span> height_increment = (top_feeler_height - <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6da7f696, <span class="stringliteral">&quot;feeler_height&quot;</span>))) / <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aaac752a8d61275fb9995e31bbb4a04522">vNUM_BARRIER_HEIGHT_FEELERS</a>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a> feeler;</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="comment">// setup collision cache</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <a class="code" href="../../dc/d50/class_mth_1_1_c_b_box.html">Mth::CBBox</a> bbox(</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> - <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>(feeler_length + 1.0f, 0.0f, feeler_length + 1.0f),</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> + <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>(feeler_length + 1.0f, top_feeler_height + 1.0f, feeler_length + 1.0f)</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    );</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;    <a class="code" href="../../d5/d4f/class_nx_1_1_c_coll_cache.html">Nx::CCollCache</a>* p_coll_cache = <a class="code" href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#ae2812510fb736b3f4b87690a2fa23a37">Nx::CCollCacheManager::sCreateCollCache</a>();</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    p_coll_cache-&gt;<a class="code" href="../../d5/d4f/class_nx_1_1_c_coll_cache.html#ad1834000d2f81e13ad86003ce63efb8c">Update</a>(bbox);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#ae044cb7b9d1c93c18e62fb1c03fe6b51">SetCache</a>(p_coll_cache);</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <span class="comment">// loop over forward collisions and check to see if the barrier in each of their directions is jumpable</span></div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;    <span class="keywordtype">bool</span> jumpable = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        <span class="keywordtype">int</span> n = p_forward_contact_idxs[i];</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        </div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        </div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;        <span class="comment">// first check to see if the collision normal is not too transverse to the control direction, making a autojump unlikely to succeed</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].normal, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>) &gt; -cosf(<a class="code" href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x78e6a5ec, <span class="stringliteral">&quot;barrier_jump_max_angle&quot;</span>)))))</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac463d986a8302577c29fc80cce952bba">jumpable</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        }</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        </div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += top_feeler_height;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> + feeler_length * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa359c688dc5a5fde3ce8a5e062c38e99">calculate_feeler_offset_direction</a>(n);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        </div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].<a class="code" href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac463d986a8302577c29fc80cce952bba">jumpable</a> = !feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>();</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].jumpable)</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        {</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            jumpable = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;<span class="preprocessor">            #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(0, 0, 255, 0);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;<span class="preprocessor">            #endif</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        }</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;        {</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;<span class="preprocessor">            #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;            {</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(255, 0, 0, 0);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;            }</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="preprocessor">            #endif</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;        }</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    }</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="comment">// if the barrier is not jumpable</span></div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;    <span class="keywordflow">if</span> (!jumpable)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="comment">// no autojump</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <a class="code" href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#a531b3aa8b0ca163aa2212ea0ef738376">Nx::CCollCacheManager::sDestroyCollCache</a>(p_coll_cache);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    }</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="comment">// loop over the jumpable collision directions</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="keywordtype">float</span> lowest_height = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] + top_feeler_height;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    {</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        <span class="keywordtype">int</span> n = p_forward_contact_idxs[i];</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].in_collision) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">mp_contacts</a>[n].jumpable) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>;</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += top_feeler_height;</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;        feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> + feeler_length * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa359c688dc5a5fde3ce8a5e062c38e99">calculate_feeler_offset_direction</a>(n);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;        </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        <span class="comment">// look for the barrier height</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> h = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aaac752a8d61275fb9995e31bbb4a04522">vNUM_BARRIER_HEIGHT_FEELERS</a> - 1; h--; )</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] -= height_increment;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] -= height_increment;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            <span class="keywordflow">if</span> (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>())</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;            {</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="preprocessor">                #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;                {</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;                    feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(255, 0, 0, 0);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;                }</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="preprocessor">                #endif</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;            }</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="preprocessor">                #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;                {</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                    feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(0, 255, 0, 0);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="preprocessor">                #endif</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;            }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        <span class="comment">// find the lowest barrier of the jumpable directions</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="keywordflow">if</span> (lowest_height &gt; feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>])</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        {</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            lowest_height = feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;        }</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    }</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;    </div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <a class="code" href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#a531b3aa8b0ca163aa2212ea0ef738376">Nx::CCollCacheManager::sDestroyCollCache</a>(p_coll_cache);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;    </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;    <span class="comment">// caluclate the velocity required to clear the barrier</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="keywordtype">float</span> jump_height = lowest_height + height_increment + <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x72660978, <span class="stringliteral">&quot;barrier_jump_min_clearance&quot;</span>)) - <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordtype">float</span> required_vertical_velocity = sqrtf(2.0f * <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xa5e2da58, <span class="stringliteral">&quot;gravity&quot;</span>)) * jump_height);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    </div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <span class="comment">// setup the new walking state</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a> = required_vertical_velocity;</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">set_state</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">m_primary_air_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">leave_movable_contact_for_air</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a>);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x584cf9e9, <span class="stringliteral">&quot;Jump&quot;</span>);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    <span class="comment">// stop late jumps after an autojump</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../df/dde/class_obj_1_1_c_object.html#a7c34c20cf05f48269098981587fb9689">RemoveEventHandler</a>(CRCD(0x6b9ca247, <span class="stringliteral">&quot;JumpRequested&quot;</span>));</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    </div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;}</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160; </div>
<div class="line"><a name="l01964"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9"> 1964</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">CWalkComponent::leave_movable_contact_for_air</a> ( <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>&amp; horizontal_vel, <span class="keywordtype">float</span>&amp; vertical_vel )</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;{</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="comment">// use movement from the latest movable contact update call</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    </div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7ded233e8dc3439336d8b5feef49f447">HaveContact</a>())</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    {</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="comment">// keep track of the horizontal velocity due to our old contact</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#a5b8f3611c64d7d04b94ba3b5620fb26a">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>();</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160; </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>, horizontal_vel) &gt; 0.0f)</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        {</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;            <span class="comment">// extra kicker; dangerous as there&#39;s no collision detection; without this slight extra movement, when we walk off the front of a movable object,</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            <span class="comment">// the object will move back under us before our next frame, and we will clip its edge and land on it</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a> * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">m_frame_length</a>;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        }</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        <span class="comment">// add movable contact&#39;s velocity into our launch velocity</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        vertical_vel += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>];</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        horizontal_vel += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    }</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    {</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">m_uncontrollable_air_horizontal_vel</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Set</a>();</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    }</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;    </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a4d5c894c757536ef2b8a60cac5395802">LoseAnyContact</a>();</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;}</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a92ae98482e9efe81ac8dbdeac1ff3e45"> 1998</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a92ae98482e9efe81ac8dbdeac1ff3e45">CWalkComponent::calculate_anim_wait_facing_drift_parameters</a> ( <span class="keyword">const</span> <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>&amp; goal_facing )</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;{</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <span class="keywordtype">float</span> initial_angle = atan2f(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>], <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>]);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <span class="keywordtype">float</span> goal_angle = atan2f(goal_facing[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>], goal_facing[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>]);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    </div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a20799f7aa4e1c14014af3f32043e1e9b">m_drift_angle</a> = goal_angle - initial_angle;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a20799f7aa4e1c14014af3f32043e1e9b">m_drift_angle</a>) &gt; <a class="code" href="../../d5/db9/namespace_mth.html#ab37069f5ecb0bab9cec330d926a9eeb4">Mth::PI</a>)</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a20799f7aa4e1c14014af3f32043e1e9b">m_drift_angle</a> -= <a class="code" href="../../d5/db9/namespace_mth.html#aa786219703c4a079a33dfada4463bea0">Mth::Sgn</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a20799f7aa4e1c14014af3f32043e1e9b">m_drift_angle</a>) * (2.0f * <a class="code" href="../../d5/db9/namespace_mth.html#ab37069f5ecb0bab9cec330d926a9eeb4">Mth::PI</a>);</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    }</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a> = goal_facing;</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;}</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; </div>
<div class="line"><a name="l02017"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a01fc88db74534fc5d7fb6796f45ad37a"> 2017</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a01fc88db74534fc5d7fb6796f45ad37a">CWalkComponent::go_anim_wait_state</a> (   )</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;{</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7cf22b37f0b4630f05c96cc5e6e5dde7">UpdateContact</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a>))</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8857ef4c5eb71c5d0b3a183a02d8c47b">m_offset_due_to_movable_contact</a> += <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#ae1bf784318d82abc8c88032909614c63">GetMovement</a>();</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#aaf815222fd2942e7c260d2b6c7eda5b9">IsRotated</a>())</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        {</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">mp_movable_contact_component</a>-&gt;<a class="code" href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">GetContact</a>()-&gt;<a class="code" href="../../d2/d52/class_c_contact.html#aed83af43d377de4ce03ccf89cac599be">GetRotation</a>().<a class="code" href="../../d9/d37/class_mth_1_1_matrix.html#ad0595a262667a0ac38df0e5b8ad09d7d">Rotate</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] != 0.0f)</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            {</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;            }</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;            </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        }</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;    }</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    <span class="keywordtype">float</span> <a class="code" href="../../d3/d59/ngc_2bgm_2bgm__entr_8c.html#ac92d3b835636641550b12b0f93daf21d">start</a>, current, <a class="code" href="../../d3/dbf/namespace_ns_buffer.html#a64facb0dbc4b9270fda55cc47e273931">end</a>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">mp_animation_component</a>-&gt;<a class="code" href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a096534efe24556cd3495bf58b8709465">GetPrimaryAnimTimes</a>(&amp;<a class="code" href="../../d3/d59/ngc_2bgm_2bgm__entr_8c.html#ac92d3b835636641550b12b0f93daf21d">start</a>, &amp;current, &amp;<a class="code" href="../../d3/dbf/namespace_ns_buffer.html#a64facb0dbc4b9270fda55cc47e273931">end</a>);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordtype">float</span> animation_completion_factor = <a class="code" href="../../d5/db9/namespace_mth.html#ab1c1b5804cee65f8c4f453adf4eaf30c">Mth::LinearMap</a>(0.0f, 1.0f, current, <a class="code" href="../../d3/d59/ngc_2bgm_2bgm__entr_8c.html#ac92d3b835636641550b12b0f93daf21d">start</a>, <a class="code" href="../../d3/dbf/namespace_ns_buffer.html#a64facb0dbc4b9270fda55cc47e273931">end</a>);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="comment">// smoothly drift the position</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8857ef4c5eb71c5d0b3a183a02d8c47b">m_offset_due_to_movable_contact</a> + <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a57487e6212c10ab35437771ed35c8629">m_anim_wait_initial_pos</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a524d30a1e237c2adfc32f65bdb8b203c">m_anim_wait_goal_pos</a>, animation_completion_factor);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordtype">float</span> angle = <a class="code" href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a>(-<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a20799f7aa4e1c14014af3f32043e1e9b">m_drift_angle</a>, 0.0f, animation_completion_factor);</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#aefd39649915b66c713cf66086ed3f3c5">RotateY</a>(angle);</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">m_frame_event</a> = CRCD(0x4fe6069c, <span class="stringliteral">&quot;AnimWait&quot;</span>);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;}</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a334b804e9478f7f193274d75697b8999"> 2053</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a334b804e9478f7f193274d75697b8999">CWalkComponent::anim_wait_complete</a> (   )</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;{</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a470af772feeecb623ea29dee9f4c2c3f">SetPos</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a524d30a1e237c2adfc32f65bdb8b203c">m_anim_wait_goal_pos</a> + <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8857ef4c5eb71c5d0b3a183a02d8c47b">m_offset_due_to_movable_contact</a>);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;    </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <a class="code" href="../../d9/d37/class_mth_1_1_matrix.html">Mth::Matrix</a> matrix;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>].Set(0.0f, 1.0f, 0.0f);</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>].Set(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>], 0.0f, -<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">m_drift_goal_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>]);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a0152254b1ef89dcf96916a708e4b1a0f">SetMatrix</a>(matrix);</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;    </div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1c313b8688e1a6f9afc481b91e146cfb">mp_anim_wait_complete_callback</a>)</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        (this-&gt;*<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1c313b8688e1a6f9afc481b91e146cfb">mp_anim_wait_complete_callback</a>)();</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    }</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;}</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; </div>
<div class="line"><a name="l02074"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1b8a1a1c44669478e82c888f170250d9"> 2074</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1b8a1a1c44669478e82c888f170250d9">CWalkComponent::maybe_stick_to_rail</a> (   )</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;{</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;}</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160; </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    </div>
<div class="line"><a name="l02085"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad766498be574d6be90a574cb45d0e5b9"> 2085</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad766498be574d6be90a574cb45d0e5b9">CWalkComponent::setup_collision_cache</a> (   )</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;{</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="keywordtype">float</span> horizontal_reach = 1.0f + <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x99978d2b, <span class="stringliteral">&quot;feeler_length&quot;</span>));</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    <span class="keywordtype">float</span> vertical_height = 1.0f + <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x9ea1974a, <span class="stringliteral">&quot;walker_height&quot;</span>));;</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordtype">float</span> vertical_depth = 1.0f + <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xaf3e4251, <span class="stringliteral">&quot;snap_down_height&quot;</span>));</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    <a class="code" href="../../dc/d50/class_mth_1_1_c_b_box.html">Mth::CBBox</a> bbox(</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/df4/matrix_8h.html#ad393a55b0cd17b6dea798c49863e8de4">GetPos</a>() - <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>(horizontal_reach, vertical_depth, horizontal_reach, 0.0f),</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/df4/matrix_8h.html#ad393a55b0cd17b6dea798c49863e8de4">GetPos</a>() + <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>(horizontal_reach, vertical_height, horizontal_reach, 0.0f)</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    );</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d9d37f13fd2e111ca6da13efeeefaa7">mp_collision_cache</a>-&gt;<a class="code" href="../../d5/d4f/class_nx_1_1_c_coll_cache.html#ad1834000d2f81e13ad86003ce63efb8c">Update</a>(bbox);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="../../dc/d35/class_c_feeler.html#a8d9be0465b6dbdbe506ed1b4a38886a3">CFeeler::sSetDefaultCache</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d9d37f13fd2e111ca6da13efeeefaa7">mp_collision_cache</a>);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;}</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    </div>
<div class="line"><a name="l02105"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a588641f53976ec34f778e00bd1e03d30"> 2105</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a588641f53976ec34f778e00bd1e03d30">CWalkComponent::copy_state_into_object</a> (   )</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;{</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="comment">// build the object&#39;s matrix based on our facing</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <a class="code" href="../../d9/d37/class_mth_1_1_matrix.html">Mth::Matrix</a> matrix;</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="comment">// basically, rotate Z upward to perpendicular with m_upward</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = <a class="code" href="../../d5/db9/namespace_mth.html#aaca09fd5728158c602a3970017204614">Mth::CrossProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>);</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>].Normalize();</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">m_upward</a>;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = <a class="code" href="../../d5/db9/namespace_mth.html#aaca09fd5728158c602a3970017204614">Mth::CrossProduct</a>(matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>], matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>]);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    matrix[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635ab722ceeb601c72cd78fbd35f3581fdf7">W</a>].Set( 0.0f, 0.0f, 0.0f, 1.0f );</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    </div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a470af772feeecb623ea29dee9f4c2c3f">SetPos</a>( <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">m_pos</a> );</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a0152254b1ef89dcf96916a708e4b1a0f">SetMatrix</a>( matrix );</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a1910e90938159a2b294eb774c4748490">SetDisplayMatrix</a>( matrix );</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;    </div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;    <span class="comment">// construct the object&#39;s velocity</span></div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a4383081077e64d717b48969750fc083a">SetVel</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">m_horizontal_vel</a>);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <a class="code" href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">GetObject</a>()-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">GetVel</a>()[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">m_vertical_vel</a>;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;}</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160; </div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;    </div>
<div class="line"><a name="l02131"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aadb3aab545117e6bf7ae7b66c1512054"> 2131</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aadb3aab545117e6bf7ae7b66c1512054">CWalkComponent::get_controller_input</a> (   )</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;{</div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;    <a class="code" href="../../de/d49/class_c_skater_pad.html">CControlPad</a>&amp; control_pad = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">mp_input_component</a>-&gt;<a class="code" href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">GetControlPad</a>();</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    </div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;    Dbg_Assert(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">mp_camera</a>);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="comment">// rotate controller direction into camera&#39;s frame</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;    </div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> camera_forward = -<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">mp_camera</a>-&gt;<a class="code" href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a8869a00692e93bff6c25ef08d952d9aa">m_matrix</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    camera_forward[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    camera_forward.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;    </div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="comment">// allow a tolerance range for pressing directly forward</span></div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    <span class="keywordtype">float</span> angle = control_pad.<a class="code" href="../../de/d49/class_c_skater_pad.html#a14259352998bcf74c0f9bce4a5c37a86">m_leftAngle</a>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a>(angle) &lt; <a class="code" href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x4676a268, <span class="stringliteral">&quot;forward_tolerance&quot;</span>))))</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;    {</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        angle = 0.0f;</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;    }</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    </div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    <span class="keywordtype">float</span> sin_angle = sinf(angle);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;    <span class="keywordtype">float</span> cos_angle = cosf(angle);</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = cos_angle * camera_forward[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] - sin_angle * camera_forward[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = sin_angle * camera_forward[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] + cos_angle * camera_forward[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;    </div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;    <span class="comment">// different control schemes for analog stick and d-pad</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="preprocessor">#   if 0</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;    <span class="keywordflow">if</span> (control_pad.<a class="code" href="../../de/d49/class_c_skater_pad.html#a580b0b3f34e09de76b4b217e8838771f">m_leftX</a> == 0.0f &amp;&amp; control_pad.<a class="code" href="../../de/d49/class_c_skater_pad.html#a277315379d835cdd0321539943a3081f">m_leftY</a> == 0.0f)</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        <span class="comment">// d-pad control</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <span class="keywordflow">if</span> (control_pad.<a class="code" href="../../de/d49/class_c_skater_pad.html#acd0a152525af4102cb6d87661e424306">m_leftLength</a> == 0.0f)</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;        {</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = 0.0f;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">m_control_pegged</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;            </div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;            <span class="comment">// don&#39;t reset dpad in the air</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> != <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">WALKING_AIR</a>)</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            {</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                m_dpad_used_last_frame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;            }</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        }</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;        {</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            <span class="keywordflow">if</span> (!m_dpad_used_last_frame)</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            {</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                m_dpad_use_time_stamp = <a class="code" href="../../d1/d0d/namespace_tmr.html#a73fa70536cd356e6914161cb7737fd65">Tmr::GetTime</a>();</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            }</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;            m_dpad_used_last_frame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            </div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a>)</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            {</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;                <span class="comment">// slowly ramp up to a full run</span></div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;                </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;                <a class="code" href="../../d1/d0d/namespace_tmr.html#a50be6f0b0f6cc99949aef978978a9d9e">Tmr::Time</a> elapsed_time = <a class="code" href="../../d1/d0d/namespace_tmr.html#aeede2bf5e4d84e9aae6110f582389a96">Tmr::ElapsedTime</a>(m_dpad_use_time_stamp);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                </div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                <a class="code" href="../../d1/d0d/namespace_tmr.html#a50be6f0b0f6cc99949aef978978a9d9e">Tmr::Time</a> full_run_dpad_delay = <span class="keyword">static_cast&lt;</span> <a class="code" href="../../d1/d0d/namespace_tmr.html#a50be6f0b0f6cc99949aef978978a9d9e">Tmr::Time</a> <span class="keyword">&gt;</span>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x1832588c, <span class="stringliteral">&quot;full_run_dpad_delay&quot;</span>)));</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;                <a class="code" href="../../d1/d0d/namespace_tmr.html#a50be6f0b0f6cc99949aef978978a9d9e">Tmr::Time</a> start_run_dpad_delay = <span class="keyword">static_cast&lt;</span> <a class="code" href="../../d1/d0d/namespace_tmr.html#a50be6f0b0f6cc99949aef978978a9d9e">Tmr::Time</a> <span class="keyword">&gt;</span>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x2c386a43, <span class="stringliteral">&quot;start_run_dpad_delay&quot;</span>)));</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                <span class="keywordflow">if</span> (elapsed_time &lt; start_run_dpad_delay)</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;                {</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xc1528f7f, <span class="stringliteral">&quot;walk_point&quot;</span>));</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                }</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (elapsed_time &lt; full_run_dpad_delay)</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                {</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = <a class="code" href="../../d5/db9/namespace_mth.html#a718c0eeb7953d1e1c0d092227ce6fcab">Mth::SmoothMap</a>(</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;                        <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xc1528f7f, <span class="stringliteral">&quot;walk_point&quot;</span>)),</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                        1.0f,</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                        elapsed_time,</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                        start_run_dpad_delay,</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                        full_run_dpad_delay</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;                    );</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                }</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;                {</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;                    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = 1.0f;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;                }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;            }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;            {</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = 1.0f;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            }</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">m_control_pegged</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        </div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <span class="comment">// damp dpad control directions towards forward when running</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> &amp;&amp; <a class="code" href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a>(angle) &lt; <a class="code" href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a>(90.0f + 5.0f) &amp;&amp; (forced_run() || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> &gt; <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xc1528f7f, <span class="stringliteral">&quot;walk_point&quot;</span>))))</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        {</div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;            <span class="keywordflow">if</span> (forced_run() || <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> == 1.0f)</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            {</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a> += <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x3c581621, <span class="stringliteral">&quot;dpad_control_damping_factor&quot;</span>)) * camera_forward;</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;            }</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            {</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                <span class="comment">// smoothly interpolate between damping and no damping</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a> += <a class="code" href="../../d5/db9/namespace_mth.html#a718c0eeb7953d1e1c0d092227ce6fcab">Mth::SmoothMap</a>(0.0f, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x3c581621, <span class="stringliteral">&quot;dpad_control_damping_factor&quot;</span>)), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a>, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xc1528f7f, <span class="stringliteral">&quot;walk_point&quot;</span>)), 1.0f)</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                    * camera_forward;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            }</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>.<a class="code" href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Normalize</a>();</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        }</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    }</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="preprocessor">#   endif</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    {</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;        <span class="comment">// analog stick control</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = control_pad.<a class="code" href="../../de/d49/class_c_skater_pad.html#af625e82da206d3cbd47cfd506e57f78a">GetScaledLeftAnalogStickMagnitude</a>() / 0.85f;</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> &gt;= 1.0f)</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;        {</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = 1.0f;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">m_control_pegged</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;        }</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;        {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">m_control_pegged</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        }</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    }</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    </div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="comment">// during a forward control lock, ignore all input not in the forward direction</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">m_state</a> == <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">WALKING_GROUND</a> &amp;&amp; <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a19d548d8ea92097f54e0ca4a15a77e2b">m_forward_control_lock</a>)</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = <a class="code" href="../../d5/db9/namespace_mth.html#a2b4280ae191736bc0c6d331bf95a7c87">Mth::ClampMin</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> * <a class="code" href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a>(<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a>, <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>), 0.0f);</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;}</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160; </div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="keywordtype">void</span> CWalkComponent::adjust_control_for_forced_run (   )</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;{</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    <span class="keywordflow">if</span> (!forced_run()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    </div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="comment">// if no direction is pressed</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> == 0.0f)</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;        <span class="comment">// run in the direction of our current facing</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">m_control_direction</a> = <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="comment">// run full speed</span></div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> = 1.0f;</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">m_control_pegged</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;}</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160; </div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160; </div>
<div class="line"><a name="l02280"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afe2094362feb83d1fdf19df00ef3ce5c"> 2280</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#afe2094362feb83d1fdf19df00ef3ce5c">CWalkComponent::calculate_desired_speed</a> (   )</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;{</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;    <span class="comment">// forced run</span></div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    adjust_control_for_forced_run();</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;    </div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> == 0.0f) <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordtype">float</span> walk_point = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xc1528f7f, <span class="stringliteral">&quot;walk_point&quot;</span>));</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a> &lt;= walk_point)</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    {</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a99d5f9a35ca44238df445eabb1af1724">m_run_toggle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/db9/namespace_mth.html#ab1c1b5804cee65f8c4f453adf4eaf30c">Mth::LinearMap</a>(0.0f, <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x79d182ad, <span class="stringliteral">&quot;walk_speed&quot;</span>)), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a>, 0.3f, walk_point);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    }</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;    {</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a99d5f9a35ca44238df445eabb1af1724">m_run_toggle</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d5/db9/namespace_mth.html#ab1c1b5804cee65f8c4f453adf4eaf30c">Mth::LinearMap</a>(<a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x79d182ad, <span class="stringliteral">&quot;walk_speed&quot;</span>)), <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xcc461b87, <span class="stringliteral">&quot;run_speed&quot;</span>)), <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">m_control_magnitude</a>, walk_point, 1.0f);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;    }</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160; </div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa359c688dc5a5fde3ce8a5e062c38e99"> 2305</a></span>&#160;<a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa359c688dc5a5fde3ce8a5e062c38e99">CWalkComponent::calculate_feeler_offset_direction</a> ( <span class="keywordtype">int</span> contact )</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;{</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;    <span class="keywordtype">float</span> angle = contact * (2.0f * <a class="code" href="../../d5/db9/namespace_mth.html#ab37069f5ecb0bab9cec330d926a9eeb4">Mth::PI</a> / <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">vNUM_FEELERS</a>);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;    <span class="keywordtype">float</span> cos_angle = cosf(angle);</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="keywordtype">float</span> sin_angle = sinf(angle);</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;    <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a> end_offset_direction;</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;    end_offset_direction[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] = cos_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] - sin_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    end_offset_direction[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] = 0.0f;</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    end_offset_direction[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>] = sin_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a>] + cos_angle * <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">m_facing</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a>];</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    end_offset_direction[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635ab722ceeb601c72cd78fbd35f3581fdf7">W</a>] = 1.0f;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    </div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">return</span> end_offset_direction;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;}</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160; </div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">/*                                                                */</span></div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">/******************************************************************/</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"><a class="line" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad276c2da066000c60751c296386a6cbc"> 2325</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad276c2da066000c60751c296386a6cbc">CWalkComponent::determine_stand_pos</a> ( <span class="keyword">const</span> <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>&amp; proposed_stand_pos, <a class="code" href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a>&amp; stand_pos, <a class="code" href="../../dc/d35/class_c_feeler.html">CFeeler</a>&amp; feeler )</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;{</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="comment">// upward offset of standing position at maximum standable slope</span></div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <span class="keywordtype">float</span> max_height_adjustment = <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x6da7f696, <span class="stringliteral">&quot;feeler_height&quot;</span>)) / <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0xa20c43b7, <span class="stringliteral">&quot;push_feeler_length&quot;</span>)) * <a class="code" href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">s_get_gunslinger_param</a>(CRCD(0x21dfbe77, <span class="stringliteral">&quot;pull_up_offset_forward&quot;</span>));</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    </div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a> = proposed_stand_pos;</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">m_start</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] += max_height_adjustment;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a> = proposed_stand_pos;</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    feeler.<a class="code" href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">m_end</a>[<a class="code" href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a>] -= max_height_adjustment;</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;<span class="preprocessor">    #ifdef __USER_DAN__</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a>(CRCD(0xaf90c5fd, <span class="stringliteral">&quot;walking_debug_lines&quot;</span>)))</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    {</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">DebugLine</a>(255, 255, 0, 0);</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    <span class="keywordflow">if</span> (feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">GetCollision</a>())</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    {</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;        stand_pos = feeler.<a class="code" href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">GetPoint</a>();</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    </div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    stand_pos = proposed_stand_pos;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;}</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;}</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_c_feeler_html_a85369c8702f7abb6fffe8fae9cfacc48"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#a85369c8702f7abb6fffe8fae9cfacc48">CFeeler::GetDist</a></div><div class="ttdeci">float GetDist() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00102">feeler.h:102</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a8869a00692e93bff6c25ef08d952d9aa"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a8869a00692e93bff6c25ef08d952d9aa">Obj::CCompositeObject::m_matrix</a></div><div class="ttdeci">Mth::Matrix m_matrix</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00101">compositeobject.h:101</a></div></div>
<div class="ttc" id="angc_2bgm_2bgm__entr_8c_html_ac92d3b835636641550b12b0f93daf21d"><div class="ttname"><a href="../../d3/d59/ngc_2bgm_2bgm__entr_8c.html#ac92d3b835636641550b12b0f93daf21d">start</a></div><div class="ttdeci">int start()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d59/ngc_2bgm_2bgm__entr_8c_source.html#l00016">bgm_entr.c:16</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_ac68fbfe676c95bf1ada686076c00675a"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#ac68fbfe676c95bf1ada686076c00675a">Mth::Vector::Normalize</a></div><div class="ttdeci">Vector &amp; Normalize()</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/vector_8inl_source.html#l00469">vector.inl:469</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ad8453df58ba446c1017f9a288ed67331"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad8453df58ba446c1017f9a288ed67331">Obj::CWalkComponent::Finalize</a></div><div class="ttdeci">virtual void Finalize()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00165">GunslingerWalkComponent.cpp:165</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a47e2ec8517dde7e41a503e7367923d00"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a47e2ec8517dde7e41a503e7367923d00">Obj::CWalkComponent::go_hang_state</a></div><div class="ttdeci">void go_hang_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9b/_walk_hang_util_8cpp_source.html#l00730">WalkHangUtil.cpp:730</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ab8ed3038b501cca6b96f6f6bd24d388aaac752a8d61275fb9995e31bbb4a04522"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aaac752a8d61275fb9995e31bbb4a04522">Obj::CWalkComponent::vNUM_BARRIER_HEIGHT_FEELERS</a></div><div class="ttdeci">@ vNUM_BARRIER_HEIGHT_FEELERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00107">WalkComponent.h:107</a></div></div>
<div class="ttc" id="acompositeobjectmanager_8h_html"><div class="ttname"><a href="../../d8/dff/compositeobjectmanager_8h.html">compositeobjectmanager.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da06cb2211910707881bb5937afd4fb15c">Obj::CWalkComponent::WALKING_LADDER</a></div><div class="ttdeci">@ WALKING_LADDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00090">WalkComponent.h:90</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_a88ad2190dc8bba653fc442dfed7c033a"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#a88ad2190dc8bba653fc442dfed7c033a">Mth::Vector::Length</a></div><div class="ttdeci">float Length(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/vector_8inl_source.html#l00398">vector.inl:398</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_a8d9be0465b6dbdbe506ed1b4a38886a3"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#a8d9be0465b6dbdbe506ed1b4a38886a3">CFeeler::sSetDefaultCache</a></div><div class="ttdeci">static void sSetDefaultCache(Nx::CCollCache *p_cache)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00187">feeler.h:187</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_ae044cb7b9d1c93c18e62fb1c03fe6b51"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#ae044cb7b9d1c93c18e62fb1c03fe6b51">CFeeler::SetCache</a></div><div class="ttdeci">void SetCache(Nx::CCollCache *p_cache)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00177">feeler.h:177</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_movable_contact_component_html_a4d5c894c757536ef2b8a60cac5395802"><div class="ttname"><a href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a4d5c894c757536ef2b8a60cac5395802">Obj::CMovableContactComponent::LoseAnyContact</a></div><div class="ttdeci">void LoseAnyContact()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db1/_movable_contact_component_8h_source.html#l00074">MovableContactComponent.h:74</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_aa8c2bbc27a0427b6a123d66f308c77b6abcf1143afd4522b3edc277761a8d4ec1"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6abcf1143afd4522b3edc277761a8d4ec1">Obj::CBaseComponent::MF_FALSE</a></div><div class="ttdeci">@ MF_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00040">basecomponent.h:40</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a8ed4ed460dc5a0fd1f37c936bfcadc82"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ed4ed460dc5a0fd1f37c936bfcadc82">Obj::CWalkComponent::mp_input_component</a></div><div class="ttdeci">CInputComponent * mp_input_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00359">WalkComponent.h:359</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_object_html_aa5331d6b04c4b9a19512c3076d083f83"><div class="ttname"><a href="../../df/dde/class_obj_1_1_c_object.html#aa5331d6b04c4b9a19512c3076d083f83">Obj::CObject::BroadcastEvent</a></div><div class="ttdeci">void BroadcastEvent(uint32 event, Script::CStruct *pData=NULL, float radius=0.0f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/object_8cpp_source.html#l00933">object.cpp:933</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html">Obj::CCompositeObject</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00024">compositeobject.h:24</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_adcba77d4fe60797434fec760204ba2ccade2453676dd680e701cefb522720dc0c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#adcba77d4fe60797434fec760204ba2ccade2453676dd680e701cefb522720dc0c">Obj::CWalkComponent::AWC_CURRENT</a></div><div class="ttdeci">@ AWC_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00517">WalkComponent.h:517</a></div></div>
<div class="ttc" id="anamespace_tmr_html_a50be6f0b0f6cc99949aef978978a9d9e"><div class="ttname"><a href="../../d1/d0d/namespace_tmr.html#a50be6f0b0f6cc99949aef978978a9d9e">Tmr::Time</a></div><div class="ttdeci">uint32 Time</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/timer_8h_source.html#l00060">timer.h:60</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a57487e6212c10ab35437771ed35c8629"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a57487e6212c10ab35437771ed35c8629">Obj::CWalkComponent::m_anim_wait_initial_pos</a></div><div class="ttdeci">Mth::Vector m_anim_wait_initial_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00490">WalkComponent.h:490</a></div></div>
<div class="ttc" id="anamespace_mth_html_a718c0eeb7953d1e1c0d092227ce6fcab"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#a718c0eeb7953d1e1c0d092227ce6fcab">Mth::SmoothMap</a></div><div class="ttdeci">float SmoothMap(float a, float b, float value, float value_min, float value_max)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00255">math.h:255</a></div></div>
<div class="ttc" id="anamespace_script_html_aaf10cce8c51e44ea46f7789b3db96bc0"><div class="ttname"><a href="../../d1/d54/namespace_script.html#aaf10cce8c51e44ea46f7789b3db96bc0">Script::GetStructure</a></div><div class="ttdeci">CStruct * GetStructure(uint32 checksum, EAssertType assert)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7c/symboltable_8cpp_source.html#l00639">symboltable.cpp:639</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_acbe7a4b02910f5360fd5ebb59c7de91c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#acbe7a4b02910f5360fd5ebb59c7de91c">Obj::CWalkComponent::m_anim_scale_speed</a></div><div class="ttdeci">EAnimScaleSpeed m_anim_scale_speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00298">WalkComponent.h:298</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a1910e90938159a2b294eb774c4748490"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a1910e90938159a2b294eb774c4748490">Obj::CCompositeObject::SetDisplayMatrix</a></div><div class="ttdeci">void SetDisplayMatrix(const Mth::Matrix &amp;matrix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00093">compositeobject.h:93</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a93a603eb6f32522550b740ce8d56900d"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a93a603eb6f32522550b740ce8d56900d">Obj::CWalkComponent::Update</a></div><div class="ttdeci">virtual void Update()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00213">GunslingerWalkComponent.cpp:213</a></div></div>
<div class="ttc" id="anamespace_tmr_html_a3560bd3134b7b29bed7013950d91ad06"><div class="ttname"><a href="../../d1/d0d/namespace_tmr.html#a3560bd3134b7b29bed7013950d91ad06">Tmr::FrameLength</a></div><div class="ttdeci">float FrameLength()</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d41/ngc_2p__timer_8cpp_source.html#l00430">p_timer.cpp:430</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a5fceef2c34907684e58a071df9d4b8f6"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5fceef2c34907684e58a071df9d4b8f6">Obj::CWalkComponent::mp_camera</a></div><div class="ttdeci">CCompositeObject * mp_camera</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00350">WalkComponent.h:350</a></div></div>
<div class="ttc" id="a_defines_8h_html_a1134b580f8da4de94ca6b1de4d37975e"><div class="ttname"><a href="../../d8/de2/_defines_8h.html#a1134b580f8da4de94ca6b1de4d37975e">uint32</a></div><div class="ttdeci">unsigned long uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de2/_defines_8h_source.html#l00147">Defines.h:147</a></div></div>
<div class="ttc" id="ap__camera_8cpp_html_af1e98e1845604922bcc08e0088e8f74f"><div class="ttname"><a href="../../d0/db2/p__camera_8cpp.html#af1e98e1845604922bcc08e0088e8f74f">movement</a></div><div class="ttdeci">NsVector movement(0.0f, 0.0f, 0.0f)</div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a85e03cb7dae77b5c83d334578167def2"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a85e03cb7dae77b5c83d334578167def2">Obj::CWalkComponent::mp_trigger_component</a></div><div class="ttdeci">CTriggerComponent * mp_trigger_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00362">WalkComponent.h:362</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ad276c2da066000c60751c296386a6cbc"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad276c2da066000c60751c296386a6cbc">Obj::CWalkComponent::determine_stand_pos</a></div><div class="ttdeci">bool determine_stand_pos(const Mth::Vector &amp;proposed_stand_pos, Mth::Vector &amp;stand_pos, CFeeler &amp;feeler)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02325">GunslingerWalkComponent.cpp:2325</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aadb3aab545117e6bf7ae7b66c1512054"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aadb3aab545117e6bf7ae7b66c1512054">Obj::CWalkComponent::get_controller_input</a></div><div class="ttdeci">void get_controller_input()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02131">GunslingerWalkComponent.cpp:2131</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_acfa757b8597c4b3189a9aa05893bdcd4"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#acfa757b8597c4b3189a9aa05893bdcd4">Obj::CWalkComponent::ReadyWalkState</a></div><div class="ttdeci">void ReadyWalkState(bool to_ground_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00585">GunslingerWalkComponent.cpp:585</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a907fc013b062fe33c660f8bdfc55aeb5"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a907fc013b062fe33c660f8bdfc55aeb5">Obj::CWalkComponent::m_state_timestamp</a></div><div class="ttdeci">Tmr::Time m_state_timestamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00237">WalkComponent.h:237</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_aea160384997eb4812d98eba9f497e727"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#aea160384997eb4812d98eba9f497e727">CFeeler::GetPoint</a></div><div class="ttdeci">const Mth::Vector &amp; GetPoint() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00107">feeler.h:107</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aa9b18c286a180417d8252da1681d3bda"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa9b18c286a180417d8252da1681d3bda">Obj::CWalkComponent::m_anim_effective_speed</a></div><div class="ttdeci">float m_anim_effective_speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00301">WalkComponent.h:301</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a588641f53976ec34f778e00bd1e03d30"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a588641f53976ec34f778e00bd1e03d30">Obj::CWalkComponent::copy_state_into_object</a></div><div class="ttdeci">void copy_state_into_object()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02105">GunslingerWalkComponent.cpp:2105</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a17c64d316c21160788385dfbbbd8ed8aa85be5d882b259aa21ab1ac0d9df5f843"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aa85be5d882b259aa21ab1ac0d9df5f843">Obj::CWalkComponent::OFF</a></div><div class="ttdeci">@ OFF</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00098">WalkComponent.h:98</a></div></div>
<div class="ttc" id="aclass_c_contact_html_a5b8f3611c64d7d04b94ba3b5620fb26a"><div class="ttname"><a href="../../d2/d52/class_c_contact.html#a5b8f3611c64d7d04b94ba3b5620fb26a">CContact::GetObject</a></div><div class="ttdeci">Obj::CCompositeObject * GetObject()</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcf/contact_8h_source.html#l00032">contact.h:32</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_aefd39649915b66c713cf66086ed3f3c5"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#aefd39649915b66c713cf66086ed3f3c5">Mth::Vector::RotateY</a></div><div class="ttdeci">Vector &amp; RotateY(float s, float c)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/vector_8inl_source.html#l00587">vector.inl:587</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a548e5aaf8d86043d3ace4d088485ac20"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a548e5aaf8d86043d3ace4d088485ac20">Obj::CWalkComponent::mp_movable_contact_component</a></div><div class="ttdeci">CMovableContactComponent * mp_movable_contact_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00364">WalkComponent.h:364</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ad709d92808d3b72f6be93bee7e34cf36"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad709d92808d3b72f6be93bee7e34cf36">Obj::CWalkComponent::m_primary_air_direction</a></div><div class="ttdeci">Mth::Vector m_primary_air_direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00415">WalkComponent.h:415</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_aa27bdd009eb62b22c75dac7b9398a902"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#aa27bdd009eb62b22c75dac7b9398a902">Script::CStruct::ContainsFlag</a></div><div class="ttdeci">bool ContainsFlag(uint32 checksum) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01846">struct.cpp:1846</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_abdb5dd9ff4493d6fb1005969e608bed1"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#abdb5dd9ff4493d6fb1005969e608bed1">Mth::Vector::ProjectToNormal</a></div><div class="ttdeci">Vector &amp; ProjectToNormal(const Vector &amp;normal)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1b/vector_8cpp_source.html#l00203">vector.cpp:203</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6c089e321be6033ca61d108084de8f4dabd852565c44bedd18e024fe37db60ae9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4dabd852565c44bedd18e024fe37db60ae9">Obj::CWalkComponent::WALKING_ANIMWAIT</a></div><div class="ttdeci">@ WALKING_ANIMWAIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00091">WalkComponent.h:91</a></div></div>
<div class="ttc" id="anamespace_obj_html_a56bbf3de825360de3dfd096f9a6d2a96ad680cd054a615d490c23cb1633d54eef"><div class="ttname"><a href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96ad680cd054a615d490c23cb1633d54eef">Obj::TRIGGER_LAND_ON</a></div><div class="ttdeci">@ TRIGGER_LAND_ON</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d67/_trigger_component_8h_source.html#l00037">TriggerComponent.h:37</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a20799f7aa4e1c14014af3f32043e1e9b"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a20799f7aa4e1c14014af3f32043e1e9b">Obj::CWalkComponent::m_drift_angle</a></div><div class="ttdeci">float m_drift_angle</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00509">WalkComponent.h:509</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a17c64d316c21160788385dfbbbd8ed8aaa6a38eff044e02d2ed197c32263abe57"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aaa6a38eff044e02d2ed197c32263abe57">Obj::CWalkComponent::HANGMOVE</a></div><div class="ttdeci">@ HANGMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00100">WalkComponent.h:100</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a18d374784f1787eb7b22b92a84084dfc"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a18d374784f1787eb7b22b92a84084dfc">Obj::CCompositeObject::GetMatrix</a></div><div class="ttdeci">Mth::Matrix &amp; GetMatrix(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00091">compositeobject.h:91</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a334b804e9478f7f193274d75697b8999"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a334b804e9478f7f193274d75697b8999">Obj::CWalkComponent::anim_wait_complete</a></div><div class="ttdeci">void anim_wait_complete()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02053">GunslingerWalkComponent.cpp:2053</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da12952c1f8203c5d7609a05e72f7d709f">Obj::CWalkComponent::WALKING_HANG</a></div><div class="ttdeci">@ WALKING_HANG</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00089">WalkComponent.h:89</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a5ac5bec24c2e551489790c95725c2e1c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5ac5bec24c2e551489790c95725c2e1c">Obj::CWalkComponent::GetDebugInfo</a></div><div class="ttdeci">virtual void GetDebugInfo(Script::CStruct *p_info)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00538">GunslingerWalkComponent.cpp:538</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a524d30a1e237c2adfc32f65bdb8b203c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a524d30a1e237c2adfc32f65bdb8b203c">Obj::CWalkComponent::m_anim_wait_goal_pos</a></div><div class="ttdeci">Mth::Vector m_anim_wait_goal_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00496">WalkComponent.h:496</a></div></div>
<div class="ttc" id="amatrix_8h_html_ad393a55b0cd17b6dea798c49863e8de4"><div class="ttname"><a href="../../dd/df4/matrix_8h.html#ad393a55b0cd17b6dea798c49863e8de4">GetPos</a></div><div class="ttdeci">Vector &amp; GetPos(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df4/matrix_8h_source.html#l00066">matrix.h:66</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_input_component_html_a74e410efa46e9592d9f39c84ee85adf1"><div class="ttname"><a href="../../db/d0b/class_obj_1_1_c_input_component.html#a74e410efa46e9592d9f39c84ee85adf1">Obj::CInputComponent::GetControlPad</a></div><div class="ttdeci">CControlPad &amp; GetControlPad()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1a/_input_component_8h_source.html#l00050">InputComponent.h:50</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_contact_html_ab67b4ea236fd92dd56edf03fc0f38564"><div class="ttname"><a href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ab67b4ea236fd92dd56edf03fc0f38564">Obj::CWalkComponent::SContact::normal</a></div><div class="ttdeci">Mth::Vector normal</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00282">WalkComponent.h:282</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_movable_contact_component_html_a99fadd1411647c164bebaefc636c10f7"><div class="ttname"><a href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a99fadd1411647c164bebaefc636c10f7">Obj::CMovableContactComponent::CheckForMovableContact</a></div><div class="ttdeci">bool CheckForMovableContact(CFeeler &amp;feeler)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dff/_movable_contact_component_8cpp_source.html#l00121">MovableContactComponent.cpp:121</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_addf10ff084fa457e293e69afe013ee4c"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#addf10ff084fa457e293e69afe013ee4c">Obj::CCompositeObject::GetPos</a></div><div class="ttdeci">const Mth::Vector &amp; GetPos(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00089">compositeobject.h:89</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a17c64d316c21160788385dfbbbd8ed8aa0c1d396bc8906158daddff344abafdc9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aa0c1d396bc8906158daddff344abafdc9">Obj::CWalkComponent::RUNNING</a></div><div class="ttdeci">@ RUNNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00099">WalkComponent.h:99</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da793de632c46c9936311f7d549b0c21eb">Obj::CWalkComponent::WALKING_AIR</a></div><div class="ttdeci">@ WALKING_AIR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00087">WalkComponent.h:87</a></div></div>
<div class="ttc" id="a_movable_contact_component_8h_html"><div class="ttname"><a href="../../de/db1/_movable_contact_component_8h.html">MovableContactComponent.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_movable_contact_component_html_a16e4db6b4c9b98a1e9d9fe4734ab6e50"><div class="ttname"><a href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a16e4db6b4c9b98a1e9d9fe4734ab6e50">Obj::CMovableContactComponent::CheckInsideObjects</a></div><div class="ttdeci">CCompositeObject * CheckInsideObjects(Mth::Vector &amp;pos, const Mth::Vector &amp;safe_pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dff/_movable_contact_component_8cpp_source.html#l00174">MovableContactComponent.cpp:174</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a29d9ee956abc4713106437723dc4c3e2"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a29d9ee956abc4713106437723dc4c3e2">Obj::CWalkComponent::m_vertical_vel</a></div><div class="ttdeci">float m_vertical_vel</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00245">WalkComponent.h:245</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_adca4db4359bb306dd1c047706ee38d14"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#adca4db4359bb306dd1c047706ee38d14">Obj::CWalkComponent::m_previous_state</a></div><div class="ttdeci">EStateType m_previous_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00240">WalkComponent.h:240</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_coll_cache_manager_html_ae2812510fb736b3f4b87690a2fa23a37"><div class="ttname"><a href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#ae2812510fb736b3f4b87690a2fa23a37">Nx::CCollCacheManager::sCreateCollCache</a></div><div class="ttdeci">static CCollCache * sCreateCollCache()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d09/_coll_cache_8cpp_source.html#l00268">CollCache.cpp:268</a></div></div>
<div class="ttc" id="anamespace_mth_html_aaca09fd5728158c602a3970017204614"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#aaca09fd5728158c602a3970017204614">Mth::CrossProduct</a></div><div class="ttdeci">Vector CrossProduct(const Vector &amp;v1, const Vector &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/vector_8inl_source.html#l01000">vector.inl:1000</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_object_html_a4eb63ba2d07ba494d8bbaf4729f2fc68"><div class="ttname"><a href="../../df/dde/class_obj_1_1_c_object.html#a4eb63ba2d07ba494d8bbaf4729f2fc68">Obj::CObject::SelfEvent</a></div><div class="ttdeci">void SelfEvent(uint32 event, Script::CStruct *pData=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/object_8cpp_source.html#l00927">object.cpp:927</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a0152254b1ef89dcf96916a708e4b1a0f"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a0152254b1ef89dcf96916a708e4b1a0f">Obj::CCompositeObject::SetMatrix</a></div><div class="ttdeci">void SetMatrix(const Mth::Matrix &amp;matrix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00092">compositeobject.h:92</a></div></div>
<div class="ttc" id="a_messages_8h_html_a701d7b9cdd94e5f87bc47f4e770492e6"><div class="ttname"><a href="../../df/de2/_messages_8h.html#a701d7b9cdd94e5f87bc47f4e770492e6">Dbg_Message</a></div><div class="ttdeci">void Dbg_Message(const char *A ...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/de2/_messages_8h_source.html#l00112">Messages.h:112</a></div></div>
<div class="ttc" id="a_skater_physics_control_component_8h_html"><div class="ttname"><a href="../../d0/dfd/_skater_physics_control_component_8h.html">SkaterPhysicsControlComponent.h</a></div></div>
<div class="ttc" id="anamespace_mth_html_adc6e7f87c6c36d52a16a9abceee925b4"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#adc6e7f87c6c36d52a16a9abceee925b4">Mth::Sqr</a></div><div class="ttdeci">float Sqr(float x)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00302">math.h:302</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a28f469e9766438223c23b8b53ffb7b13"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28f469e9766438223c23b8b53ffb7b13">Obj::CWalkComponent::respond_to_ground</a></div><div class="ttdeci">void respond_to_ground()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01198">GunslingerWalkComponent.cpp:1198</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_a880a8b9b7ec5b22563c6821ae0f1903e"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#a880a8b9b7ec5b22563c6821ae0f1903e">Obj::CBaseComponent::SetType</a></div><div class="ttdeci">void SetType(uint32 type)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00077">basecomponent.h:77</a></div></div>
<div class="ttc" id="anamespace_tmr_html_aeede2bf5e4d84e9aae6110f582389a96"><div class="ttname"><a href="../../d1/d0d/namespace_tmr.html#aeede2bf5e4d84e9aae6110f582389a96">Tmr::ElapsedTime</a></div><div class="ttdeci">Time ElapsedTime(Time time)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd0/timer_8h_source.html#l00140">timer.h:140</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aaa1c871fb205f8cc911d9f9d39b89e42"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1c871fb205f8cc911d9f9d39b89e42">Obj::CWalkComponent::mp_camera_component</a></div><div class="ttdeci">CWalkCameraComponent * mp_camera_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00351">WalkComponent.h:351</a></div></div>
<div class="ttc" id="a_walk_component_8h_html"><div class="ttname"><a href="../../d2/db3/_walk_component_8h.html">WalkComponent.h</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_acd0a152525af4102cb6d87661e424306"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#acd0a152525af4102cb6d87661e424306">CSkaterPad::m_leftLength</a></div><div class="ttdeci">float m_leftLength</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00075">SkaterPad.h:75</a></div></div>
<div class="ttc" id="a_walk_camera_component_8h_html"><div class="ttname"><a href="../../d0/d3d/_walk_camera_component_8h.html">WalkCameraComponent.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a470af772feeecb623ea29dee9f4c2c3f"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a470af772feeecb623ea29dee9f4c2c3f">Obj::CCompositeObject::SetPos</a></div><div class="ttdeci">void SetPos(const Mth::Vector &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00090">compositeobject.h:90</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_aa39e6fe5fdf1d6c48136ae26a7ad511e"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#aa39e6fe5fdf1d6c48136ae26a7ad511e">Script::CStruct::GetChecksum</a></div><div class="ttdeci">bool GetChecksum(uint32 nameChecksum, uint32 *p_checksum, EAssertType assert=NO_ASSERT) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01658">struct.cpp:1658</a></div></div>
<div class="ttc" id="anamespace_mth_html_ab37069f5ecb0bab9cec330d926a9eeb4"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#ab37069f5ecb0bab9cec330d926a9eeb4">Mth::PI</a></div><div class="ttdeci">const float PI</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00440">math.h:440</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_false_wall_html_af0da42263f80627049ad20aba63673d0"><div class="ttname"><a href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#af0da42263f80627049ad20aba63673d0">Obj::CWalkComponent::SFalseWall::cancel_height</a></div><div class="ttdeci">float cancel_height</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00441">WalkComponent.h:441</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_ab6805f805d22e3876bcd47552a663f1a"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#ab6805f805d22e3876bcd47552a663f1a">Script::CStruct::AddInteger</a></div><div class="ttdeci">void AddInteger(uint32 nameChecksum, int integer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01039">struct.cpp:1039</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aae07aedd25d9d42b2b896d47d480f8b2"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aae07aedd25d9d42b2b896d47d480f8b2">Obj::CWalkComponent::control_horizontal_vel</a></div><div class="ttdeci">void control_horizontal_vel()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01578">GunslingerWalkComponent.cpp:1578</a></div></div>
<div class="ttc" id="anamespace_mth_html_ab27db997c818cbc01396220b48f80a13"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#ab27db997c818cbc01396220b48f80a13">Mth::Lerp</a></div><div class="ttdeci">float Lerp(float a, float b, float value)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00214">math.h:214</a></div></div>
<div class="ttc" id="anamespace_mth_html_ab8f7791305c26c5bd278c0d38bb7cbeb"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#ab8f7791305c26c5bd278c0d38bb7cbeb">Mth::Min</a></div><div class="ttdeci">float Min(float a, float b)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00275">math.h:275</a></div></div>
<div class="ttc" id="avector_8h_html_a726ca809ffd3d67ab4b8476646f26635ab722ceeb601c72cd78fbd35f3581fdf7"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635ab722ceeb601c72cd78fbd35f3581fdf7">W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00068">vector.h:68</a></div></div>
<div class="ttc" id="a_trigger_component_8h_html"><div class="ttname"><a href="../../d2/d67/_trigger_component_8h.html">TriggerComponent.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_acb1869dd27f648bcfbf7c762ebcd266d"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#acb1869dd27f648bcfbf7c762ebcd266d">Obj::CWalkComponent::m_wall_push_test</a></div><div class="ttdeci">struct Obj::CWalkComponent::SWallPushTest m_wall_push_test</div></div>
<div class="ttc" id="aclass_obj_1_1_c_movable_contact_component_html_a7ded233e8dc3439336d8b5feef49f447"><div class="ttname"><a href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7ded233e8dc3439336d8b5feef49f447">Obj::CMovableContactComponent::HaveContact</a></div><div class="ttdeci">bool HaveContact()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db1/_movable_contact_component_8h_source.html#l00090">MovableContactComponent.h:90</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_a277315379d835cdd0321539943a3081f"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#a277315379d835cdd0321539943a3081f">CSkaterPad::m_leftY</a></div><div class="ttdeci">float m_leftY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00064">SkaterPad.h:64</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a8521fe72114647da75d88c9e044ed8a9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8521fe72114647da75d88c9e044ed8a9">Obj::CWalkComponent::RefreshFromStructure</a></div><div class="ttdeci">virtual void RefreshFromStructure(Script::CStruct *pParams)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00203">GunslingerWalkComponent.cpp:203</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab8ed3038b501cca6b96f6f6bd24d388aa64878099e4253041974afa3ef6a2b1aa">Obj::CWalkComponent::vNUM_FEELERS</a></div><div class="ttdeci">@ vNUM_FEELERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00106">WalkComponent.h:106</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_false_wall_html_a67fa51ea36179286d854a5c588d3f55d"><div class="ttname"><a href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a67fa51ea36179286d854a5c588d3f55d">Obj::CWalkComponent::SFalseWall::distance</a></div><div class="ttdeci">float distance</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00438">WalkComponent.h:438</a></div></div>
<div class="ttc" id="a_rail_manager_component_8h_html"><div class="ttname"><a href="../../df/d62/_rail_manager_component_8h.html">RailManagerComponent.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a8e850e61696d92cfecfe8a6f9f73a234"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8e850e61696d92cfecfe8a6f9f73a234">Obj::CWalkComponent::SetAssociatedCamera</a></div><div class="ttdeci">void SetAssociatedCamera(CCompositeObject *camera_obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00572">GunslingerWalkComponent.cpp:572</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a00a59f4e756358f5ad9e35744c40c4a9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a00a59f4e756358f5ad9e35744c40c4a9">Obj::CWalkComponent::adjust_horizonal_vel_for_environment</a></div><div class="ttdeci">bool adjust_horizonal_vel_for_environment()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00910">GunslingerWalkComponent.cpp:910</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ab7a7dcb7969fa117bddf6a1406212b07"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab7a7dcb7969fa117bddf6a1406212b07">Obj::CWalkComponent::m_anim_wait_camera_mode</a></div><div class="ttdeci">enum Obj::CWalkComponent::EAnimWaitCameraModeType m_anim_wait_camera_mode</div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_acdb9db6ebacc956ba2d70ad6c592fa87"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#acdb9db6ebacc956ba2d70ad6c592fa87">Obj::CWalkComponent::m_last_frame_event</a></div><div class="ttdeci">uint32 m_last_frame_event</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00256">WalkComponent.h:256</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a9d9d37f13fd2e111ca6da13efeeefaa7"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d9d37f13fd2e111ca6da13efeeefaa7">Obj::CWalkComponent::mp_collision_cache</a></div><div class="ttdeci">Nx::CCollCache * mp_collision_cache</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00347">WalkComponent.h:347</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aaea9b7f5b7d1448d27e09c5766a6f1fe"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaea9b7f5b7d1448d27e09c5766a6f1fe">Obj::CWalkComponent::adjust_vertical_vel_for_ceiling</a></div><div class="ttdeci">void adjust_vertical_vel_for_ceiling()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01644">GunslingerWalkComponent.cpp:1644</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a58bfca2c0d25209f17ca5559dcf75355"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a58bfca2c0d25209f17ca5559dcf75355">Obj::CWalkComponent::m_vertical_hang_offset</a></div><div class="ttdeci">float m_vertical_hang_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00453">WalkComponent.h:453</a></div></div>
<div class="ttc" id="aclass_c_contact_html_aed83af43d377de4ce03ccf89cac599be"><div class="ttname"><a href="../../d2/d52/class_c_contact.html#aed83af43d377de4ce03ccf89cac599be">CContact::GetRotation</a></div><div class="ttdeci">const Mth::Matrix &amp; GetRotation() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcf/contact_8h_source.html#l00047">contact.h:47</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_a952f40d99323d28b3ca2f55567edfa85"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#a952f40d99323d28b3ca2f55567edfa85">Obj::CBaseComponent::GetObject</a></div><div class="ttdeci">CCompositeObject * GetObject() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00059">basecomponent.h:59</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a64dd7bc636df9ef5cc0a18581efaf4da"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a64dd7bc636df9ef5cc0a18581efaf4da">Obj::CWalkComponent::check_for_wall_push</a></div><div class="ttdeci">bool check_for_wall_push()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01787">GunslingerWalkComponent.cpp:1787</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a103f1fd9a1c90ea376e49fecebd5afdc"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a103f1fd9a1c90ea376e49fecebd5afdc">Obj::CWalkComponent::s_get_param</a></div><div class="ttdeci">static float s_get_param(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00538">WalkComponent.h:538</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_aeb3fc85704c5e3811b7dd4bebff78b3f"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#aeb3fc85704c5e3811b7dd4bebff78b3f">Mth::Vector::Set</a></div><div class="ttdeci">Vector &amp; Set(float cx=0.0f, float cy=0.0f, float cz=0.0f, float cw=1.0f)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/vector_8inl_source.html#l00368">vector.inl:368</a></div></div>
<div class="ttc" id="avector_8h_html_a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a5596231eabd6cf29050967d5ac83ad84">Y</a></div><div class="ttdeci">@ Y</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00068">vector.h:68</a></div></div>
<div class="ttc" id="anamespace_mth_html_ae729e489f6c4e17060888db3cb5b2a8c"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#ae729e489f6c4e17060888db3cb5b2a8c">Mth::Max</a></div><div class="ttdeci">float Max(float a, float b)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00265">math.h:265</a></div></div>
<div class="ttc" id="anamespace_obj_html_a56bbf3de825360de3dfd096f9a6d2a96a11d971bf64c28d68889d7345f89ca63a"><div class="ttname"><a href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96a11d971bf64c28d68889d7345f89ca63a">Obj::TRIGGER_SKATE_OFF</a></div><div class="ttdeci">@ TRIGGER_SKATE_OFF</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d67/_trigger_component_8h_source.html#l00038">TriggerComponent.h:38</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ad572966df3606ec1a093dac7d3dd321e"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad572966df3606ec1a093dac7d3dd321e">Obj::CWalkComponent::get_run_speed</a></div><div class="ttdeci">float get_run_speed()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00553">WalkComponent.h:553</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_aa8c2bbc27a0427b6a123d66f308c77b6a56171927079158674d748a0593274357"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a56171927079158674d748a0593274357">Obj::CBaseComponent::MF_NOT_EXECUTED</a></div><div class="ttdeci">@ MF_NOT_EXECUTED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00042">basecomponent.h:42</a></div></div>
<div class="ttc" id="anamespace_obj_html_a56bbf3de825360de3dfd096f9a6d2a96aadf20212cefc7ed5d1d0857043da8582"><div class="ttname"><a href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96aadf20212cefc7ed5d1d0857043da8582">Obj::TRIGGER_SKATE_ONTO</a></div><div class="ttdeci">@ TRIGGER_SKATE_ONTO</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d67/_trigger_component_8h_source.html#l00039">TriggerComponent.h:39</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a79ec16281183620ea1ec5ca56054ca08"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a79ec16281183620ea1ec5ca56054ca08">Obj::CWalkComponent::CollideWithOtherSkaterLost</a></div><div class="ttdeci">void CollideWithOtherSkaterLost(CCompositeObject *p_other_skater)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00738">GunslingerWalkComponent.cpp:738</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a92ae98482e9efe81ac8dbdeac1ff3e45"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a92ae98482e9efe81ac8dbdeac1ff3e45">Obj::CWalkComponent::calculate_anim_wait_facing_drift_parameters</a></div><div class="ttdeci">void calculate_anim_wait_facing_drift_parameters(const Mth::Vector &amp;goal_facing, float rotate_factor=1.0f)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01998">GunslingerWalkComponent.cpp:1998</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_script_html_a95b75cd110a15699d07bef528f96d7aa"><div class="ttname"><a href="../../db/df2/class_script_1_1_c_script.html#a95b75cd110a15699d07bef528f96d7aa">Script::CScript::GetParams</a></div><div class="ttdeci">CStruct * GetParams()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7f/script_8h_source.html#l00334">script.h:334</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_model_component_html_a000aef42ee124576ed2623e5cf0bebf9"><div class="ttname"><a href="../../df/d52/class_obj_1_1_c_model_component.html#a000aef42ee124576ed2623e5cf0bebf9">Obj::CModelComponent::ApplyLightingFromCollision</a></div><div class="ttdeci">void ApplyLightingFromCollision(CFeeler &amp;feeler)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d14/modelcomponent_8cpp_source.html#l01760">modelcomponent.cpp:1760</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_ab77f5f45e45ad0f1ce8b7d7232a70cb1"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#ab77f5f45e45ad0f1ce8b7d7232a70cb1">Mth::Vector::LengthSqr</a></div><div class="ttdeci">float LengthSqr(void) const</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/vector_8inl_source.html#l00385">vector.inl:385</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a01fc88db74534fc5d7fb6796f45ad37a"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a01fc88db74534fc5d7fb6796f45ad37a">Obj::CWalkComponent::go_anim_wait_state</a></div><div class="ttdeci">void go_anim_wait_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02017">GunslingerWalkComponent.cpp:2017</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html">Script::CStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dec/struct_8h_source.html#l00052">struct.h:52</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6f39b90539802734ce59d1cf210ee757"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6f39b90539802734ce59d1cf210ee757">Obj::CWalkComponent::m_uncontrollable_air_horizontal_vel</a></div><div class="ttdeci">Mth::Vector m_uncontrollable_air_horizontal_vel</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00418">WalkComponent.h:418</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_adde77ab4715d2d80bf95229a6b29cc35"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#adde77ab4715d2d80bf95229a6b29cc35">Obj::CWalkComponent::m_frame_start_pos</a></div><div class="ttdeci">Mth::Vector m_frame_start_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00250">WalkComponent.h:250</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a22f491cbf13933015f993183cd8b113f"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a22f491cbf13933015f993183cd8b113f">Obj::CWalkComponent::mp_animation_component</a></div><div class="ttdeci">CAnimationComponent * mp_animation_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00360">WalkComponent.h:360</a></div></div>
<div class="ttc" id="anamespace_obj_html_a56bbf3de825360de3dfd096f9a6d2a96a5212c4cff0cf263caa5ffa600233b32e"><div class="ttname"><a href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96a5212c4cff0cf263caa5ffa600233b32e">Obj::TRIGGER_SKATE_OFF_EDGE</a></div><div class="ttdeci">@ TRIGGER_SKATE_OFF_EDGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d67/_trigger_component_8h_source.html#l00035">TriggerComponent.h:35</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_af625e82da206d3cbd47cfd506e57f78a"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#af625e82da206d3cbd47cfd506e57f78a">CSkaterPad::GetScaledLeftAnalogStickMagnitude</a></div><div class="ttdeci">float GetScaledLeftAnalogStickMagnitude()</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00036">SkaterPad.h:36</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_movable_contact_component_html_ad831b02fddc5a82a3dc42defa6bcb665"><div class="ttname"><a href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#ad831b02fddc5a82a3dc42defa6bcb665">Obj::CMovableContactComponent::GetContact</a></div><div class="ttdeci">CContact * GetContact()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db1/_movable_contact_component_8h_source.html#l00055">MovableContactComponent.h:55</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_contact_html_ac463d986a8302577c29fc80cce952bba"><div class="ttname"><a href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac463d986a8302577c29fc80cce952bba">Obj::CWalkComponent::SContact::jumpable</a></div><div class="ttdeci">bool jumpable</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00285">WalkComponent.h:285</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a8857ef4c5eb71c5d0b3a183a02d8c47b"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8857ef4c5eb71c5d0b3a183a02d8c47b">Obj::CWalkComponent::m_offset_due_to_movable_contact</a></div><div class="ttdeci">Mth::Vector m_offset_due_to_movable_contact</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00512">WalkComponent.h:512</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_acae6f1a5a02d406ab56292ec3fcfaefd"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#acae6f1a5a02d406ab56292ec3fcfaefd">Script::CStruct::GetFloat</a></div><div class="ttdeci">bool GetFloat(uint32 nameChecksum, float *p_floatValue, EAssertType assert=NO_ASSERT) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01503">struct.cpp:1503</a></div></div>
<div class="ttc" id="a_coll_cache_8h_html"><div class="ttname"><a href="../../d5/d0f/_coll_cache_8h.html">CollCache.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a17c64d316c21160788385dfbbbd8ed8aaab0df6f28b5c50c589e33343f80d61f0"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a17c64d316c21160788385dfbbbd8ed8aaab0df6f28b5c50c589e33343f80d61f0">Obj::CWalkComponent::LADDERMOVE</a></div><div class="ttdeci">@ LADDERMOVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00101">WalkComponent.h:101</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_movable_contact_component_html_a7cf22b37f0b4630f05c96cc5e6e5dde7"><div class="ttname"><a href="../../df/dc1/class_obj_1_1_c_movable_contact_component.html#a7cf22b37f0b4630f05c96cc5e6e5dde7">Obj::CMovableContactComponent::UpdateContact</a></div><div class="ttdeci">bool UpdateContact(const Mth::Vector &amp;pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/db1/_movable_contact_component_8h_source.html#l00116">MovableContactComponent.h:116</a></div></div>
<div class="ttc" id="aclass_mth_1_1_matrix_html_ad0595a262667a0ac38df0e5b8ad09d7d"><div class="ttname"><a href="../../d9/d37/class_mth_1_1_matrix.html#ad0595a262667a0ac38df0e5b8ad09d7d">Mth::Matrix::Rotate</a></div><div class="ttdeci">Vector Rotate(const Vector &amp;src) const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d28/matrix_8inl_source.html#l00736">matrix.inl:736</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_a80fea312ec3a472e288443b2f4435d7c"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#a80fea312ec3a472e288443b2f4435d7c">CFeeler::GetSector</a></div><div class="ttdeci">Nx::CCollObj * GetSector() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00132">feeler.h:132</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a323cafef6781c82fbc5970f54be8f8cc"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a323cafef6781c82fbc5970f54be8f8cc">Obj::CWalkComponent::m_false_wall</a></div><div class="ttdeci">struct Obj::CWalkComponent::SFalseWall m_false_wall</div></div>
<div class="ttc" id="aclass_nx_1_1_c_coll_cache_html_ad1834000d2f81e13ad86003ce63efb8c"><div class="ttname"><a href="../../d5/d4f/class_nx_1_1_c_coll_cache.html#ad1834000d2f81e13ad86003ce63efb8c">Nx::CCollCache::Update</a></div><div class="ttdeci">void Update(const Mth::CBBox &amp;bbox)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d09/_coll_cache_8cpp_source.html#l00080">CollCache.cpp:80</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_camera_component_html_a65111627a036f86fedafb4fa686dad24"><div class="ttname"><a href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#a65111627a036f86fedafb4fa686dad24">Obj::CWalkCameraComponent::SetOverrides</a></div><div class="ttdeci">void SetOverrides(const Mth::Vector &amp;facing, float slerp_rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/_walk_camera_component_8h_source.html#l00117">WalkCameraComponent.h:117</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_a251ec89a507fa7213bf8d6a389e5489c"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#a251ec89a507fa7213bf8d6a389e5489c">CSkaterPad::m_triangle</a></div><div class="ttdeci">CSkaterButton m_triangle</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00056">SkaterPad.h:56</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html">Obj::CBaseComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00026">basecomponent.h:26</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ac17e6c6c0f6f65e317116a2f2cc3e2cd"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac17e6c6c0f6f65e317116a2f2cc3e2cd">Obj::CWalkComponent::m_upward</a></div><div class="ttdeci">Mth::Vector m_upward</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00247">WalkComponent.h:247</a></div></div>
<div class="ttc" id="arail_8h_html"><div class="ttname"><a href="../../d9/d33/rail_8h.html">rail.h</a></div></div>
<div class="ttc" id="aclass_c_skater_button_html_a61b52b36077d564ddebe8d614572e9e2"><div class="ttname"><a href="../../da/dd9/class_c_skater_button.html#a61b52b36077d564ddebe8d614572e9e2">CSkaterButton::ClearRelease</a></div><div class="ttdeci">void ClearRelease()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d22/_skater_button_8cpp_source.html#l00116">SkaterButton.cpp:116</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a3edf97bf62fca56d8e1ca7b13cf8152b"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a3edf97bf62fca56d8e1ca7b13cf8152b">Obj::CWalkComponent::m_state</a></div><div class="ttdeci">EStateType m_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00234">WalkComponent.h:234</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_wall_push_test_html_a95eee7b82a06adfcb41976e194021662"><div class="ttname"><a href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#a95eee7b82a06adfcb41976e194021662">Obj::CWalkComponent::SWallPushTest::test_start_time</a></div><div class="ttdeci">Tmr::Time test_start_time</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00383">WalkComponent.h:383</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html">Mth::Vector</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00088">vector.h:88</a></div></div>
<div class="ttc" id="aclass_c_skater_button_html_ad17c4ebd394f8e5966f6291af1477baa"><div class="ttname"><a href="../../da/dd9/class_c_skater_button.html#ad17c4ebd394f8e5966f6291af1477baa">CSkaterButton::GetPressed</a></div><div class="ttdeci">bool GetPressed()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/_skater_button_8h_source.html#l00027">SkaterButton.h:27</a></div></div>
<div class="ttc" id="afeeler_8h_html"><div class="ttname"><a href="../../d1/d74/feeler_8h.html">feeler.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a23d29f9829ddb5950aad23641e5a4716"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a23d29f9829ddb5950aad23641e5a4716">Obj::CCompositeObject::GetVel</a></div><div class="ttdeci">Mth::Vector &amp; GetVel(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00107">compositeobject.h:107</a></div></div>
<div class="ttc" id="aclass_mth_1_1_matrix_html"><div class="ttname"><a href="../../d9/d37/class_mth_1_1_matrix.html">Mth::Matrix</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/df4/matrix_8h_source.html#l00060">matrix.h:60</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_a6213a6d0794e924d7b2b310b97a5e1f2"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#a6213a6d0794e924d7b2b310b97a5e1f2">CFeeler::GetMovingObject</a></div><div class="ttdeci">Obj::CCompositeObject * GetMovingObject()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df1/feeler_8cpp_source.html#l00396">feeler.cpp:396</a></div></div>
<div class="ttc" id="anamespace_mth_html_a0543202913c3b99c7be87db3e13710b0"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#a0543202913c3b99c7be87db3e13710b0">Mth::DotProduct</a></div><div class="ttdeci">float DotProduct(const Quat &amp;v1, const Quat &amp;v2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/db2/quat_8inl_source.html#l00522">quat.inl:522</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a600ca8199305710b4111f9dc0ab803b9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a600ca8199305710b4111f9dc0ab803b9">Obj::CWalkComponent::leave_movable_contact_for_air</a></div><div class="ttdeci">void leave_movable_contact_for_air(Mth::Vector &amp;horizontal_vel, float &amp;vertical_vel)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01964">GunslingerWalkComponent.cpp:1964</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_a857f74a78460c52a1454db73e1c0a59d"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#a857f74a78460c52a1454db73e1c0a59d">CFeeler::GetNormal</a></div><div class="ttdeci">const Mth::Vector &amp; GetNormal() const</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00112">feeler.h:112</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a2c975b7481991f160a8483738e749f69"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a2c975b7481991f160a8483738e749f69">Obj::CWalkComponent::maybe_climb_down_ladder</a></div><div class="ttdeci">bool maybe_climb_down_ladder()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/db0/_walk_ladder_util_8cpp_source.html#l00088">WalkLadderUtil.cpp:88</a></div></div>
<div class="ttc" id="achecksum_8h_html"><div class="ttname"><a href="../../dc/d31/checksum_8h.html">checksum.h</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_aa2c2e4f5a505f8d992eed67fe5dc8999"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#aa2c2e4f5a505f8d992eed67fe5dc8999">CFeeler::DebugLine</a></div><div class="ttdeci">void DebugLine(int r=255, int g=255, int b=255, int num_frames=0)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df1/feeler_8cpp_source.html#l00409">feeler.cpp:409</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a977c668dbbde50506e556cc1dbc60017"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a977c668dbbde50506e556cc1dbc60017">Obj::CWalkComponent::uber_frig</a></div><div class="ttdeci">void uber_frig()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01727">GunslingerWalkComponent.cpp:1727</a></div></div>
<div class="ttc" id="aclass_mth_1_1_c_b_box_html"><div class="ttname"><a href="../../dc/d50/class_mth_1_1_c_b_box.html">Mth::CBBox</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/geometry_8h_source.html#l00118">geometry.h:118</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_skater_physics_control_component_html_a229415c2830e3032c4f5734b77089936"><div class="ttname"><a href="../../d4/deb/class_obj_1_1_c_skater_physics_control_component.html#a229415c2830e3032c4f5734b77089936">Obj::CSkaterPhysicsControlComponent::HaveBeenReset</a></div><div class="ttdeci">bool HaveBeenReset()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dfd/_skater_physics_control_component_8h_source.html#l00089">SkaterPhysicsControlComponent.h:89</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6fad5dcf6774ce730b69880d78568b5e"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6fad5dcf6774ce730b69880d78568b5e">Obj::CWalkComponent::maybe_drop_to_hang</a></div><div class="ttdeci">bool maybe_drop_to_hang()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9b/_walk_hang_util_8cpp_source.html#l00168">WalkHangUtil.cpp:168</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_false_wall_html_a6d9f3164d7a72289304a6df0840dd8ce"><div class="ttname"><a href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a6d9f3164d7a72289304a6df0840dd8ce">Obj::CWalkComponent::SFalseWall::normal</a></div><div class="ttdeci">Mth::Vector normal</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00435">WalkComponent.h:435</a></div></div>
<div class="ttc" id="aclass_mth_1_1_vector_html_a66f11c6027ceb3ee7527e4a70690b71d"><div class="ttname"><a href="../../d1/d08/class_mth_1_1_vector.html#a66f11c6027ceb3ee7527e4a70690b71d">Mth::Vector::ProjectToPlane</a></div><div class="ttdeci">Vector &amp; ProjectToPlane(const Vector &amp;normal)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1b/vector_8cpp_source.html#l00151">vector.cpp:151</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a99d5f9a35ca44238df445eabb1af1724"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a99d5f9a35ca44238df445eabb1af1724">Obj::CWalkComponent::m_run_toggle</a></div><div class="ttdeci">bool m_run_toggle</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00375">WalkComponent.h:375</a></div></div>
<div class="ttc" id="anamespace_ns_buffer_html_a64facb0dbc4b9270fda55cc47e273931"><div class="ttname"><a href="../../d3/dbf/namespace_ns_buffer.html#a64facb0dbc4b9270fda55cc47e273931">NsBuffer::end</a></div><div class="ttdeci">void end(void)</div><div class="ttdoc">‍********************************************************************************</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d5d/p__buffer_8cpp_source.html#l00132">p_buffer.cpp:132</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ae4534dbed822afd9f723ea6d55d28a75"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4534dbed822afd9f723ea6d55d28a75">Obj::CWalkComponent::m_horizontal_vel</a></div><div class="ttdeci">Mth::Vector m_horizontal_vel</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00244">WalkComponent.h:244</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aeeb0a810a9c34037804f95d35a7cff6b"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aeeb0a810a9c34037804f95d35a7cff6b">Obj::CWalkComponent::m_ground_normal</a></div><div class="ttdeci">Mth::Vector m_ground_normal</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00372">WalkComponent.h:372</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ad766498be574d6be90a574cb45d0e5b9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ad766498be574d6be90a574cb45d0e5b9">Obj::CWalkComponent::setup_collision_cache</a></div><div class="ttdeci">void setup_collision_cache()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02085">GunslingerWalkComponent.cpp:2085</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_skater_physics_control_component_html_a464204726957c78800bcfd2798040994"><div class="ttname"><a href="../../d4/deb/class_obj_1_1_c_skater_physics_control_component.html#a464204726957c78800bcfd2798040994">Obj::CSkaterPhysicsControlComponent::CallMemberFunction</a></div><div class="ttdeci">virtual EMemberFunctionResult CallMemberFunction(uint32 Checksum, Script::CStruct *pParams, Script::CScript *pScript)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d32/_skater_physics_control_component_8cpp_source.html#l00144">SkaterPhysicsControlComponent.cpp:144</a></div></div>
<div class="ttc" id="asymboltable_8h_html"><div class="ttname"><a href="../../d6/d98/symboltable_8h.html">symboltable.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aaa1ca0f3fadb51de9597cddcf7d65cec"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa1ca0f3fadb51de9597cddcf7d65cec">Obj::CWalkComponent::m_anim_standard_speed</a></div><div class="ttdeci">float m_anim_standard_speed</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00389">WalkComponent.h:389</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_object_html_a7c34c20cf05f48269098981587fb9689"><div class="ttname"><a href="../../df/dde/class_obj_1_1_c_object.html#a7c34c20cf05f48269098981587fb9689">Obj::CObject::RemoveEventHandler</a></div><div class="ttdeci">void RemoveEventHandler(uint32 type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d30/object_8cpp_source.html#l00301">object.cpp:301</a></div></div>
<div class="ttc" id="aclass_c_contact_html_aaf815222fd2942e7c260d2b6c7eda5b9"><div class="ttname"><a href="../../d2/d52/class_c_contact.html#aaf815222fd2942e7c260d2b6c7eda5b9">CContact::IsRotated</a></div><div class="ttdeci">bool IsRotated() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcf/contact_8h_source.html#l00042">contact.h:42</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aa359c688dc5a5fde3ce8a5e062c38e99"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa359c688dc5a5fde3ce8a5e062c38e99">Obj::CWalkComponent::calculate_feeler_offset_direction</a></div><div class="ttdeci">Mth::Vector calculate_feeler_offset_direction(int contact)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02305">GunslingerWalkComponent.cpp:2305</a></div></div>
<div class="ttc" id="aclass_c_skater_button_html_a735c5f3324a7d41a78b16892d5093b9d"><div class="ttname"><a href="../../da/dd9/class_c_skater_button.html#a735c5f3324a7d41a78b16892d5093b9d">CSkaterButton::ClearTrigger</a></div><div class="ttdeci">void ClearTrigger()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d22/_skater_button_8cpp_source.html#l00111">SkaterButton.cpp:111</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ac80d99d291043abc11226445b8e96cf0"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac80d99d291043abc11226445b8e96cf0">Obj::CWalkComponent::set_state</a></div><div class="ttdeci">void set_state(EStateType state)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcc/_walk_component_8cpp_source.html#l00687">WalkComponent.cpp:687</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6a44e542d6bb5fb42896e92fcc5e78b056">Obj::CBaseComponent::MF_TRUE</a></div><div class="ttdeci">@ MF_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00041">basecomponent.h:41</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_animation_component_html_a5aceee61de07d0e4e5a6213e64c0cfe9"><div class="ttname"><a href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a5aceee61de07d0e4e5a6213e64c0cfe9">Obj::CAnimationComponent::SetAnimSpeed</a></div><div class="ttdeci">void SetAnimSpeed(float speed, bool propagate, bool all_channels=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2e/animationcomponent_8cpp_source.html#l01507">animationcomponent.cpp:1507</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aa70017630ff3ee14254b6e27cde495d3"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aa70017630ff3ee14254b6e27cde495d3">Obj::CWalkComponent::s_create</a></div><div class="ttdeci">static CBaseComponent * s_create()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00126">GunslingerWalkComponent.cpp:126</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_composite_object_html_a4383081077e64d717b48969750fc083a"><div class="ttname"><a href="../../dd/d7b/class_obj_1_1_c_composite_object.html#a4383081077e64d717b48969750fc083a">Obj::CCompositeObject::SetVel</a></div><div class="ttdeci">void SetVel(const Mth::Vector &amp;vel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dd4/compositeobject_8h_source.html#l00108">compositeobject.h:108</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ae4d6ef4db7092846a673dd137b0807cf"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae4d6ef4db7092846a673dd137b0807cf">Obj::CWalkComponent::maybe_grab_to_ladder</a></div><div class="ttdeci">bool maybe_grab_to_ladder(const Mth::Vector &amp;start_pos, const Mth::Vector &amp;end_pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/db0/_walk_ladder_util_8cpp_source.html#l00151">WalkLadderUtil.cpp:151</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_afb004ebe80726e356693ce26c049e7a2"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#afb004ebe80726e356693ce26c049e7a2">Obj::CWalkComponent::mp_physics_control_component</a></div><div class="ttdeci">CSkaterPhysicsControlComponent * mp_physics_control_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00363">WalkComponent.h:363</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_wall_push_test_html_ab05c4755d02637c711f49c56f5b00e11"><div class="ttname"><a href="../../de/d17/struct_obj_1_1_c_walk_component_1_1_s_wall_push_test.html#ab05c4755d02637c711f49c56f5b00e11">Obj::CWalkComponent::SWallPushTest::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00380">WalkComponent.h:380</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_a580b0b3f34e09de76b4b217e8838771f"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#a580b0b3f34e09de76b4b217e8838771f">CSkaterPad::m_leftX</a></div><div class="ttdeci">float m_leftX</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00063">SkaterPad.h:63</a></div></div>
<div class="ttc" id="aclass_c_contact_html_ae1bf784318d82abc8c88032909614c63"><div class="ttname"><a href="../../d2/d52/class_c_contact.html#ae1bf784318d82abc8c88032909614c63">CContact::GetMovement</a></div><div class="ttdeci">const Mth::Vector &amp; GetMovement() const</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcf/contact_8h_source.html#l00037">contact.h:37</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a1685485cbc1ecbcd8b8ebfbcaac9db0b"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1685485cbc1ecbcd8b8ebfbcaac9db0b">Obj::CWalkComponent::mp_contacts</a></div><div class="ttdeci">struct Obj::CWalkComponent::SContact mp_contacts[vNUM_FEELERS+1]</div></div>
<div class="ttc" id="anamespace_mth_html_a9d5105123d4f824fcab0a8e5b748774a"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#a9d5105123d4f824fcab0a8e5b748774a">Mth::Abs</a></div><div class="ttdeci">int Abs(int x)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00115">math.h:115</a></div></div>
<div class="ttc" id="acompositeobject_8h_html"><div class="ttname"><a href="../../d9/dd4/compositeobject_8h.html">compositeobject.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aaa59b5c870b2adea26a2faf8831866d3"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aaa59b5c870b2adea26a2faf8831866d3">Obj::CWalkComponent::m_curb_float_height</a></div><div class="ttdeci">float m_curb_float_height</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00313">WalkComponent.h:313</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_acb60b78cb120aaaa883df1fd4d4d15bf"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#acb60b78cb120aaaa883df1fd4d4d15bf">Obj::CBaseComponent::GetDebugInfo</a></div><div class="ttdeci">virtual void GetDebugInfo(Script::CStruct *p_info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbd/basecomponent_8cpp_source.html#l00113">basecomponent.cpp:113</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ab58303a24bb5d1ee544ca45463cacc4f"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ab58303a24bb5d1ee544ca45463cacc4f">Obj::CWalkComponent::maybe_jump_low_barrier</a></div><div class="ttdeci">bool maybe_jump_low_barrier()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01816">GunslingerWalkComponent.cpp:1816</a></div></div>
<div class="ttc" id="aclass_c_feeler_html"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html">CFeeler</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00029">feeler.h:29</a></div></div>
<div class="ttc" id="anamespace_mth_html_a2b4280ae191736bc0c6d331bf95a7c87"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#a2b4280ae191736bc0c6d331bf95a7c87">Mth::ClampMin</a></div><div class="ttdeci">float ClampMin(float v, float min)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00170">math.h:170</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6652d70459d9c9cc3fb03c1b01dad51c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6652d70459d9c9cc3fb03c1b01dad51c">Obj::CWalkComponent::m_initial_hang_animation</a></div><div class="ttdeci">uint32 m_initial_hang_animation</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00457">WalkComponent.h:457</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a567a84afd81d1a19881f1394becb69d8"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a567a84afd81d1a19881f1394becb69d8">Obj::CWalkComponent::m_last_ground_feeler</a></div><div class="ttdeci">CFeeler m_last_ground_feeler</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00392">WalkComponent.h:392</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_contact_html_ade002bc1e8e105fd43b042f6c802882c"><div class="ttname"><a href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ade002bc1e8e105fd43b042f6c802882c">Obj::CWalkComponent::SContact::movement</a></div><div class="ttdeci">float movement</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00288">WalkComponent.h:288</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a1541074b5bb529bbbcf7c1cf2e047189"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1541074b5bb529bbbcf7c1cf2e047189">Obj::CWalkComponent::~CWalkComponent</a></div><div class="ttdeci">virtual ~CWalkComponent()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00155">GunslingerWalkComponent.cpp:155</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a9d02fe38c8947e79e32f6af1b5e98334"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9d02fe38c8947e79e32f6af1b5e98334">Obj::CWalkComponent::go_ladder_state</a></div><div class="ttdeci">void go_ladder_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/db0/_walk_ladder_util_8cpp_source.html#l00360">WalkLadderUtil.cpp:360</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a84b64a53efda43c87fb1efd31d414ec1"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a84b64a53efda43c87fb1efd31d414ec1">Obj::CWalkComponent::m_frame_event</a></div><div class="ttdeci">uint32 m_frame_event</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00253">WalkComponent.h:253</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a026d7238ec78dafaf1e513a2f48a80c8"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a026d7238ec78dafaf1e513a2f48a80c8">Obj::CWalkComponent::adjust_facing_for_adjusted_horizontal_vel</a></div><div class="ttdeci">void adjust_facing_for_adjusted_horizontal_vel()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01119">GunslingerWalkComponent.cpp:1119</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a5966f6e809bbaf3ee74859a1762c36e6"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a5966f6e809bbaf3ee74859a1762c36e6">Obj::CWalkComponent::m_pos</a></div><div class="ttdeci">Mth::Vector m_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00243">WalkComponent.h:243</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a08105348bfb20eb5fe64557c0c65881e"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a08105348bfb20eb5fe64557c0c65881e">Obj::CWalkComponent::m_frame_length</a></div><div class="ttdeci">float m_frame_length</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00259">WalkComponent.h:259</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6298255bf5676b8bc7fb24e2fae96163"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6298255bf5676b8bc7fb24e2fae96163">Obj::CWalkComponent::m_last_ground_feeler_valid</a></div><div class="ttdeci">bool m_last_ground_feeler_valid</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00393">WalkComponent.h:393</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_afe2094362feb83d1fdf19df00ef3ce5c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#afe2094362feb83d1fdf19df00ef3ce5c">Obj::CWalkComponent::calculate_desired_speed</a></div><div class="ttdeci">float calculate_desired_speed()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02280">GunslingerWalkComponent.cpp:2280</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a7cf53422bf3a8a52e69c6d466c449b54"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7cf53422bf3a8a52e69c6d466c449b54">Obj::CWalkComponent::adjust_desired_speed_for_slope</a></div><div class="ttdeci">float adjust_desired_speed_for_slope(float desired_speed)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01168">GunslingerWalkComponent.cpp:1168</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_coll_cache_manager_html_a531b3aa8b0ca163aa2212ea0ef738376"><div class="ttname"><a href="../../d3/d8f/class_nx_1_1_c_coll_cache_manager.html#a531b3aa8b0ca163aa2212ea0ef738376">Nx::CCollCacheManager::sDestroyCollCache</a></div><div class="ttdeci">static void sDestroyCollCache(CCollCache *p_cache)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d09/_coll_cache_8cpp_source.html#l00281">CollCache.cpp:281</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_ae97bed02600c38d620dc9a15f2cdb507"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#ae97bed02600c38d620dc9a15f2cdb507">CFeeler::sClearDefaultCache</a></div><div class="ttdeci">static void sClearDefaultCache()</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d74/feeler_8h_source.html#l00192">feeler.h:192</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_skater_physics_control_component_html"><div class="ttname"><a href="../../d4/deb/class_obj_1_1_c_skater_physics_control_component.html">Obj::CSkaterPhysicsControlComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dfd/_skater_physics_control_component_8h_source.html#l00059">SkaterPhysicsControlComponent.h:59</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a739e89f6d8b4d5ac5cff457f86b564bf"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a739e89f6d8b4d5ac5cff457f86b564bf">Obj::CWalkComponent::adjust_curb_float_height</a></div><div class="ttdeci">void adjust_curb_float_height()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01283">GunslingerWalkComponent.cpp:1283</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a28994255913671fef01e95b0a938717c"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a28994255913671fef01e95b0a938717c">Obj::CWalkComponent::CleanUpWalkState</a></div><div class="ttdeci">void CleanUpWalkState()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00645">GunslingerWalkComponent.cpp:645</a></div></div>
<div class="ttc" id="aclass_mth_1_1_line_html_a4bc5ff046792a776b7b0f9e5ea751200"><div class="ttname"><a href="../../da/db3/class_mth_1_1_line.html#a4bc5ff046792a776b7b0f9e5ea751200">Mth::Line::m_start</a></div><div class="ttdeci">Vector m_start</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/geometry_8h_source.html#l00082">geometry.h:82</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_base_component_html_aa8c2bbc27a0427b6a123d66f308c77b6"><div class="ttname"><a href="../../d0/d7e/class_obj_1_1_c_base_component.html#aa8c2bbc27a0427b6a123d66f308c77b6">Obj::CBaseComponent::EMemberFunctionResult</a></div><div class="ttdeci">EMemberFunctionResult</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1a/basecomponent_8h_source.html#l00038">basecomponent.h:38</a></div></div>
<div class="ttc" id="aclass_c_skater_button_html_a345702274dac5d99497f6f2ce2616dba"><div class="ttname"><a href="../../da/dd9/class_c_skater_button.html#a345702274dac5d99497f6f2ce2616dba">CSkaterButton::GetPressedTime</a></div><div class="ttdeci">uint32 GetPressedTime()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d22/_skater_button_8cpp_source.html#l00106">SkaterButton.cpp:106</a></div></div>
<div class="ttc" id="anamespace_obj_html"><div class="ttname"><a href="../../d2/d10/namespace_obj.html">Obj</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d87/_collision_8h_source.html#l00042">Collision.h:42</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a69776cbd692ad0370f7f59cad039df2f"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a69776cbd692ad0370f7f59cad039df2f">Obj::CWalkComponent::calculate_horizontal_speed_and_facing</a></div><div class="ttdeci">void calculate_horizontal_speed_and_facing(float &amp;horizontal_speed)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00753">GunslingerWalkComponent.cpp:753</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_a9d80cbafe413f8be6c3409400c3eb517"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#a9d80cbafe413f8be6c3409400c3eb517">CFeeler::IsMovableCollision</a></div><div class="ttdeci">bool IsMovableCollision()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df1/feeler_8cpp_source.html#l00378">feeler.cpp:378</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_trigger_component_html_a22c10b196e94076c0715a8d1c8185b04"><div class="ttname"><a href="../../df/d8e/class_obj_1_1_c_trigger_component.html#a22c10b196e94076c0715a8d1c8185b04">Obj::CTriggerComponent::CheckFeelerForTrigger</a></div><div class="ttdeci">void CheckFeelerForTrigger(TriggerEventType type, CLineFeeler &amp;p_feeler)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/de0/_trigger_component_8cpp_source.html#l00165">TriggerComponent.cpp:165</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_struct_html_a148f8f6bc239cff60340c410df449c71"><div class="ttname"><a href="../../d2/df7/class_script_1_1_c_struct.html#a148f8f6bc239cff60340c410df449c71">Script::CStruct::AddChecksum</a></div><div class="ttdeci">void AddChecksum(uint32 nameChecksum, uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d98/struct_8cpp_source.html#l01071">struct.cpp:1071</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aedc29855e2817adb3caba2554d998225"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aedc29855e2817adb3caba2554d998225">Obj::CWalkComponent::InitFromStructure</a></div><div class="ttdeci">virtual void InitFromStructure(Script::CStruct *pParams)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00187">GunslingerWalkComponent.cpp:187</a></div></div>
<div class="ttc" id="a_input_component_8h_html"><div class="ttname"><a href="../../d1/d1a/_input_component_8h.html">InputComponent.h</a></div></div>
<div class="ttc" id="askate_8h_html"><div class="ttname"><a href="../../df/d23/skate_8h.html">skate.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a577b1a0dc5ac7cdf4184fac9cc61b5c2"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a577b1a0dc5ac7cdf4184fac9cc61b5c2">Obj::CWalkComponent::lerp_upright</a></div><div class="ttdeci">void lerp_upright()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01768">GunslingerWalkComponent.cpp:1768</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a6c089e321be6033ca61d108084de8f4da14ac4b08da24a2dce320691441517187">Obj::CWalkComponent::WALKING_GROUND</a></div><div class="ttdeci">@ WALKING_GROUND</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00086">WalkComponent.h:86</a></div></div>
<div class="ttc" id="amodelcomponent_8h_html"><div class="ttname"><a href="../../db/d45/modelcomponent_8h.html">modelcomponent.h</a></div></div>
<div class="ttc" id="avector_8h_html_a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635a58833a3110c570fb05130d40c365d1e4">X</a></div><div class="ttdeci">@ X</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00068">vector.h:68</a></div></div>
<div class="ttc" id="anamespace_script_html_aa0c62774649e1e3abcab019ea335a3ad"><div class="ttname"><a href="../../d1/d54/namespace_script.html#aa0c62774649e1e3abcab019ea335a3ad">Script::GetInteger</a></div><div class="ttdeci">int GetInteger(uint32 checksum, EAssertType assert)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7c/symboltable_8cpp_source.html#l00514">symboltable.cpp:514</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a43d215f3a5dadabc06e47688b6f30823"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a43d215f3a5dadabc06e47688b6f30823">Obj::CWalkComponent::check_for_landing</a></div><div class="ttdeci">void check_for_landing(const Mth::Vector &amp;previous_pos, const Mth::Vector &amp;final_pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01669">GunslingerWalkComponent.cpp:1669</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a30280997913993fc998b4b6a71808b6d"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a30280997913993fc998b4b6a71808b6d">Obj::CWalkComponent::maybe_grab_to_hang</a></div><div class="ttdeci">bool maybe_grab_to_hang(Mth::Vector start_pos, Mth::Vector end_pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d9b/_walk_hang_util_8cpp_source.html#l00287">WalkHangUtil.cpp:287</a></div></div>
<div class="ttc" id="astruct_8h_html"><div class="ttname"><a href="../../df/dec/struct_8h.html">struct.h</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ae2ab22f8b3a94d811832fc65b41d66e4"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae2ab22f8b3a94d811832fc65b41d66e4">Obj::CWalkComponent::CWalkComponent</a></div><div class="ttdeci">CWalkComponent()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00136">GunslingerWalkComponent.cpp:136</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a8ad285d1c978f36880cff0648c07ca3f"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a8ad285d1c978f36880cff0648c07ca3f">Obj::CWalkComponent::m_control_magnitude</a></div><div class="ttdeci">float m_control_magnitude</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00263">WalkComponent.h:263</a></div></div>
<div class="ttc" id="ascript_8h_html"><div class="ttname"><a href="../../de/d7f/script_8h.html">script.h</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_contact_html_ac5735ce7cf31a3167f529bea2bbf1b28"><div class="ttname"><a href="../../df/dcb/struct_obj_1_1_c_walk_component_1_1_s_contact.html#ac5735ce7cf31a3167f529bea2bbf1b28">Obj::CWalkComponent::SContact::in_collision</a></div><div class="ttdeci">bool in_collision</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00279">WalkComponent.h:279</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a0ac69c034862c775af90cd21b01d2182"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a0ac69c034862c775af90cd21b01d2182">Obj::CWalkComponent::go_on_ground_state</a></div><div class="ttdeci">void go_on_ground_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00655">GunslingerWalkComponent.cpp:655</a></div></div>
<div class="ttc" id="avector_8h_html_a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a726ca809ffd3d67ab4b8476646f26635aa70478ce277ffc322f8e1e3418e07355">Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00068">vector.h:68</a></div></div>
<div class="ttc" id="astruct_obj_1_1_c_walk_component_1_1_s_false_wall_html_a1fec63eae4ac97e75153bd9cf9b998fe"><div class="ttname"><a href="../../dd/d13/struct_obj_1_1_c_walk_component_1_1_s_false_wall.html#a1fec63eae4ac97e75153bd9cf9b998fe">Obj::CWalkComponent::SFalseWall::active</a></div><div class="ttdeci">bool active</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00432">WalkComponent.h:432</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a12e5c5621ff9194dada77273de0a45ad"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a12e5c5621ff9194dada77273de0a45ad">Obj::CWalkComponent::m_control_direction</a></div><div class="ttdeci">Mth::Vector m_control_direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00262">WalkComponent.h:262</a></div></div>
<div class="ttc" id="aclass_c_skater_button_html_abb7ba2f7cbeb5c929209152e0200bf4c"><div class="ttname"><a href="../../da/dd9/class_c_skater_button.html#abb7ba2f7cbeb5c929209152e0200bf4c">CSkaterButton::GetTriggered</a></div><div class="ttdeci">bool GetTriggered()</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d36/_skater_button_8h_source.html#l00061">SkaterButton.h:61</a></div></div>
<div class="ttc" id="aclass_c_feeler_html_aea1151612313752f5457aa1b15eca92b"><div class="ttname"><a href="../../dc/d35/class_c_feeler.html#aea1151612313752f5457aa1b15eca92b">CFeeler::GetCollision</a></div><div class="ttdeci">bool GetCollision(const Mth::Vector &amp;start, const Mth::Vector &amp;end, bool movables=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df1/feeler_8cpp_source.html#l00366">feeler.cpp:366</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_a14259352998bcf74c0f9bce4a5c37a86"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#a14259352998bcf74c0f9bce4a5c37a86">CSkaterPad::m_leftAngle</a></div><div class="ttdeci">float m_leftAngle</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00074">SkaterPad.h:74</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_a41b59c68e9d4e830401e7d0d63633046"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#a41b59c68e9d4e830401e7d0d63633046">CSkaterPad::m_R1</a></div><div class="ttdeci">CSkaterButton m_R1</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00051">SkaterPad.h:51</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a175e4af768c563cf579f4048997d4574"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a175e4af768c563cf579f4048997d4574">Obj::CWalkComponent::account_for_movable_contact</a></div><div class="ttdeci">void account_for_movable_contact()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01351">GunslingerWalkComponent.cpp:1351</a></div></div>
<div class="ttc" id="anamespace_script_html_a1dbce4b634727b78b34e4f40ad1ba884ab2e8f3e4dd999c157c1c26dbd463e1a8"><div class="ttname"><a href="../../d1/d54/namespace_script.html#a1dbce4b634727b78b34e4f40ad1ba884ab2e8f3e4dd999c157c1c26dbd463e1a8">Script::ASSERT</a></div><div class="ttdeci">@ ASSERT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d49/scriptdefs_8h_source.html#l00016">scriptdefs.h:16</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ac639c45155e155c89a09084efcdd4e39"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac639c45155e155c89a09084efcdd4e39">Obj::CWalkComponent::m_facing</a></div><div class="ttdeci">Mth::Vector m_facing</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00246">WalkComponent.h:246</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a1b8a1a1c44669478e82c888f170250d9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1b8a1a1c44669478e82c888f170250d9">Obj::CWalkComponent::maybe_stick_to_rail</a></div><div class="ttdeci">bool maybe_stick_to_rail()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l02074">GunslingerWalkComponent.cpp:2074</a></div></div>
<div class="ttc" id="anamespace_obj_html_aad73e464e342f087490c828261d877e0"><div class="ttname"><a href="../../d2/d10/namespace_obj.html#aad73e464e342f087490c828261d877e0">Obj::s_get_gunslinger_param</a></div><div class="ttdeci">static float s_get_gunslinger_param(uint32 checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/_gunslinger_walk_camera_component_8cpp_source.html#l00043">GunslingerWalkCameraComponent.cpp:43</a></div></div>
<div class="ttc" id="anamespace_gfx_html_aa5fe969d58eb3f2da559a24244a15ef9"><div class="ttname"><a href="../../de/d47/namespace_gfx.html#aa5fe969d58eb3f2da559a24244a15ef9">Gfx::AddDebugStar</a></div><div class="ttdeci">void AddDebugStar(Mth::Vector v0, float r, int rgb0, int numDrawFrames)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d04/debuggfx_8cpp_source.html#l00511">debuggfx.cpp:511</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a91b01d646eb74113799e647dbc4f462a"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a91b01d646eb74113799e647dbc4f462a">Obj::CWalkComponent::maybe_climb_up_ladder</a></div><div class="ttdeci">bool maybe_climb_up_ladder(bool user_requested=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/db0/_walk_ladder_util_8cpp_source.html#l00032">WalkLadderUtil.cpp:32</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a73927b864cbb3b9834d0fe3a7edd14e9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a73927b864cbb3b9834d0fe3a7edd14e9">Obj::CWalkComponent::m_ignore_grab_button</a></div><div class="ttdeci">bool m_ignore_grab_button</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00268">WalkComponent.h:268</a></div></div>
<div class="ttc" id="anamespace_mth_html_ab1c1b5804cee65f8c4f453adf4eaf30c"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#ab1c1b5804cee65f8c4f453adf4eaf30c">Mth::LinearMap</a></div><div class="ttdeci">float LinearMap(float a, float b, float value, float value_min, float value_max)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00224">math.h:224</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a42afe47c63bd1b6e471d73dfd5baa6e6"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a42afe47c63bd1b6e471d73dfd5baa6e6">Obj::CWalkComponent::mp_model_component</a></div><div class="ttdeci">CModelComponent * mp_model_component</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00361">WalkComponent.h:361</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_camera_component_html_aade7494be74cbc48f94855165a30e660"><div class="ttname"><a href="../../d9/d82/class_obj_1_1_c_walk_camera_component.html#aade7494be74cbc48f94855165a30e660">Obj::CWalkCameraComponent::UnsetOverrides</a></div><div class="ttdeci">void UnsetOverrides()</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3d/_walk_camera_component_8h_source.html#l00129">WalkCameraComponent.h:129</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a1c313b8688e1a6f9afc481b91e146cfb"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a1c313b8688e1a6f9afc481b91e146cfb">Obj::CWalkComponent::mp_anim_wait_complete_callback</a></div><div class="ttdeci">AnimWaitCallbackPtr mp_anim_wait_complete_callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00522">WalkComponent.h:522</a></div></div>
<div class="ttc" id="anamespace_mth_html_aa786219703c4a079a33dfada4463bea0"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#aa786219703c4a079a33dfada4463bea0">Mth::Sgn</a></div><div class="ttdeci">float Sgn(float x)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00285">math.h:285</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a40ceeaea9d8d11dd084f85e5f1a9c6b1"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a40ceeaea9d8d11dd084f85e5f1a9c6b1">Obj::CWalkComponent::go_in_air_state</a></div><div class="ttdeci">void go_in_air_state()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01500">GunslingerWalkComponent.cpp:1500</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_acf4c4c75c04baefe7bcbcc1e62b5e8d9"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#acf4c4c75c04baefe7bcbcc1e62b5e8d9">Obj::CWalkComponent::m_curb_float_height_adjusted</a></div><div class="ttdeci">bool m_curb_float_height_adjusted</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00316">WalkComponent.h:316</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a9bd51d50d2952e355289c8216c2c05bd"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a9bd51d50d2952e355289c8216c2c05bd">Obj::CWalkComponent::m_control_pegged</a></div><div class="ttdeci">bool m_control_pegged</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00264">WalkComponent.h:264</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ae36a595e48c954bc50031e45a1232bf6"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ae36a595e48c954bc50031e45a1232bf6">Obj::CWalkComponent::m_critical_point_offset</a></div><div class="ttdeci">Mth::Vector m_critical_point_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00320">WalkComponent.h:320</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a19d548d8ea92097f54e0ca4a15a77e2b"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a19d548d8ea92097f54e0ca4a15a77e2b">Obj::CWalkComponent::m_forward_control_lock</a></div><div class="ttdeci">bool m_forward_control_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00310">WalkComponent.h:310</a></div></div>
<div class="ttc" id="anamespace_mth_html_a7605206f9d659981632c4d485ffb6a6b"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#a7605206f9d659981632c4d485ffb6a6b">Mth::ClampMax</a></div><div class="ttdeci">float ClampMax(float v, float max)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00187">math.h:187</a></div></div>
<div class="ttc" id="aclass_script_1_1_c_script_html"><div class="ttname"><a href="../../db/df2/class_script_1_1_c_script.html">Script::CScript</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7f/script_8h_source.html#l00146">script.h:146</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html">CSkaterPad</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00018">SkaterPad.h:18</a></div></div>
<div class="ttc" id="anamespace_mth_html_a5a88e8aff5b7bdd63a88cd62c1485814"><div class="ttname"><a href="../../d5/db9/namespace_mth.html#a5a88e8aff5b7bdd63a88cd62c1485814">Mth::DegToRad</a></div><div class="ttdeci">float DegToRad(float degrees)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/_math_2math_8h_source.html#l00447">math.h:447</a></div></div>
<div class="ttc" id="anamespace_tmr_html_a73fa70536cd356e6914161cb7737fd65"><div class="ttname"><a href="../../d1/d0d/namespace_tmr.html#a73fa70536cd356e6914161cb7737fd65">Tmr::GetTime</a></div><div class="ttdeci">Time GetTime(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d41/ngc_2p__timer_8cpp_source.html#l00546">p_timer.cpp:546</a></div></div>
<div class="ttc" id="aclass_mth_1_1_line_html_a5954350641b480cd8048e8aee11a2587"><div class="ttname"><a href="../../da/db3/class_mth_1_1_line.html#a5954350641b480cd8048e8aee11a2587">Mth::Line::m_end</a></div><div class="ttdeci">Vector m_end</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d67/geometry_8h_source.html#l00082">geometry.h:82</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_aca9a426b8e603f01ef0f9b628ce47659"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#aca9a426b8e603f01ef0f9b628ce47659">Obj::CWalkComponent::CallMemberFunction</a></div><div class="ttdeci">virtual EMemberFunctionResult CallMemberFunction(uint32 Checksum, Script::CStruct *pParams, Script::CScript *pScript)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l00407">GunslingerWalkComponent.cpp:407</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_ac9d773fa5db2d51ea1ee3d51c0bfc349"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#ac9d773fa5db2d51ea1ee3d51c0bfc349">Obj::CWalkComponent::jump</a></div><div class="ttdeci">void jump()</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dbd/_gunslinger_walk_component_8cpp_source.html#l01374">GunslingerWalkComponent.cpp:1374</a></div></div>
<div class="ttc" id="aclass_c_skater_pad_html_acacdfcec7b1baa226b85f7ea3f8461ef"><div class="ttname"><a href="../../de/d49/class_c_skater_pad.html#acacdfcec7b1baa226b85f7ea3f8461ef">CSkaterPad::m_x</a></div><div class="ttdeci">CSkaterButton m_x</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d49/_skater_pad_8h_source.html#l00057">SkaterPad.h:57</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_walk_component_html_a7600553f82ef8c01bf43698ff3a0a82d"><div class="ttname"><a href="../../dd/d52/class_obj_1_1_c_walk_component.html#a7600553f82ef8c01bf43698ff3a0a82d">Obj::CWalkComponent::m_drift_goal_facing</a></div><div class="ttdeci">Mth::Vector m_drift_goal_facing</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db3/_walk_component_8h_source.html#l00503">WalkComponent.h:503</a></div></div>
<div class="ttc" id="aclass_nx_1_1_c_coll_cache_html"><div class="ttname"><a href="../../d5/d4f/class_nx_1_1_c_coll_cache.html">Nx::CCollCache</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d0f/_coll_cache_8h_source.html#l00059">CollCache.h:59</a></div></div>
<div class="ttc" id="aclass_obj_1_1_c_animation_component_html_a096534efe24556cd3495bf58b8709465"><div class="ttname"><a href="../../d3/d4f/class_obj_1_1_c_animation_component.html#a096534efe24556cd3495bf58b8709465">Obj::CAnimationComponent::GetPrimaryAnimTimes</a></div><div class="ttdeci">void GetPrimaryAnimTimes(float *pStart, float *pCurrent, float *pEnd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2e/animationcomponent_8cpp_source.html#l01033">animationcomponent.cpp:1033</a></div></div>
<div class="ttc" id="aanimationcomponent_8h_html"><div class="ttname"><a href="../../dc/d8b/animationcomponent_8h.html">animationcomponent.h</a></div></div>
<div class="ttc" id="anamespace_obj_html_a56bbf3de825360de3dfd096f9a6d2a96ab541c3d1b7149f1661716aaf606ba911"><div class="ttname"><a href="../../d2/d10/namespace_obj.html#a56bbf3de825360de3dfd096f9a6d2a96ab541c3d1b7149f1661716aaf606ba911">Obj::TRIGGER_JUMP_OFF</a></div><div class="ttdeci">@ TRIGGER_JUMP_OFF</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d67/_trigger_component_8h_source.html#l00036">TriggerComponent.h:36</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_3601fabbe3429c936523f20d8da3f5fe.html">gel</a></li><li class="navelem"><a class="el" href="../../dir_3d1fd9c12e3f852b89cc53aecfa8f035.html">Components</a></li><li class="navelem"><a class="el" href="../../da/dbd/_gunslinger_walk_component_8cpp.html">GunslingerWalkComponent.cpp</a></li>
    <li class="footer">Документация по OpenTHUG. Последние изменения: Вс 26 Апр 2020 03:47:21. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
